<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>RECOSIPM: CALICE::Ahc2CalibrateProcessor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>CALICE</b>::<a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html">Ahc2CalibrateProcessor</a>
  </div>
</div>
<div class="contents">
<h1>CALICE::Ahc2CalibrateProcessor Class Reference</h1><!-- doxytag: class="CALICE::Ahc2CalibrateProcessor" -->
<p>Processor that does the SiPM calibration.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Ahc2CalibrateProcessor_8hh_source.html">Ahc2CalibrateProcessor.hh</a>&gt;</code></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a57d619e6f0986ae6a02cbced83acc6f5"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::newProcessor" ref="a57d619e6f0986ae6a02cbced83acc6f5" args="()" -->
<a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html">Ahc2CalibrateProcessor</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>newProcessor</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad821f0bc1b0bd316e93eba7a24b7a723"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::init" ref="ad821f0bc1b0bd316e93eba7a24b7a723" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>init</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a95d7418cc0c13b2e941f64bc222fb8b6"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::processEvent" ref="a95d7418cc0c13b2e941f64bc222fb8b6" args="(LCEvent *evt)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>processEvent</b> (LCEvent *evt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1f22d5d38c38ef430e218e82d532802e"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::end" ref="a1f22d5d38c38ef430e218e82d532802e" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>end</b> ()</td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acaa509d1340c3afffb7f3eea852397f5"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::FillContainer" ref="acaa509d1340c3afffb7f3eea852397f5" args="(LCEvent *evt)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>FillContainer</b> (LCEvent *evt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#ac9a642a6aea42b6ad22e153e8c5f0fca">calibrateEnergyAndFillOutputCollections</a> (Ahc2Calibrations *calibration, const int GainBit, const float rawEnergy, const float rawTDC, const int BXID, const int Mem, LCCollection *ahcHitOutputCol)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calibrate the energy (convert from energy in ADC counts to energy in MIPs).  <a href="#ac9a642a6aea42b6ad22e153e8c5f0fca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaa5a4d84225a0455058ec8ab24f650b1"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::checkHit" ref="aaa5a4d84225a0455058ec8ab24f650b1" args="(CalorimeterHitImpl *hit)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>checkHit</b> (CalorimeterHitImpl *hit)</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af40da80c07919fd7ff11c2eea1aeb381"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_inputColName" ref="af40da80c07919fd7ff11c2eea1aeb381" args="" -->
std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#af40da80c07919fd7ff11c2eea1aeb381">_inputColName</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">name of the input collection <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3dc06786436feb1670498da3fd69ad94"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_ahcHitOutputColName" ref="a3dc06786436feb1670498da3fd69ad94" args="" -->
std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#a3dc06786436feb1670498da3fd69ad94">_ahcHitOutputColName</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">name of the output AHC hit collection <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac8d1b19a0ffa72a6ea1427664503921d"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_mappingProcessorName" ref="ac8d1b19a0ffa72a6ea1427664503921d" args="" -->
std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#ac8d1b19a0ffa72a6ea1427664503921d">_mappingProcessorName</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">name of the processor which provides the mapping <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae410aaaebdd65ba4054169c41266154e"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_calibProcessorName" ref="ae410aaaebdd65ba4054169c41266154e" args="" -->
std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#ae410aaaebdd65ba4054169c41266154e">_calibProcessorName</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">name of the processor which provides the SiPM calibrations <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a58a404a600c53c93f2a8d93cdd3d0bdd"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_Ahc2HardwareConnectionName" ref="a58a404a600c53c93f2a8d93cdd3d0bdd" args="" -->
std::string&nbsp;</td><td class="memItemRight" valign="bottom"><b>_Ahc2HardwareConnectionName</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acb920d14fbddb7869a6563c9b8e0591d"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_temperatureProcessorName" ref="acb920d14fbddb7869a6563c9b8e0591d" args="" -->
std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#acb920d14fbddb7869a6563c9b8e0591d">_temperatureProcessorName</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">name of the processor which provides the SiPM temperature <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abb12c048f5ca0a876f4112580dcd790e"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_cellDescriptionProcessorName" ref="abb12c048f5ca0a876f4112580dcd790e" args="" -->
std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#abb12c048f5ca0a876f4112580dcd790e">_cellDescriptionProcessorName</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">name of the processor which provides the cells description <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9569a1acebd769a434928d339a069eb3"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_cellDescriptions" ref="a9569a1acebd769a434928d339a069eb3" args="" -->
MappedContainer<br class="typebreak"/>
&lt; CellDescription &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#a9569a1acebd769a434928d339a069eb3">_cellDescriptions</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">mapped container of cells description <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aef2b11d192204ebb3723fb47fe6a0976"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_scaleEnergy" ref="aef2b11d192204ebb3723fb47fe6a0976" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#aef2b11d192204ebb3723fb47fe6a0976">_scaleEnergy</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flag to enable/disable the scaling of the hits energy <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af0d0eb5ee2782716f379aff4798f7d0f"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_energyScaleFactor" ref="af0d0eb5ee2782716f379aff4798f7d0f" args="" -->
float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#af0d0eb5ee2782716f379aff4798f7d0f">_energyScaleFactor</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">factor to scale the hits energy <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a51ad92c817fd651000dec667467090b5"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_recoContainer" ref="a51ad92c817fd651000dec667467090b5" args="" -->
MappedContainer<br class="typebreak"/>
&lt; CalorimeterHitImpl &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#a51ad92c817fd651000dec667467090b5">_recoContainer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">mapped container of reconstructed AHCAL hits <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a823161d30fc7caff787b92ea8f3fd728"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_mapper" ref="a823161d30fc7caff787b92ea8f3fd728" args="" -->
const Mapper *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#a823161d30fc7caff787b92ea8f3fd728">_mapper</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the mapper <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af32eea30839db78e5e5aa45c42dac715"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_calibContainer" ref="af32eea30839db78e5e5aa45c42dac715" args="" -->
MappedContainer<br class="typebreak"/>
&lt; Ahc2Calibrations &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#af32eea30839db78e5e5aa45c42dac715">_calibContainer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">mapped container of SiPM calibrations <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8f227d17ea78bb5f560d695725099e93"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_temperatureContainer" ref="a8f227d17ea78bb5f560d695725099e93" args="" -->
MappedContainer&lt; SimpleValue &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#a8f227d17ea78bb5f560d695725099e93">_temperatureContainer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">mapped container of cells temperature <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8bae2aa3700e81f9f739a3d64c3e7cbb"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_newdataformat" ref="a8bae2aa3700e81f9f739a3d64c3e7cbb" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#a8bae2aa3700e81f9f739a3d64c3e7cbb">_newdataformat</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flag for the new data format in EUDAQ <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aad858c334434d3f75b9d993aaf60f076"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_pedestalSubtraction" ref="aad858c334434d3f75b9d993aaf60f076" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#aad858c334434d3f75b9d993aaf60f076">_pedestalSubtraction</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flag to enable/disable pedestal subtraction <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac36692611bc1dc16e7b613f0f279121b"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_doMipTempCorr" ref="ac36692611bc1dc16e7b613f0f279121b" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#ac36692611bc1dc16e7b613f0f279121b">_doMipTempCorr</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flag to enable/disable the temperature correction of the MIP <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3d46c30741845b340de59f9b5fd5de40"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_doGainTempCorr" ref="a3d46c30741845b340de59f9b5fd5de40" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#a3d46c30741845b340de59f9b5fd5de40">_doGainTempCorr</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flag to enable/disable the temperature correction of the gain <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a40d7fce6e7e82cb810b6c0a7e016a74d"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_doSaturationCorr" ref="a40d7fce6e7e82cb810b6c0a7e016a74d" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#a40d7fce6e7e82cb810b6c0a7e016a74d">_doSaturationCorr</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flag to enable/disable the saturation correction <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6498f3913e1c29ca1903001108e5fc23"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_zeroSuppression" ref="a6498f3913e1c29ca1903001108e5fc23" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#a6498f3913e1c29ca1903001108e5fc23">_zeroSuppression</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flag to enable/disable the zero suppression, that is if you want to apply the 0.4 MIP cut or not <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa44da590aa3e13e6f4645608d6688503"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_skipNoHit" ref="aa44da590aa3e13e6f4645608d6688503" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#aa44da590aa3e13e6f4645608d6688503">_skipNoHit</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flag to skip the cell without hitbit <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2d753d78ae5426ff61005e48040ad22c"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_isPhysicsMode" ref="a2d753d78ae5426ff61005e48040ad22c" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#a2d753d78ae5426ff61005e48040ad22c">_isPhysicsMode</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flag to enable/disable the physics mode energy calibration <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af1da32722c145038b42b025b34d451e9"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_filterDeadCells" ref="af1da32722c145038b42b025b34d451e9" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#af1da32722c145038b42b025b34d451e9">_filterDeadCells</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flag to enable/disable the filtering of dead cells <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afd38d20f0310d2ce016d80493a25c651"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_filterDefaultCells" ref="afd38d20f0310d2ce016d80493a25c651" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#afd38d20f0310d2ce016d80493a25c651">_filterDefaultCells</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flag to enable/disable the filgering of default cells <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a14fc5b04c571329bde618c70e5aa9885"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_doErrorCalculation" ref="a14fc5b04c571329bde618c70e5aa9885" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#a14fc5b04c571329bde618c70e5aa9885">_doErrorCalculation</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flag to enable/disable the error calculation <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a07cf5b93b24db2acad37b9c14b65011c"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_mipCut" ref="a07cf5b93b24db2acad37b9c14b65011c" args="" -->
float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#a07cf5b93b24db2acad37b9c14b65011c">_mipCut</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">value of the MIP cut (default: 0.4 MIPs) <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7f34123a00ee631895bda7680794cfb6"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_mipToGeVFactor" ref="a7f34123a00ee631895bda7680794cfb6" args="" -->
float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#a7f34123a00ee631895bda7680794cfb6">_mipToGeVFactor</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">conversion factor from MIPs to GeV <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a263941e7f6da582dd0e4336c2d0443bf"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_doMipConversion" ref="a263941e7f6da582dd0e4336c2d0443bf" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>_doMipConversion</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aacfee6708f5ebda2f4f14273a508c345"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_doTimeConversion" ref="aacfee6708f5ebda2f4f14273a508c345" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#aacfee6708f5ebda2f4f14273a508c345">_doTimeConversion</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert ADC to MIP or not. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acadbcf61c9aa0b2b3abea6cc2e36d0b7"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_HBUoffsets" ref="acadbcf61c9aa0b2b3abea6cc2e36d0b7" args="" -->
FloatVec&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#acadbcf61c9aa0b2b3abea6cc2e36d0b7">_HBUoffsets</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert TDC to ns or not. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#af7fd3817f6aefdd07f107c05ed8f61f4">_isDATA</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">HBU position offsets.  <a href="#af7fd3817f6aefdd07f107c05ed8f61f4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab5809d2c7f3a1e6cf7deb8ed8fb48f90"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_isMC" ref="ab5809d2c7f3a1e6cf7deb8ed8fb48f90" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#ab5809d2c7f3a1e6cf7deb8ed8fb48f90">_isMC</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flag to switch to MC processing <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#af4cd3d6df2a690c09a6eb2689505a4b4">_isFirstEvent</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flag to switch to DATA/MC at the first event, the following events should be the same.  <a href="#af4cd3d6df2a690c09a6eb2689505a4b4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab386d03c40a8816dca77af0f9b1b7496"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_HitContainer" ref="ab386d03c40a8816dca77af0f9b1b7496" args="" -->
MappedContainer<br class="typebreak"/>
&lt; CalorimeterHitImpl &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#ab386d03c40a8816dca77af0f9b1b7496">_HitContainer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">mapped container of AHCAL cells <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a20c1332ea5ef0de61f3ffb74e104f873"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_HardwareConnnectionContainer" ref="a20c1332ea5ef0de61f3ffb74e104f873" args="" -->
map&lt; int, pair&lt; int, int &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#a20c1332ea5ef0de61f3ffb74e104f873">_HardwareConnnectionContainer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">map containing relationship between ChipID and Module/ChipNb <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Processor that does the SiPM calibration. </p>
<p>The calibration is done according to the formula: <img class="formulaInl" alt="$E_{calibrated}=f_{saturation}((E_{raw}-pedestal) \cdot IC/gain) \cdot gain/IC/MIP$" src="form_0.png"/></p>
<p>Please note:</p>
<ul>
<li>this processor does the calibration for both data and Monte Carlo, based on the type of the input collection ("LCGenericObject" for data, and "CalorimeterHit" for Monte Carlo);</li>
<li>for noise creation, the saturation correction is disabled (doSaturationCorrection=false), as well as the ZeroSuppression (ZeroSuppression = false)</li>
<li>for Monte Carlo, the pedestal subtraction is disabled (PedestalSubtraction=false)</li>
</ul>
<dl class="user"><dt><b>processor parameters</b></dt><dd><table border="1" cellspacing="3" cellpadding="3">
<tr>
<td><p>steering file parameter name </p>
</td><td><p>description  </p>
</td></tr>
<tr>
<td><p><b><em> InputCollectionName </em></b></p>
</td><td><p>name of the input collection, with energy in ADC counts </p>
</td></tr>
<tr>
<td><p><b><em> OutputCollectionName </em></b></p>
</td><td><p>name of the output collection, with energy in MIPs </p>
</td></tr>
<tr>
<td><p><b><em> MappingProcessorName </em></b></p>
</td><td><p>name of the mapping processor that provides the necessary Mapper class </p>
</td></tr>
<tr>
<td><p><b><em> Ahc2CalibrationsProcessorName </em></b></p>
</td><td><p>name of the processor which provides the SiPM calibrations </p>
</td></tr>
<tr>
<td><p><b><em> SiPMTemperatureProcessorName </em></b></p>
</td><td><p>name of the processor which provides the SiPM temperature </p>
</td></tr>
<tr>
<td><p><b><em> PedestalSubtraction </em></b></p>
</td><td><p>Flag to enable/disable pedestal subtraction </p>
</td></tr>
<tr>
<td><p><b><em> ZeroSuppression </em></b></p>
</td><td><p>Flag to enable/disable zero suppression (intention to apply the MIP cut) </p>
</td></tr>
<tr>
<td><p><b><em> MipCut </em></b></p>
</td><td><p>Value of the MIP cut (default: 0.4 MIPs) </p>
</td></tr>
<tr>
<td><p><b><em> doMipConversion </em></b></p>
</td><td><p>Flag to enable/disable MIP Calibration </p>
</td></tr>
<tr>
<td><p><b><em> doMipTemperatureCorrection </em></b></p>
</td><td><p>Flag to enable/disable temperature correction of the MIP </p>
</td></tr>
<tr>
<td><p><b><em> doGainTemperatureCorrection </em></b></p>
</td><td><p>Flag to enable/disable temperature correction of the gain </p>
</td></tr>
<tr>
<td><p><b><em> doSaturationCorrection </em></b></p>
</td><td><p>Flag to enable/disable the saturation correction </p>
</td></tr>
<tr>
<td><p><b><em> doTimeConversion </em></b></p>
</td><td><p>Flag to enable/disable the TDC Calibration </p>
</td></tr>
<tr>
<td><p><b><em> doErrorCalculation </em></b></p>
</td><td><p>Flag to enable/disable error calculation </p>
</td></tr>
<tr>
<td><p><b><em> filterDeadCells </em></b></p>
</td><td><p>Flag to enable/disable the filtering of dead cells </p>
</td></tr>
<tr>
<td><p><b><em> filterDefaultCells </em></b></p>
</td><td><p>Flag to enable/disable the filtering of default dead cells </p>
</td></tr>
</table>
</dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd><a href="mailto:shaojun.lu@desy.de">shaojun.lu@desy.de</a> </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>0.1 </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>January 2013 </dd></dl>

<p>Definition at line <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00060">60</a> of file <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html">Ahc2CalibrateProcessor.hh</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ac9a642a6aea42b6ad22e153e8c5f0fca"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::calibrateEnergyAndFillOutputCollections" ref="ac9a642a6aea42b6ad22e153e8c5f0fca" args="(Ahc2Calibrations *calibration, const int GainBit, const float rawEnergy, const float rawTDC, const int BXID, const int Mem, LCCollection *ahcHitOutputCol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CALICE::Ahc2CalibrateProcessor::calibrateEnergyAndFillOutputCollections </td>
          <td>(</td>
          <td class="paramtype">Ahc2Calibrations *&nbsp;</td>
          <td class="paramname"> <em>calibration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&nbsp;</td>
          <td class="paramname"> <em>GainBit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&nbsp;</td>
          <td class="paramname"> <em>rawEnergy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&nbsp;</td>
          <td class="paramname"> <em>rawTDC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&nbsp;</td>
          <td class="paramname"> <em>BXID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&nbsp;</td>
          <td class="paramname"> <em>Mem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LCCollection *&nbsp;</td>
          <td class="paramname"> <em>ahcHitOutputCol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calibrate the energy (convert from energy in ADC counts to energy in MIPs). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>calibration</em>&nbsp;</td><td>calibration of the current SiPM </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rawEnergy</em>&nbsp;</td><td>raw energy, in ADC counts </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rawTDC</em>&nbsp;</td><td>raw time, in TIC counts </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>RampID</em>&nbsp;</td><td>BunchXID2 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>MEMCELLNr</em>&nbsp;</td><td>Memory cell ID </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NCHIPS</em>&nbsp;</td><td>chip ID </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ahcHitOutputCol</em>&nbsp;</td><td>the AHC hit output collection, of type CalorimeterHit </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Ahc2CalibrateProcessor_8cc_source.html#l00548">548</a> of file <a class="el" href="Ahc2CalibrateProcessor_8cc_source.html">Ahc2CalibrateProcessor.cc</a>.</p>

<p>References <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00117">_ahcHitOutputColName</a>, <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00124">_cellDescriptions</a>, <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00149">_doErrorCalculation</a>, <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00140">_doGainTempCorr</a>, <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00139">_doMipTempCorr</a>, <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00141">_doSaturationCorr</a>, <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00155">_doTimeConversion</a>, <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00127">_energyScaleFactor</a>, <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00147">_filterDeadCells</a>, <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00148">_filterDefaultCells</a>, <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00157">_HBUoffsets</a>, <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00145">_isPhysicsMode</a>, <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00151">_mipCut</a>, <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00138">_pedestalSubtraction</a>, <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00126">_scaleEnergy</a>, and <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00142">_zeroSuppression</a>.</p>

</div>
</div>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="af7fd3817f6aefdd07f107c05ed8f61f4"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_isDATA" ref="af7fd3817f6aefdd07f107c05ed8f61f4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#af7fd3817f6aefdd07f107c05ed8f61f4">CALICE::Ahc2CalibrateProcessor::_isDATA</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>HBU position offsets. </p>
<p>flag to switch to DATA processing </p>

<p>Definition at line <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00159">159</a> of file <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html">Ahc2CalibrateProcessor.hh</a>.</p>

</div>
</div>
<a class="anchor" id="af4cd3d6df2a690c09a6eb2689505a4b4"></a><!-- doxytag: member="CALICE::Ahc2CalibrateProcessor::_isFirstEvent" ref="af4cd3d6df2a690c09a6eb2689505a4b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classCALICE_1_1Ahc2CalibrateProcessor.html#af4cd3d6df2a690c09a6eb2689505a4b4">CALICE::Ahc2CalibrateProcessor::_isFirstEvent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>flag to switch to DATA/MC at the first event, the following events should be the same. </p>

<p>Definition at line <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html#l00161">161</a> of file <a class="el" href="Ahc2CalibrateProcessor_8hh_source.html">Ahc2CalibrateProcessor.hh</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="Ahc2CalibrateProcessor_8hh_source.html">Ahc2CalibrateProcessor.hh</a></li>
<li><a class="el" href="Ahc2CalibrateProcessor_8cc_source.html">Ahc2CalibrateProcessor.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 1 Dec 2017 for RECOSIPM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
