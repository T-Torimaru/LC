<?xml version="1.0" encoding="us-ascii"?>
<!-- ?xml-stylesheet type="text/xsl" href="http://ilcsoft.desy.de/marlin/marlin.xsl"? -->
<!-- ?xml-stylesheet type="text/xsl" href="marlin.xsl"? -->

<!--
============================================================================================================================
   Steering File generated by Marlin GUI on Tue Aug 30 15:43:36 2011

   WARNING: - Please be aware that comments made in the original steering file were lost.
            - Processors that are not installed in your Marlin binary lost their parameter's descriptions and types as well.
            - Extra parameters that aren't categorized as default in a processor lost their description and type.
============================================================================================================================
-->

<!--
source /afs/desy.de/project/ilcsoft/sw/i386_gcc41_sl5/v01-10/init_ilcsoft.sh 
export MARLIN_DLL=/home/iwsatlas1/weuste/workspace/calice/hcalTracking/lib/libHCalTracking.so::/afs/desy.de/group/flc/hcal/calice_soft/v04-04/lib/libCALIBMULTI.so:/afs/desy.de/group/flc/hcal/calice_soft/v04-04/lib/libCALIB.so:/afs/desy.de/group/flc/hcal/calice_soft/v04-04/lib/libcalicesim.so:/afs/desy.de/group/flc/hcal/calice_soft/v04-04/lib/libcellGeometry.so:/afs/desy.de/group/flc/hcal/calice_soft/v04-04/lib/libclustering.so:/afs/desy.de/group/flc/hcal/calice_soft/v04-04/lib/libDeadAndNoisyTools.so:/afs/desy.de/group/flc/hcal/calice_soft/v04-04/lib/libFITMIP.so:/afs/desy.de/group/flc/hcal/calice_soft/v04-04/lib/libhh_proc.so:/afs/desy.de/group/flc/hcal/calice_soft/v04-04/lib/libraw2calohit.so:/afs/desy.de/group/flc/hcal/calice_soft/v04-04/lib/librecoAnalysis.so:/afs/desy.de/group/flc/hcal/calice_soft/v04-04/lib/librecoSiPM.so:/afs/desy.de/group/flc/hcal/calice_soft/v04-04/lib/libRootTreeWriter.so:/afs/desy.de/group/flc/hcal/calice_soft/v04-04/lib/libuserlib.so

glced works with ilcsoft v01-10, but v01-11 is better
ced: /afs/desy.de/project/ilcsoft/sw/i386_gcc41_sl5/v01-11/CED/v01-02/bin
Make sure that 32/64 bit are same @ glced and calice soft, otherwise the ced viewer will display crap!
-->



<marlin xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://ilcsoft.desy.de/marlin/marlin.xsd">

	<execute>
		<processor name="EventSelector"/>

		<processor name="ConditionsProcessor"/>

		<processor name="AhcMappingProcessor"/>
		<processor name="CellDescriptionProcessor"/>
		<processor name="AhcNeighbours"/>

		<processor name="Tracking"/>
		<processor name="TrackingFilter"/>

		<processor name="RootOut"/>
		<processor name="RootOutFiltered"/>
		<!--      <processor name="Out"/-->

	</execute>

	<global>
		<!-- <parameter name="LCIOInputFiles"> /remote/pcilc15/bkp_pcilc7/pcilc7/tracking/tracks/tracks_CERN_330650.slcio
			</parameter-->
		<!-- Event 2483: Muon -->
		<!-- <parameter name="LCIOInputFiles"> /remote/pcilc15/weuste/CALICE/data/Run330325_rec.000.slcio
			</parameter-->
		<parameter name="LCIOInputFiles">
			/remote/pcilc15/weuste/CALICE/data/Run331333_rec.000.slcio
			<!--/remote/pcilc15/weuste/CALICE/data/Run331333_rec.001.slcio-->
		</parameter>


		<parameter name="MaxRecordNumber" value="1" />
<!--		<parameter name="MaxRecordNumber" value="100000" /-->
		<parameter name="SkipNEvents" value="2483" />
		<parameter name="SupressCheck" value="false"/>
		<parameter name="Verbosity" value="MESSAGE"/>
	</global>

	<processor name="Tracking" type="HCalTrackingNNProcessor">
		<parameter name="AhcCalorimeterHitsCollection" type="string" lcioInType="CalorimeterHit">AhcCalorimeter_Hits</parameter>
		<parameter name="AhcTrackCollection" type="string" lcioOutType="Cluster">AhcTracksNN</parameter>
		<parameter name="cellNeighboursProcessor" type="string" value="AhcNeighbours"/>
		<parameter name="cellDescriptionProcessor" type="string" value="CellDescriptionProcessor"/>


		<parameter name="maxGapRatioPerTrack" type="double" value="0.5"/>
		<parameter name="maxGapSizePerTrack" type="int" value="1"/>
		<parameter name="minimumTrackLength" type="int" value="6"/>

		<parameter name="Verbosity" value="MESSAGE"/>
	</processor>

	<processor name="TrackingFilter" type="HCalTrackFilter">
		<parameter name="cellDescriptionProcessor" type="string" value="CellDescriptionProcessor"/>
		<parameter name="TrackCollection">AhcTracksNN</parameter>
		<parameter name="FilteredTrackCollection">AhcTracksNN_Filtered</parameter>
		<parameter name="Verbosity" type="string" value="DEBUG"/>
	</processor>
	
	<processor name="RootOut" type="HcalTrack2RootTree">
		<parameter name="rootOutputFile">Tracks_Run331333.root</parameter>
		<parameter name="TrackClusterCollection">AhcTracksNN</parameter>
	</processor>

	<processor name="RootOutFiltered" type="HcalTrack2RootTree">
		<parameter name="rootOutputFile">Tracks_Run331333_filtered.root</parameter>
		<parameter name="TrackClusterCollection">AhcTracksNN_Filtered</parameter>
	</processor>


	<processor name="Out" type="LCIOOutputProcessor">
		<parameter name="LCIOOutputFile" type="string" value="out.slcio"/>
		<parameter name="LCIOWriteMode" type="string" value="WRITE_NEW"/>
	</processor>

	<processor name="ConditionsProcessor" type="ConditionsProcessor">
<!--
		<parameter name="DBCondHandler" type="StringVec">ModuleConnection /cd_calice_cernbeam/Hcal/HcalMapping HEAD</parameter>
		<parameter name="DBCondHandler" type="StringVec">ModuleDescription /cd_calice_cernbeam/Hcal/HcalModuleDescription HEAD</parameter>
		<parameter name="DBCondHandler" type="StringVec">ModuleLocation /cd_calice_cernbeam/Hcal/HcalModuleLocation HEAD</parameter>
		<parameter name="DBCondHandler" type="StringVec">DetectorTransformation /cd_calice_cernbeam/Hcal/HcalDetectorPosition HEAD</parameter>
		<parameter name="DBCondHandler" type="StringVec">TilesProduction /cd_calice/Hcal/Production_DB HEAD</parameter>-->
		<parameter name="DBCondHandler" type="StringVec">BeamMetaDataFolder          /cd_calice_cernbeam/BeamMetaData HEAD</parameter>
		<parameter name="DBCondHandler" type="StringVec">ModuleLocationReference     /cd_calice_cernbeam/Hcal/HcalModuleLocationReference  ahc_HcalModuleLocationReference_001</parameter>
		<parameter name="DBCondHandler" type="StringVec">ModuleConnection            /cd_calice_cernbeam/Hcal/HcalMapping ahc_HcalMapping_002</parameter>
		<parameter name="DBCondHandler" type="StringVec">ModuleDescription           /cd_calice/Ahc/ModuleDescription    ahc_ModuleDescription_001</parameter>
		<parameter name="DBCondHandler" type="StringVec">DetectorTransformation      /cd_calice_cernbeam/Hcal/DetectorPosition ahc_DetectorPosition_002</parameter>
		<parameter name="DBCondHandler" type="StringVec">ModuleLocation /cd_calice_cernbeam/Hcal/HcalModuleLocation HEAD</parameter>
		<parameter name="DBInit" type="string" value="flccaldb02.desy.de:calice:caliceon:Delice.1:3306"/>
	</processor>

	<processor name="AhcMappingProcessor" type="MappingProcessor">
		<parameter name="ModuleConnection" type="string" lcioInType="LCGenericObject">ModuleConnection</parameter>
		<parameter name="ModuleDescription" type="string" lcioInType="LCGenericObject">ModuleDescription</parameter>
		<parameter name="MapperType" type="string" value="AHC"/>
	</processor>

	<processor name="EventSelector" type="eventSelector">
		<parameter name="withTrigger" type="StringVec" value="B"/>
		<!--parameter name="withoutTrigger" type="StringVec"> </parameter-->
	</processor>

	<processor name="AhcNeighbours" type="CellNeighboursProcessor">
		<parameter name="MappingProcessorName" type="string" value="AhcMappingProcessor"/>
	</processor>



	<processor name="CellDescriptionProcessor" type="CellDescriptionProcessor">
		<parameter name="DetectorTransformation" type="string" lcioInType="LCGenericObject">DetectorTransformation</parameter>
		<parameter name="ModuleConnection" type="string" lcioInType="LCGenericObject">ModuleConnection</parameter>
		<parameter name="ModuleDescription" type="string" lcioInType="LCGenericObject">ModuleDescription</parameter>
		<parameter name="ModuleLocation" type="string" lcioInType="LCGenericObject">ModuleLocation</parameter>
		<parameter name="MappingProcessorName" type="string" value="AhcMappingProcessor"/>
		<parameter name="Verbosity" type="string" value="SILENT"/>
	</processor>

</marlin>
