<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CALICE_USERLIB: CALICE::BeamMomentum Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceCALICE.html">CALICE</a>::<a class="el" href="classCALICE_1_1BeamMomentum.html">BeamMomentum</a>
  </div>
</div>
<div class="contents">
<h1>CALICE::BeamMomentum Class Reference</h1><!-- doxytag: class="CALICE::BeamMomentum" -->
<p>Class to claculate the beam momentum and momentum spread from beamline slow readout data.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="BeamMomentum_8hh_source.html">BeamMomentum.hh</a>&gt;</code></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1BeamMomentum.html#aa27dc27234e98e1ad8115049f1b4c202">BeamMomentum</a> (const <a class="el" href="classCALICE_1_1BmlSlowRunDataBlock.html">CALICE::BmlSlowRunDataBlock</a> &amp;cernBeamData)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Construcor using CERN data as input.  <a href="#aa27dc27234e98e1ad8115049f1b4c202"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1BeamMomentum.html#a98b2a24c31c0afb62b280caaae5d69cc">getMomentum</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1BeamMomentum.html#afad1bc1ae90b11d91d9f615584d7ac9d">getSecondaryMomentum</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1BeamMomentum.html#a5f70de92c980e0abc7e42b076d6d013d">getTertiaryMomentum</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1BeamMomentum.html#acea65b8dc19544ceb52b31d1b69ff6d7">getRelativeSpread</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1BeamMomentum.html#a1136a4941aca0feab6ac7a748d456c26">getMomentumSpread</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1BeamMomentum.html#ab7883995158ee69aa47b7ed808d0b51a">getLimitedRelativeSpread</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">this returns a limited spread for secondary beams, please read the class description  <a href="#ab7883995158ee69aa47b7ed808d0b51a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1BeamMomentum.html#a124b5dd4915b4d0b2d9f0c96985565ae">getLimitedMomentumSpread</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">this returns a limited spread for secondary beams, please read the class description  <a href="#a124b5dd4915b4d0b2d9f0c96985565ae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1BeamMomentum.html#a1b09ead51b46163bb14e5f8802bf7714">getWarnings</a> () const </td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab5a1406c4ee908d6191e579d5269ad82"></a><!-- doxytag: member="CALICE::BeamMomentum::_momentum" ref="ab5a1406c4ee908d6191e579d5269ad82" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><b>_momentum</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aedd80f5b4994fc065d015eecf3aca9d9"></a><!-- doxytag: member="CALICE::BeamMomentum::_secondaryMomentum" ref="aedd80f5b4994fc065d015eecf3aca9d9" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><b>_secondaryMomentum</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af1bae196b4deedf5338525233e040b46"></a><!-- doxytag: member="CALICE::BeamMomentum::_tertiaryMomentum" ref="af1bae196b4deedf5338525233e040b46" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><b>_tertiaryMomentum</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2423b7ace1c4d2583a1d2b41987078b9"></a><!-- doxytag: member="CALICE::BeamMomentum::_relativeSpread" ref="a2423b7ace1c4d2583a1d2b41987078b9" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><b>_relativeSpread</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2769dd2776a49367360f8afebb4bef6d"></a><!-- doxytag: member="CALICE::BeamMomentum::_limitedRelativeSpread" ref="a2769dd2776a49367360f8afebb4bef6d" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><b>_limitedRelativeSpread</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae15697c4beb991a607364bef48a813fa"></a><!-- doxytag: member="CALICE::BeamMomentum::_warningText" ref="ae15697c4beb991a607364bef48a813fa" args="" -->
std::stringstream&nbsp;</td><td class="memItemRight" valign="bottom"><b>_warningText</b></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Class to claculate the beam momentum and momentum spread from beamline slow readout data. </p>
<p>The beam momentum is linearly approximated from the magnet currents. A Gaussian distribution of the beam momentum spread is assumed.</p>
<dl class="user"><dt><b>CERN</b></dt><dd>The calculations are based on the informations found in the <b>"Short Introduction to the use of the H6 beam"</b>, Version 3.0, 2 May 2000.</dd></dl>
<dl class="user"><dt><b></b></dt><dd>There are no references found for the current to momentum translation for most of the magnets. The <b>Introduction</b> tells only that B(end)5 should be at 566.4A for 120 GeV. Therefore, the slope was fitted on a few runs. For B5 the fit gives the same result as the <b>Introduction</b>.</dd></dl>
<dl class="user"><dt><b></b></dt><dd>The <b>full</b> <b>width</b> beam momentum spread is calculated by the formula <p class="formulaDsp">
<img class="formulaDsp" alt="\[ \frac{\Delta p}{p} = \frac{\sqrt{C_{3}^2+C_{8}^2}}{19.4} [\%] \]" src="form_0.png"/>
</p>
 where <img class="formulaInl" alt="$ C_{i} $" src="form_1.png"/> is the <b>full</b> <b>width</b> opening of collimator <img class="formulaInl" alt="$i$" src="form_2.png"/>. This is valid for tertiary beams.</dd></dl>
<dl class="user"><dt><b></b></dt><dd>For secondary beams this might lead to an overestimation of the beam spread, as <img class="formulaInl" alt="$C_{8}$" src="form_3.png"/> might be further open than the beam size. The <b>Introduction</b> suggest to use <img class="formulaInl" alt="$ C_{8} = $" src="form_4.png"/> 4mm as upper limit for high energy secondary beams. This class provides limited and unlimited results, as it is not clear to the author when a beam can be considered "high energy" and the destinction between secondary and tertiary beam by target position fails in 2007. The beam is considered secondary, if the beam momentum in the secondary and the tertiary section differ for less than 10 %. In this case, a warning message is issued.</dd></dl>
<dl class="user"><dt><b></b></dt><dd>The Gaussian width is derived by <p class="formulaDsp">
<img class="formulaDsp" alt="\[ \sigma = \frac{\Delta p}{2\sqrt{2\ln{2}}} \approx \frac{\Delta p}{2.35482} \]" src="form_5.png"/>
</p>
</dd></dl>
<dl class="attention"><dt><b>Attention:</b></dt><dd>The implementation supports only CERN so far</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>implement a constructor for FNAL slow readout data</dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd><a href="mailto:Benjamin.Lutz@desy.de">Benjamin.Lutz@desy.de</a> </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>October 2008 </dd></dl>

<p>Definition at line <a class="el" href="BeamMomentum_8hh_source.html#l00048">48</a> of file <a class="el" href="BeamMomentum_8hh_source.html">BeamMomentum.hh</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa27dc27234e98e1ad8115049f1b4c202"></a><!-- doxytag: member="CALICE::BeamMomentum::BeamMomentum" ref="aa27dc27234e98e1ad8115049f1b4c202" args="(const CALICE::BmlSlowRunDataBlock &amp;cernBeamData)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CALICE::BeamMomentum::BeamMomentum </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCALICE_1_1BmlSlowRunDataBlock.html">CALICE::BmlSlowRunDataBlock</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>cernBeamData</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Construcor using CERN data as input. </p>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classCALICE_1_1BeamMomentumException.html" title="excpetion during beam momentum calculation">BeamMomentumException</a></em>&nbsp;</td><td>when number of magnet currents or collimators does not corresond to the CERN beamline </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BeamMomentum_8cc_source.html#l00010">10</a> of file <a class="el" href="BeamMomentum_8cc_source.html">BeamMomentum.cc</a>.</p>

<p>References <a class="el" href="BmlSlowRunDataBlock_8hh_source.html#l00248">CALICE::BmlSlowRunDataBlock::getBendCurrents()</a>, and <a class="el" href="BmlSlowRunDataBlock_8hh_source.html#l00258">CALICE::BmlSlowRunDataBlock::getCollimatorPositions()</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a124b5dd4915b4d0b2d9f0c96985565ae"></a><!-- doxytag: member="CALICE::BeamMomentum::getLimitedMomentumSpread" ref="a124b5dd4915b4d0b2d9f0c96985565ae" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CALICE::BeamMomentum::getLimitedMomentumSpread </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>this returns a limited spread for secondary beams, please read the class description </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>beam momentum spread in GeV </dd></dl>

<p>Definition at line <a class="el" href="BeamMomentum_8cc_source.html#l00141">141</a> of file <a class="el" href="BeamMomentum_8cc_source.html">BeamMomentum.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ab7883995158ee69aa47b7ed808d0b51a"></a><!-- doxytag: member="CALICE::BeamMomentum::getLimitedRelativeSpread" ref="ab7883995158ee69aa47b7ed808d0b51a" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CALICE::BeamMomentum::getLimitedRelativeSpread </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>this returns a limited spread for secondary beams, please read the class description </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>relative beam momentum spread </dd></dl>

<p>Definition at line <a class="el" href="BeamMomentum_8cc_source.html#l00137">137</a> of file <a class="el" href="BeamMomentum_8cc_source.html">BeamMomentum.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a98b2a24c31c0afb62b280caaae5d69cc"></a><!-- doxytag: member="CALICE::BeamMomentum::getMomentum" ref="a98b2a24c31c0afb62b280caaae5d69cc" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CALICE::BeamMomentum::getMomentum </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>the beam momentum in GeV </dd></dl>

<p>Definition at line <a class="el" href="BeamMomentum_8cc_source.html#l00117">117</a> of file <a class="el" href="BeamMomentum_8cc_source.html">BeamMomentum.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a1136a4941aca0feab6ac7a748d456c26"></a><!-- doxytag: member="CALICE::BeamMomentum::getMomentumSpread" ref="a1136a4941aca0feab6ac7a748d456c26" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CALICE::BeamMomentum::getMomentumSpread </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>beam momentum spread in GeV </dd></dl>

<p>Definition at line <a class="el" href="BeamMomentum_8cc_source.html#l00133">133</a> of file <a class="el" href="BeamMomentum_8cc_source.html">BeamMomentum.cc</a>.</p>

</div>
</div>
<a class="anchor" id="acea65b8dc19544ceb52b31d1b69ff6d7"></a><!-- doxytag: member="CALICE::BeamMomentum::getRelativeSpread" ref="acea65b8dc19544ceb52b31d1b69ff6d7" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CALICE::BeamMomentum::getRelativeSpread </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>relative beam momentum spread </dd></dl>

<p>Definition at line <a class="el" href="BeamMomentum_8cc_source.html#l00129">129</a> of file <a class="el" href="BeamMomentum_8cc_source.html">BeamMomentum.cc</a>.</p>

</div>
</div>
<a class="anchor" id="afad1bc1ae90b11d91d9f615584d7ac9d"></a><!-- doxytag: member="CALICE::BeamMomentum::getSecondaryMomentum" ref="afad1bc1ae90b11d91d9f615584d7ac9d" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CALICE::BeamMomentum::getSecondaryMomentum </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>the beam momentum before the secondary target </dd></dl>

<p>Definition at line <a class="el" href="BeamMomentum_8cc_source.html#l00121">121</a> of file <a class="el" href="BeamMomentum_8cc_source.html">BeamMomentum.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a5f70de92c980e0abc7e42b076d6d013d"></a><!-- doxytag: member="CALICE::BeamMomentum::getTertiaryMomentum" ref="a5f70de92c980e0abc7e42b076d6d013d" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CALICE::BeamMomentum::getTertiaryMomentum </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>the beam momentum after the secondary target </dd></dl>

<p>Definition at line <a class="el" href="BeamMomentum_8cc_source.html#l00125">125</a> of file <a class="el" href="BeamMomentum_8cc_source.html">BeamMomentum.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a1b09ead51b46163bb14e5f8802bf7714"></a><!-- doxytag: member="CALICE::BeamMomentum::getWarnings" ref="a1b09ead51b46163bb14e5f8802bf7714" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string CALICE::BeamMomentum::getWarnings </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>warnings that occured during interpretation of beam settings </dd></dl>

<p>Definition at line <a class="el" href="BeamMomentum_8cc_source.html#l00145">145</a> of file <a class="el" href="BeamMomentum_8cc_source.html">BeamMomentum.cc</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="BeamMomentum_8hh_source.html">BeamMomentum.hh</a></li>
<li><a class="el" href="BeamMomentum_8cc_source.html">BeamMomentum.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 1 Dec 2017 for CALICE_USERLIB by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
