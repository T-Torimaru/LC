<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DeadAndNoisyTools: </title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<p>These are some examples for the interactive use at ROOT's CINT prompt.</p>
<p>All examples assume that you have the libDeadAndNoisyTools library loaded. </p>
<div class="fragment"><pre class="fragment">~&gt; export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:${PATH_TO_CALICE_CALIB}/lib
~&gt; root -l
root [0] gSystem-&gt;Load(<span class="stringliteral">&quot;libDeadAndNoisyTools.so&quot;</span>)
</pre></div><p>Note: The <code>export</code> command is for bash, you might have to adapt it if you are using a different shell.</p>
<p>If you need it regularly you might want to put the <code>gSystem-&gt;Load()</code> command into your rootlogon.C</p>
<h2><a class="anchor" id="usingSpectrumPropertiesRunInfo">
Having a closer look at one run using SpectrumPropertiesRunInfo</a></h2>
<p>The input for the <a class="el" href="class_spectrum_properties_run_info.html" title="The SpectrumPropertiesRunInfo is a utility class to access the spectrum properties...">SpectrumPropertiesRunInfo</a> class is a root file with the spectra for each channel. Usually this is in a files called <code>runnumber.root</code>. Currently also a file with the AHC config is needed for the frontend/slot &lt;-&gt; module mapping. This is subject to be removed once the mapping in ahcBinHst ist fully working.</p>
<h3><a class="anchor" id="plotRun">
Plotting the rms of all channels in a run</a></h3>
<p>For this we use the TTree:.Draw() command from root. The <a class="el" href="class_spectrum_properties_run_info.html" title="The SpectrumPropertiesRunInfo is a utility class to access the spectrum properties...">SpectrumPropertiesRunInfo</a> class provides the tree for you. All you need is the input file <code>RUNNUMBER.root</code>. You simply create the <a class="el" href="class_spectrum_properties_run_info.html" title="The SpectrumPropertiesRunInfo is a utility class to access the spectrum properties...">SpectrumPropertiesRunInfo</a> object [1] and get the tree from it [2]. For drawing TGraphs (2D plots) it is convenient to change the marker style from a one pixel dot to something larger [3]. </p>
<div class="fragment"><pre class="fragment">root [1] <a class="code" href="class_spectrum_properties_run_info.html" title="The SpectrumPropertiesRunInfo is a utility class to access the spectrum properties...">SpectrumPropertiesRunInfo</a> spri(360759,<span class="stringliteral">&quot;AHCforCERN2010.cfg&quot;</span>);
root [2] TTree *t = spri.getSpectrumPropertiesTree()
root [3] t-&gt;SetMarkerStyle(2);
</pre></div><p>Now you can draw any information in the Tree with just one line, incl. cuts. </p>
<ul>
<li>[4] Histogram the mean values for all channels </li>
<li>[5] Draw a graph rmv vs. channel for all channels in module 9 <div class="fragment"><pre class="fragment">root [4] t-&gt;Draw(<span class="stringliteral">&quot;_mean&quot;</span>,<span class="stringliteral">&quot;_slot==19&quot;</span>)
root [5] t-&gt;Draw(<span class="stringliteral">&quot;_rms:_channel+_chip*spri.getNChannelsPerChip()&quot;</span>,<span class="stringliteral">&quot;_module==9&quot;</span>) 
</pre></div> Note the usage of <a class="el" href="class_spectrum_properties_run_info.html#a3d9d8e0ae2cef40794561409120e257c" title="Get the number of channels per chip.">SpectrumPropertiesRunInfo::getNChannelsPerChip()</a>. There is also the SpectrumPropertiesRunInfo::getNChipsPerModue() function. You can use this to calculate the global channel number <img class="formulaInl" alt="$( moduleID \cdot nChipsPerModule + chipID ) \cdot nChannelsPerChip + channelNumber $" src="form_0.png"/>.</li>
</ul>
<h3><a class="anchor" id="plotDead">
Plotting the rms of only the dead channels</a></h3>
<h3><a class="anchor" id="printDead">
Printing a list of dead channels in one run</a></h3>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 1 Dec 2017 for DeadAndNoisyTools by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
