<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>FITMIP: fitMIP.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_5116c8f7e4b5645f509e1533a2a6cce8.html">calice_calib</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_8b66d6ab1bfe1b4e4607d2386115a489.html">fitmip</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_d44fa2f799089ff9624f0a48581df711.html">src</a>
  </div>
</div>
<div class="contents">
<h1>fitMIP.cc File Reference</h1>
<p>Example of main function for finding the MIP calibration values using classes <a class="el" href="classLangaus.html" title="Class for handling with a fitting function defined as , where  is a Landau function...">Langaus</a>, <a class="el" href="classBezier.html" title="Class for creation of Bezier curve with maximum order 32.">Bezier</a> and Fitlikelihood.  
<a href="#_details">More...</a></p>
<code>#include &quot;Fitlikelihood.hh&quot;</code><br/>
<code>#include &quot;Langaus.hh&quot;</code><br/>
<code>#include &lt;fstream&gt;</code><br/>
<code>#include &lt;iostream&gt;</code><br/>
<code>#include &lt;cstdlib&gt;</code><br/>
<code>#include &lt;stdexcept&gt;</code><br/>
<code>#include &lt;vector&gt;</code><br/>
<code>#include &quot;RooFit.h&quot;</code><br/>
<code>#include &quot;RooPlot.h&quot;</code><br/>
<code>#include &quot;TGraph.h&quot;</code><br/>

<p><a href="fitMIP_8cc_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab4c8bbfdf14fcf9df807354625066d9e"></a><!-- doxytag: member="fitMIP.cc::setParameters" ref="ab4c8bbfdf14fcf9df807354625066d9e" args="(int argc, char *argv[])" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>setParameters</b> (int argc, char *argv[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a452435a1d80fe91993338af59a9302ef"></a><!-- doxytag: member="fitMIP.cc::printParameters" ref="a452435a1d80fe91993338af59a9302ef" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>printParameters</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0d20b69b0ad703df78459e1033d5c1d4"></a><!-- doxytag: member="fitMIP.cc::printHelp" ref="a0d20b69b0ad703df78459e1033d5c1d4" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>printHelp</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0ddf1224851353fc92bfbff6f499fa97"></a><!-- doxytag: member="fitMIP.cc::main" ref="a0ddf1224851353fc92bfbff6f499fa97" args="(int argc, char *argv[])" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>main</b> (int argc, char *argv[])</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7443a64a7573acee22295d1b67ab3a29"></a><!-- doxytag: member="fitMIP.cc::_minEntries" ref="a7443a64a7573acee22295d1b67ab3a29" args="" -->
const unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fitMIP_8cc.html#a7443a64a7573acee22295d1b67ab3a29">_minEntries</a> = 10</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">minimal number of entries for one cell. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a16706f112e996cac7fd9366a878ab815"></a><!-- doxytag: member="fitMIP.cc::_minMean" ref="a16706f112e996cac7fd9366a878ab815" args="" -->
const double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fitMIP_8cc.html#a16706f112e996cac7fd9366a878ab815">_minMean</a> = 0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">minimal value of mean of deposited energy for one cell. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa13b1b1c4f2eb2502a5cb82b8f3fb944"></a><!-- doxytag: member="fitMIP.cc::_parMax" ref="aa13b1b1c4f2eb2502a5cb82b8f3fb944" args="[3]" -->
const double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fitMIP_8cc.html#aa13b1b1c4f2eb2502a5cb82b8f3fb944">_parMax</a> [3] = {400,2000,400}</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">upper limits for parameters of fit (Landau sigma, Landau mean, Gaus sigma). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a93f448a5d4f24a239c7aaaa01c9170ec"></a><!-- doxytag: member="fitMIP.cc::_parMin" ref="a93f448a5d4f24a239c7aaaa01c9170ec" args="[3]" -->
const double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fitMIP_8cc.html#a93f448a5d4f24a239c7aaaa01c9170ec">_parMin</a> [3] = {0, 0, 0}</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">lower limits for parameters of fit (Landau sigma, Landau mean, Gaus sigma). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4790d221be08201b9e633f72c16c1b7a"></a><!-- doxytag: member="fitMIP.cc::_infilename" ref="a4790d221be08201b9e633f72c16c1b7a" args="" -->
const char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>_infilename</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa599be76b790451e9e5a791f16a48753"></a><!-- doxytag: member="fitMIP.cc::_histoname" ref="aa599be76b790451e9e5a791f16a48753" args="" -->
const char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>_histoname</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0332fda46e65171dcf6e3254dffe4a83"></a><!-- doxytag: member="fitMIP.cc::_outroot" ref="a0332fda46e65171dcf6e3254dffe4a83" args="" -->
const char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>_outroot</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a02d38e3be01d5b7c838fa084b7fdad2c"></a><!-- doxytag: member="fitMIP.cc::_outfileName" ref="a02d38e3be01d5b7c838fa084b7fdad2c" args="" -->
const char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>_outfileName</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa77135d492b7d33298949a166bb59fef"></a><!-- doxytag: member="fitMIP.cc::_outfile" ref="aa77135d492b7d33298949a166bb59fef" args="" -->
ofstream&nbsp;</td><td class="memItemRight" valign="bottom"><b>_outfile</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a56e7ea6c5ceeed3983f71ccf0e79f336"></a><!-- doxytag: member="fitMIP.cc::_range" ref="a56e7ea6c5ceeed3983f71ccf0e79f336" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><b>_range</b> = 3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9a0d26f3fe660e2bcb87aba202a659f1"></a><!-- doxytag: member="fitMIP.cc::_leftRange" ref="a9a0d26f3fe660e2bcb87aba202a659f1" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><b>_leftRange</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a46620d74858262c2e00dc592e4f551e4"></a><!-- doxytag: member="fitMIP.cc::_rightRange" ref="a46620d74858262c2e00dc592e4f551e4" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><b>_rightRange</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac09d1489922db6ab2c8f3b362efe21ef"></a><!-- doxytag: member="fitMIP.cc::_rangeExplicit" ref="ac09d1489922db6ab2c8f3b362efe21ef" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>_rangeExplicit</b> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5beae06a41d6d1defed35ef8c4627387"></a><!-- doxytag: member="fitMIP.cc::_mod" ref="a5beae06a41d6d1defed35ef8c4627387" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>_mod</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8804812bd68d3a383ac0083a1c6b3646"></a><!-- doxytag: member="fitMIP.cc::_chip" ref="a8804812bd68d3a383ac0083a1c6b3646" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>_chip</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2a96bc51a6453df1fb38c1a97a1d3b50"></a><!-- doxytag: member="fitMIP.cc::_chan" ref="a2a96bc51a6453df1fb38c1a97a1d3b50" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>_chan</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa77c755bcebcae64b7b19461a74435c2"></a><!-- doxytag: member="fitMIP.cc::SHIFT" ref="aa77c755bcebcae64b7b19461a74435c2" args="" -->
const int&nbsp;</td><td class="memItemRight" valign="bottom"><b>SHIFT</b> = 8</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9607576d2834b61c56893a694de6055f"></a><!-- doxytag: member="fitMIP.cc::_rebin" ref="a9607576d2834b61c56893a694de6055f" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fitMIP_8cc.html#a9607576d2834b61c56893a694de6055f">_rebin</a> = 8</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">rebining of input histogram for fit. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab4887120b9f196288b44ee0973a5c6f4"></a><!-- doxytag: member="fitMIP.cc::_Bezierorder" ref="ab4887120b9f196288b44ee0973a5c6f4" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fitMIP_8cc.html#ab4887120b9f196288b44ee0973a5c6f4">_Bezierorder</a> = 20</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">order of <a class="el" href="classBezier.html" title="Class for creation of Bezier curve with maximum order 32.">Bezier</a> curve. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9cd2969bf40e425c94ea073bdad6dbe2"></a><!-- doxytag: member="fitMIP.cc::_Bezierrebin" ref="a9cd2969bf40e425c94ea073bdad6dbe2" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fitMIP_8cc.html#a9cd2969bf40e425c94ea073bdad6dbe2">_Bezierrebin</a> = 18</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">rebining of input histogram for <a class="el" href="classBezier.html" title="Class for creation of Bezier curve with maximum order 32.">Bezier</a> curve. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a64acc40a2ab30c2483b486413baa8d99"></a><!-- doxytag: member="fitMIP.cc::_isRootfile" ref="a64acc40a2ab30c2483b486413baa8d99" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>_isRootfile</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a759aca23cf5fbe2c447e253db60d5e57"></a><!-- doxytag: member="fitMIP.cc::_isOutfile" ref="a759aca23cf5fbe2c447e253db60d5e57" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>_isOutfile</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af06e46e62b5c3fa57b7dfee47d8ffbd0"></a><!-- doxytag: member="fitMIP.cc::_useFFT" ref="af06e46e62b5c3fa57b7dfee47d8ffbd0" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>_useFFT</b> = 0</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Example of main function for finding the MIP calibration values using classes <a class="el" href="classLangaus.html" title="Class for handling with a fitting function defined as , where  is a Landau function...">Langaus</a>, <a class="el" href="classBezier.html" title="Class for creation of Bezier curve with maximum order 32.">Bezier</a> and Fitlikelihood. </p>
<p>The mip calibration value is found by fitting the histogram by function defined like convolution of Landau and Gaus function. The mip calibration value is then the most probable value of function (MPV). For rough estimation of MPV is used <a class="el" href="classBezier.html" title="Class for creation of Bezier curve with maximum order 32.">Bezier</a> curve implemented in class <a class="el" href="classBezier.html" title="Class for creation of Bezier curve with maximum order 32.">Bezier</a>. Be aware with tuning your own main program, especially with tuning of direct numerical calculation of convolution integral. Particulary with fine tuning of lower limit of Gaus sigma. More in <a class="el" href="classLangaus.html" title="Class for handling with a fitting function defined as , where  is a Landau function...">Langaus</a>.</p>
<p>Detailed description follows here. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Boris Bulanek, DESY </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>June 2010</dd></dl>
<div class="fragment"><pre class="fragment"> fitMipRun -infile &lt;root file input&gt; -histoname &lt;name of histogram&gt; [ -outtxt &lt;txt output&gt; -outroot &lt;root file output&gt;   -range &lt;range(float)&gt; -rebin &lt;rebin&gt; ]
</pre></div><dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>inFile</em>&nbsp;</td><td>Relative entry to the input root file with histograms. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>outpath</em>&nbsp;</td><td>Relative path for the output files. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>range</em>&nbsp;</td><td>Range of fit given as <img class="formulaInl" alt="$\left<\mbox{left},\mbox{right}\cdot\mbox{peakInit}\right>$" src="form_15.png"/>, where peakInit is roughly found peak. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition in file <a class="el" href="fitMIP_8cc_source.html">fitMIP.cc</a>.</p>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 1 Dec 2017 for FITMIP by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
