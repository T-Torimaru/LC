<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CALIBMULTI: CALICE::multiCalibrator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>CALICE</b>::<a class="el" href="classCALICE_1_1multiCalibrator.html">multiCalibrator</a>
  </div>
</div>
<div class="contents">
<h1>CALICE::multiCalibrator Class Reference</h1><!-- doxytag: class="CALICE::multiCalibrator" -->
<p>Processor to add PAR_MULTI to the event and calibrate the threshold.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="multiCalibrator_8hh_source.html">multiCalibrator.hh</a>&gt;</code></p>

<p><a href="classCALICE_1_1multiCalibrator-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad18beb97b5deccfa062ed368644fce16"></a><!-- doxytag: member="CALICE::multiCalibrator::newProcessor" ref="ad18beb97b5deccfa062ed368644fce16" args="()" -->
Processor *&nbsp;</td><td class="memItemRight" valign="bottom"><b>newProcessor</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8a3e419d429f42b6ea7aae4b52428ce4"></a><!-- doxytag: member="CALICE::multiCalibrator::init" ref="a8a3e419d429f42b6ea7aae4b52428ce4" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>init</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a67d14b42a9ce88fc17515613efe997bc"></a><!-- doxytag: member="CALICE::multiCalibrator::processRunHeader" ref="a67d14b42a9ce88fc17515613efe997bc" args="(LCRunHeader *run)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>processRunHeader</b> (LCRunHeader *run)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7664b108349a27d1497d52d55001dc41"></a><!-- doxytag: member="CALICE::multiCalibrator::processEvent" ref="a7664b108349a27d1497d52d55001dc41" args="(LCEvent *evt)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>processEvent</b> (LCEvent *evt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a156e6823b5819c32c0c1530f9cf17787"></a><!-- doxytag: member="CALICE::multiCalibrator::end" ref="a156e6823b5819c32c0c1530f9cf17787" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>end</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aae74a036fde33453359d9938bacd8475"></a><!-- doxytag: member="CALICE::multiCalibrator::conditionsChanged" ref="aae74a036fde33453359d9938bacd8475" args="(lcio::LCCollection *col)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>conditionsChanged</b> (lcio::LCCollection *col)</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2c6dadc7bd856f48ebabb2ff1f3eb24d"></a><!-- doxytag: member="CALICE::multiCalibrator::_adcColName" ref="a2c6dadc7bd856f48ebabb2ff1f3eb24d" args="" -->
std::string&nbsp;</td><td class="memItemRight" valign="bottom"><b>_adcColName</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9dcf1a278390cf22a27f873b03ecaf42"></a><!-- doxytag: member="CALICE::multiCalibrator::_parNameTriggerEvent" ref="a9dcf1a278390cf22a27f873b03ecaf42" args="" -->
std::string&nbsp;</td><td class="memItemRight" valign="bottom"><b>_parNameTriggerEvent</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a243d6d66340eba9a2cadfa2387b20c0f"></a><!-- doxytag: member="CALICE::multiCalibrator::_outputFilePath" ref="a243d6d66340eba9a2cadfa2387b20c0f" args="" -->
std::string&nbsp;</td><td class="memItemRight" valign="bottom"><b>_outputFilePath</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acd73797da60310a0a4bcfd495204a855"></a><!-- doxytag: member="CALICE::multiCalibrator::_connectionColName" ref="acd73797da60310a0a4bcfd495204a855" args="" -->
std::string&nbsp;</td><td class="memItemRight" valign="bottom"><b>_connectionColName</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac3f8d6ece5b4b56d26a9864ee0618ce5"></a><!-- doxytag: member="CALICE::multiCalibrator::_referenceThresholdColName" ref="ac3f8d6ece5b4b56d26a9864ee0618ce5" args="" -->
std::string&nbsp;</td><td class="memItemRight" valign="bottom"><b>_referenceThresholdColName</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af3bb02c62940673fb59d5250cc294d6d"></a><!-- doxytag: member="CALICE::multiCalibrator::_skipCalibration" ref="af3bb02c62940673fb59d5250cc294d6d" args="" -->
std::string&nbsp;</td><td class="memItemRight" valign="bottom"><b>_skipCalibration</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa88fe075d6603ee3c78158bd742b91e4"></a><!-- doxytag: member="CALICE::multiCalibrator::_signalBinning" ref="aa88fe075d6603ee3c78158bd742b91e4" args="" -->
FloatVec&nbsp;</td><td class="memItemRight" valign="bottom"><b>_signalBinning</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8d8b4bb7da03c22ddf35a8f94c7bb1a0"></a><!-- doxytag: member="CALICE::multiCalibrator::_purityList" ref="a8d8b4bb7da03c22ddf35a8f94c7bb1a0" args="" -->
FloatVec&nbsp;</td><td class="memItemRight" valign="bottom"><b>_purityList</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7fc0a223ac7ef8119b3b0a987eb44adc"></a><!-- doxytag: member="CALICE::multiCalibrator::_gausRange" ref="a7fc0a223ac7ef8119b3b0a987eb44adc" args="" -->
float&nbsp;</td><td class="memItemRight" valign="bottom"><b>_gausRange</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a007fb7a565ad1ec0eb2719981203f8fe"></a><!-- doxytag: member="CALICE::multiCalibrator::_rebin" ref="a007fb7a565ad1ec0eb2719981203f8fe" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>_rebin</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5dcaedfa4e29bad191bc22016eca0355"></a><!-- doxytag: member="CALICE::multiCalibrator::_granFac" ref="a5dcaedfa4e29bad191bc22016eca0355" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>_granFac</b></td></tr>
<tr><td colspan="2"><h2>Private Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a35b415a32f3bf4f78a4bb5adc3f96470"></a><!-- doxytag: member="CALICE::multiCalibrator::ThresholdMap_t" ref="a35b415a32f3bf4f78a4bb5adc3f96470" args="" -->
typedef std::map&lt; float, float &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>ThresholdMap_t</b></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0f54d7d5a1e9b4469bc59ae7b2d3a204"></a><!-- doxytag: member="CALICE::multiCalibrator::fillHist" ref="a0f54d7d5a1e9b4469bc59ae7b2d3a204" args="(TH1F *hist, LCEvent *evt)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>fillHist</b> (TH1F *hist, LCEvent *evt)</td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a33b407cfd46e3ac56bdc30947e0eb2e1"></a><!-- doxytag: member="CALICE::multiCalibrator::_startTime" ref="a33b407cfd46e3ac56bdc30947e0eb2e1" args="" -->
lccd::LCCDTimeStamp&nbsp;</td><td class="memItemRight" valign="bottom"><b>_startTime</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a06d7b62ae49be9bad5c7eb8a7f270f58"></a><!-- doxytag: member="CALICE::multiCalibrator::_endTime" ref="a06d7b62ae49be9bad5c7eb8a7f270f58" args="" -->
lccd::LCCDTimeStamp&nbsp;</td><td class="memItemRight" valign="bottom"><b>_endTime</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acfcabcaf4253473ac3d99df1f162da5f"></a><!-- doxytag: member="CALICE::multiCalibrator::_runNumber" ref="acfcabcaf4253473ac3d99df1f162da5f" args="" -->
unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><b>_runNumber</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afc05f707dab2f811d755300d480d57f6"></a><!-- doxytag: member="CALICE::multiCalibrator::_crate" ref="afc05f707dab2f811d755300d480d57f6" args="" -->
unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><b>_crate</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a88106b2a17b0308851dfdace4d9fd8a4"></a><!-- doxytag: member="CALICE::multiCalibrator::_slot" ref="a88106b2a17b0308851dfdace4d9fd8a4" args="" -->
unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><b>_slot</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7e31fc8c645ee72b61deafacb51ee6b5"></a><!-- doxytag: member="CALICE::multiCalibrator::_fe" ref="a7e31fc8c645ee72b61deafacb51ee6b5" args="" -->
unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><b>_fe</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae8423d1b22561196f45134990b6e3be5"></a><!-- doxytag: member="CALICE::multiCalibrator::_chip" ref="ae8423d1b22561196f45134990b6e3be5" args="" -->
unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><b>_chip</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1a14cc1103c22d000ea6565619bc98ee"></a><!-- doxytag: member="CALICE::multiCalibrator::_channel" ref="a1a14cc1103c22d000ea6565619bc98ee" args="" -->
unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><b>_channel</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5087ce6fdd939090347791bc86a02025"></a><!-- doxytag: member="CALICE::multiCalibrator::_sigHist" ref="a5087ce6fdd939090347791bc86a02025" args="" -->
TH1F *&nbsp;</td><td class="memItemRight" valign="bottom"><b>_sigHist</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abf5102e26fbe03d997813b06eea13818"></a><!-- doxytag: member="CALICE::multiCalibrator::_pedHist" ref="abf5102e26fbe03d997813b06eea13818" args="" -->
TH1F *&nbsp;</td><td class="memItemRight" valign="bottom"><b>_pedHist</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adcb7ef44a6a00a92da355ee43dbcc147"></a><!-- doxytag: member="CALICE::multiCalibrator::_connectionAvailable" ref="adcb7ef44a6a00a92da355ee43dbcc147" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>_connectionAvailable</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac2eccfcf6a4b10389fabf83c743a9b0d"></a><!-- doxytag: member="CALICE::multiCalibrator::_referenceThresholds" ref="ac2eccfcf6a4b10389fabf83c743a9b0d" args="" -->
ThresholdMap_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>_referenceThresholds</b></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Processor to add PAR_MULTI to the event and calibrate the threshold. </p>
<p>This processor adds an event parameter containing the amplitude of the analog multiplicity counter readout. In addition a histogram of the amplitudes is collected and fitted to calibrate the multi threshold. The calibration procedure can be skipped by processor parameter. In this case, only the event parameter is added.</p>
<p>The mapping of the multiplicity counter connection is read from the LCIO stream.</p>
<p>The results of the calibration can be written directly to a LCCD database. To enable this feature, MULTI_DBINIT has to contain a valid database connection string for write access at compile time. In this case, two processor parameters to set the output folders for thresholds and fraction of rejected events are available. If the string for a folder is empty, the writing of this folder will be skipped.</p>
<dl class="version"><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd><a href="mailto:Benjamin.Lutz@desy.de">Benjamin.Lutz@desy.de</a> </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>Sep 2008 </dd></dl>

<p>Definition at line <a class="el" href="multiCalibrator_8hh_source.html#l00036">36</a> of file <a class="el" href="multiCalibrator_8hh_source.html">multiCalibrator.hh</a>.</p>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/afs/desy.de/user/t/torimart/work/CosmiTestLCIO/calice_calib/calibmulti/include/<a class="el" href="multiCalibrator_8hh_source.html">multiCalibrator.hh</a></li>
<li>/afs/desy.de/user/t/torimart/work/CosmiTestLCIO/calice_calib/calibmulti/src/<a class="el" href="multiCalibrator_8cc_source.html">multiCalibrator.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 1 Dec 2017 for CALIBMULTI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
