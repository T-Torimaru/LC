<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CALICE_USERLIB: AhcMapper.hh Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_36843d1d4246be2b2ac1dd04c3c30114.html">calice_userlib</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_57be4fcabe5c93cdea47fb40369601ff.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_5c6df5fb33f97ab441a1c2f4eff4b5dd.html">Mapping</a>
  </div>
</div>
<div class="contents">
<h1>AhcMapper.hh</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef AhcMapper_hh</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define AhcMapper_hh</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;map&gt;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;sstream&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;limits&gt;</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="preprocessor">#include &quot;lcio.h&quot;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &quot;EVENT/LCCollection.h&quot;</span>
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 <span class="preprocessor">#include &quot;Mapper.hh&quot;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &quot;CaliceException.hh&quot;</span>
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 <span class="keyword">namespace </span>CALICE {
<a name="l00016"></a>00016 
<a name="l00044"></a><a class="code" href="classCALICE_1_1AhcMapper.html">00044</a>   <span class="keyword">class </span><a class="code" href="classCALICE_1_1AhcMapper.html" title="AHCAL implementation of Mapper class.">AhcMapper</a> : <span class="keyword">public</span> <a class="code" href="classCALICE_1_1Mapper.html" title="Mapping for CALICE detectors (currently: HCAL support only).">Mapper</a> {
<a name="l00045"></a>00045 
<a name="l00046"></a>00046   <span class="keyword">public</span>:
<a name="l00047"></a>00047 
<a name="l00048"></a>00048     <a class="code" href="classCALICE_1_1AhcMapper.html" title="AHCAL implementation of Mapper class.">AhcMapper</a>() {
<a name="l00049"></a>00049 
<a name="l00050"></a>00050       clear();
<a name="l00051"></a>00051 
<a name="l00052"></a>00052     }
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 
<a name="l00073"></a><a class="code" href="group__CellIDgroup.html#ga52286c59e9823e5d31d7ea8a71b4d6bd">00073</a>     <span class="keywordtype">int</span> <a class="code" href="group__CellIDgroup.html#ga52286c59e9823e5d31d7ea8a71b4d6bd" title="generate (Mokka) cellID from module, chip, channel">getCellIDFromModChipChan</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> chip, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> channel)<span class="keyword"> const </span>{
<a name="l00074"></a>00074       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;<a class="code" href="group__CellIDgroup.html#ga98194da015b87fdf07f0a62da5b8c9e5" title="get CellID from triple I,J,K">getCellID</a>(<a class="code" href="classCALICE_1_1AhcMapper.html#ac64aa07b08160c003c6f02c4fa76746a" title="I of (Mokka) cellID.">getI</a>(module,chip,channel), <a class="code" href="classCALICE_1_1AhcMapper.html#ab02fce56e98d645a365eb23ba30afd4a" title="J of (Mokka) cellID.">getJ</a>(module,chip,channel), <a class="code" href="classCALICE_1_1AhcMapper.html#a086377eb0064aab3337e8f12fcf40fc3" title="K of (Mokka) cellID.">getK</a>(module));
<a name="l00075"></a>00075     }
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 
<a name="l00090"></a><a class="code" href="group__CellIDgroup.html#gaab2e4194c12c80616e8fe0e535c37443">00090</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__CellIDgroup.html#gaab2e4194c12c80616e8fe0e535c37443" title="module number from (Mokka) CellID">getModuleFromCellID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> cellID)<span class="keyword"> const </span>{
<a name="l00091"></a>00091       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#aab2c351390279b6ddb691922c1697b94" title="module number from triple crate, slot, fe">getModule</a>(<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getKFromCellID(cellID));
<a name="l00092"></a>00092     }
<a name="l00104"></a><a class="code" href="group__DAQgroup.html#gafe0b15ff8622a671237999286b92c7dc">00104</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__DAQgroup.html#gafe0b15ff8622a671237999286b92c7dc" title="module number from DAQ channel ID">getModuleFromDAQID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> DAQchannel)<span class="keyword"> const </span>{
<a name="l00105"></a>00105       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#aab2c351390279b6ddb691922c1697b94" title="module number from triple crate, slot, fe">getModule</a>(<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getCrateFromDAQID(DAQchannel),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getSlotFromDAQID(DAQchannel),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getFeFromDAQID(DAQchannel));
<a name="l00106"></a>00106     }
<a name="l00118"></a><a class="code" href="classCALICE_1_1AhcMapper.html#aab2c351390279b6ddb691922c1697b94">00118</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#aab2c351390279b6ddb691922c1697b94" title="module number from triple crate, slot, fe">getModule</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crate, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> slot, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> fe)<span class="keyword"> const </span>{
<a name="l00119"></a>00119 
<a name="l00120"></a>00120       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = getIndexModuleConnection(crate,slot,fe);
<a name="l00121"></a>00121 
<a name="l00122"></a>00122       <span class="keywordflow">if</span> (! valid(index, _connectionAvailable) ) <span class="keywordflow">throw</span> <a class="code" href="classCALICE_1_1BadDataException.html" title="exception to be thrown when data leads to a conflict">BadDataException</a>(<span class="stringliteral">&quot;invalid DAQ connection value (crate,slot,fe)&quot;</span>);
<a name="l00123"></a>00123 
<a name="l00124"></a>00124       <span class="keywordflow">return</span> _moduleVconnection.at(index);
<a name="l00125"></a>00125     }
<a name="l00135"></a><a class="code" href="classCALICE_1_1AhcMapper.html#a602233d596480f6f4b4248ddf6370d36">00135</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a602233d596480f6f4b4248ddf6370d36" title="module number from K">getModule</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k)<span class="keyword"> const </span>{
<a name="l00136"></a>00136       <span class="keywordflow">if</span> (! valid(k,_kAvailable) ) {
<a name="l00137"></a>00137         std::ostringstream errorMessage;
<a name="l00138"></a>00138         errorMessage &lt;&lt; <span class="stringliteral">&quot;invalid K value &quot;</span> &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot; using encoding string: &quot;</span> &lt;&lt; <a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;<a class="code" href="group__CellIDgroup.html#ga240d50257f1971269a051856b328285c" title="get the current cell ID encoding string">getCellIDEncoding</a>();
<a name="l00139"></a>00139         <span class="keywordflow">throw</span> <a class="code" href="classCALICE_1_1BadDataException.html" title="exception to be thrown when data leads to a conflict">BadDataException</a>(errorMessage.str());
<a name="l00140"></a>00140       }
<a name="l00141"></a>00141       <span class="keywordflow">return</span> _moduleVk.at(k);
<a name="l00142"></a>00142     }
<a name="l00143"></a>00143 
<a name="l00144"></a>00144 
<a name="l00157"></a><a class="code" href="group__CellIDgroup.html#ga0c5c3c80806eed788cc8d35f8bbbbeac">00157</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__CellIDgroup.html#ga0c5c3c80806eed788cc8d35f8bbbbeac" title="get module (number) in which this cell is included from (Mokka) cellID">getModuleFromCellID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> cellID, <span class="keywordtype">bool</span> &amp;valid)<span class="keyword"> const </span>{
<a name="l00158"></a>00158       <span class="keywordflow">return</span> getModuleFromIndex(<a class="code" href="classCALICE_1_1AhcMapper.html#a1e4072147112a446171c2892ebe8e3e2" title="get a compact index for storing data in vectors">getIndexByCellID</a>(cellID),valid);
<a name="l00159"></a>00159     }
<a name="l00160"></a>00160 
<a name="l00173"></a><a class="code" href="group__DAQgroup.html#gaa605e0ab6e665a41fa7aa30674592a99">00173</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__DAQgroup.html#gaa605e0ab6e665a41fa7aa30674592a99" title="get module (number) in which this (DAQ) channel is included">getModuleFromDAQID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> DAQchannel, <span class="keywordtype">bool</span> &amp;valid)<span class="keyword"> const </span>{
<a name="l00174"></a>00174       <span class="keywordflow">return</span> getModuleFromIndex(<a class="code" href="classCALICE_1_1AhcMapper.html#a54a30bb2306d44a9ab0240593c7425a8" title="get a compact index for storing data in vectors">getIndexByDAQID</a>(DAQchannel),valid);
<a name="l00175"></a>00175     }
<a name="l00176"></a>00176 
<a name="l00189"></a><a class="code" href="group__ModuleIDgroup.html#gad97cd13371906663d664f2e8251992b5">00189</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__ModuleIDgroup.html#gad97cd13371906663d664f2e8251992b5" title="get module (number) from this (module) channel ID">getModuleFromModuleID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> moduleID, <span class="keywordtype">bool</span> &amp;valid)<span class="keyword"> const </span>{
<a name="l00190"></a>00190       <span class="keywordflow">return</span> getModuleFromIndex(<a class="code" href="classCALICE_1_1AhcMapper.html#aaa1748613f85f7573be51b7344c69a4e" title="get a compact index for storing data in vectors">getIndexByModuleID</a>(moduleID),valid);
<a name="l00191"></a>00191     }
<a name="l00192"></a>00192 
<a name="l00193"></a>00193 
<a name="l00205"></a><a class="code" href="group__CellIDgroup.html#ga7f9ad087fbc3282c928f948d5d290de0">00205</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__CellIDgroup.html#ga7f9ad087fbc3282c928f948d5d290de0" title="chip number from (Mokka) CellID">getChipFromCellID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> cellID)<span class="keyword"> const </span>{
<a name="l00206"></a>00206       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a4ff7ad6e9ea5756c7599b204b6c17c76" title="chip number from triple I, J, K">getChip</a>(<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getIFromCellID(cellID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getJFromCellID(cellID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getKFromCellID(cellID));
<a name="l00207"></a>00207     }
<a name="l00219"></a><a class="code" href="classCALICE_1_1AhcMapper.html#a4ff7ad6e9ea5756c7599b204b6c17c76">00219</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a4ff7ad6e9ea5756c7599b204b6c17c76" title="chip number from triple I, J, K">getChip</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k)<span class="keyword"> const </span>{
<a name="l00220"></a>00220 
<a name="l00221"></a>00221       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> moduleTypeIndex = getModuleTypeIndex(<a class="code" href="classCALICE_1_1AhcMapper.html#aab2c351390279b6ddb691922c1697b94" title="module number from triple crate, slot, fe">getModule</a>(k));
<a name="l00222"></a>00222       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = getIndexIJ(i,j);
<a name="l00223"></a>00223 
<a name="l00224"></a>00224       <span class="keywordflow">if</span> ( ! valid(index,_ijAvailable.at(moduleTypeIndex)) ) <span class="keywordflow">throw</span> <a class="code" href="classCALICE_1_1BadDataException.html" title="exception to be thrown when data leads to a conflict">BadDataException</a>(<span class="stringliteral">&quot;invalid i,j&quot;</span>);
<a name="l00225"></a>00225 
<a name="l00226"></a>00226       <span class="keywordflow">return</span> getChipFromChanIndex( _chanVij.at(moduleTypeIndex).at(index) );
<a name="l00227"></a>00227     }
<a name="l00228"></a>00228 
<a name="l00229"></a>00229 
<a name="l00241"></a><a class="code" href="group__CellIDgroup.html#ga62806fe6167022c65d412029c91fe84f">00241</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__CellIDgroup.html#ga62806fe6167022c65d412029c91fe84f" title="channel number from (Mokka) CellID">getChanFromCellID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> cellID)<span class="keyword"> const </span>{
<a name="l00242"></a>00242       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#adbb5dfc3ce2df861b5ef96f6910bc287" title="chip number from triple I, J, K">getChan</a>(<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getIFromCellID(cellID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getJFromCellID(cellID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getKFromCellID(cellID));
<a name="l00243"></a>00243     }
<a name="l00255"></a><a class="code" href="classCALICE_1_1AhcMapper.html#adbb5dfc3ce2df861b5ef96f6910bc287">00255</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#adbb5dfc3ce2df861b5ef96f6910bc287" title="chip number from triple I, J, K">getChan</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k)<span class="keyword"> const </span>{
<a name="l00256"></a>00256 
<a name="l00257"></a>00257       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> moduleTypeIndex = getModuleTypeIndex(<a class="code" href="classCALICE_1_1AhcMapper.html#aab2c351390279b6ddb691922c1697b94" title="module number from triple crate, slot, fe">getModule</a>(k));
<a name="l00258"></a>00258       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = getIndexIJ(i,j);
<a name="l00259"></a>00259 
<a name="l00260"></a>00260       <span class="keywordflow">if</span> ( ! valid(index,_ijAvailable.at(moduleTypeIndex)) ) <span class="keywordflow">throw</span> <a class="code" href="classCALICE_1_1BadDataException.html" title="exception to be thrown when data leads to a conflict">BadDataException</a>(<span class="stringliteral">&quot;invalid i,j&quot;</span>);
<a name="l00261"></a>00261 
<a name="l00262"></a>00262       <span class="keywordflow">return</span> getChanFromChanIndex( _chanVij.at(moduleTypeIndex).at(index) );
<a name="l00263"></a>00263     }
<a name="l00264"></a>00264 
<a name="l00265"></a>00265 
<a name="l00277"></a><a class="code" href="group__CellIDgroup.html#ga45ea616a34d7bebc60cdf26d5a915152">00277</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__CellIDgroup.html#ga45ea616a34d7bebc60cdf26d5a915152" title="crate number from (Mokka) CellID">getCrateFromCellID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> cellID)<span class="keyword"> const </span>{
<a name="l00278"></a>00278       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a5b28fe8764726c1b30d64e44195bdb5c" title="crate number from module number">getCrate</a>(<a class="code" href="group__CellIDgroup.html#gaab2e4194c12c80616e8fe0e535c37443" title="module number from (Mokka) CellID">getModuleFromCellID</a>(cellID));
<a name="l00279"></a>00279     }
<a name="l00291"></a><a class="code" href="group__ModuleIDgroup.html#gacb4f98c80477e3fd5138335881ec5899">00291</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__ModuleIDgroup.html#gacb4f98c80477e3fd5138335881ec5899" title="crate number from Module cell ID">getCrateFromModuleID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> moduleID)<span class="keyword"> const </span>{
<a name="l00292"></a>00292       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a5b28fe8764726c1b30d64e44195bdb5c" title="crate number from module number">getCrate</a>(<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;<a class="code" href="group__ModuleIDgroup.html#gad97cd13371906663d664f2e8251992b5" title="get module (number) from this (module) channel ID">getModuleFromModuleID</a>(moduleID));
<a name="l00293"></a>00293     }
<a name="l00303"></a><a class="code" href="classCALICE_1_1AhcMapper.html#a5b28fe8764726c1b30d64e44195bdb5c">00303</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a5b28fe8764726c1b30d64e44195bdb5c" title="crate number from module number">getCrate</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module)<span class="keyword"> const </span>{
<a name="l00304"></a>00304       <span class="keywordflow">if</span> (! valid(module,_moduleAvailable) ) <span class="keywordflow">throw</span> <a class="code" href="classCALICE_1_1BadDataException.html" title="exception to be thrown when data leads to a conflict">BadDataException</a>(<span class="stringliteral">&quot;invalid module&quot;</span>);
<a name="l00305"></a>00305       <span class="keywordflow">return</span> getCrateFromModuleConnectionIndex(_connectionVmodule.at(module));
<a name="l00306"></a>00306     }
<a name="l00307"></a>00307 
<a name="l00308"></a>00308 
<a name="l00320"></a><a class="code" href="group__CellIDgroup.html#ga3b25eb31b102beff3e3a0ae887cf1ff9">00320</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__CellIDgroup.html#ga3b25eb31b102beff3e3a0ae887cf1ff9" title="slot number from (Mokka) CellID">getSlotFromCellID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> cellID)<span class="keyword"> const </span>{
<a name="l00321"></a>00321       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a503f8cfd0f24380502c278adeb087015" title="slot number from module number">getSlot</a>(<a class="code" href="group__CellIDgroup.html#gaab2e4194c12c80616e8fe0e535c37443" title="module number from (Mokka) CellID">getModuleFromCellID</a>(cellID));
<a name="l00322"></a>00322     }
<a name="l00334"></a><a class="code" href="group__ModuleIDgroup.html#ga269304715828925b12c60ae7c1ffd8ed">00334</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__ModuleIDgroup.html#ga269304715828925b12c60ae7c1ffd8ed" title="slot number from Module cell ID">getSlotFromModuleID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> moduleID)<span class="keyword"> const </span>{
<a name="l00335"></a>00335       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a503f8cfd0f24380502c278adeb087015" title="slot number from module number">getSlot</a>(<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;<a class="code" href="group__ModuleIDgroup.html#gad97cd13371906663d664f2e8251992b5" title="get module (number) from this (module) channel ID">getModuleFromModuleID</a>(moduleID));
<a name="l00336"></a>00336     }
<a name="l00346"></a><a class="code" href="classCALICE_1_1AhcMapper.html#a503f8cfd0f24380502c278adeb087015">00346</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a503f8cfd0f24380502c278adeb087015" title="slot number from module number">getSlot</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module)<span class="keyword"> const </span>{
<a name="l00347"></a>00347       <span class="keywordflow">if</span> ( ! valid(module,_moduleAvailable) ) <span class="keywordflow">throw</span> <a class="code" href="classCALICE_1_1BadDataException.html" title="exception to be thrown when data leads to a conflict">BadDataException</a>(<span class="stringliteral">&quot;invalid module&quot;</span>);
<a name="l00348"></a>00348       <span class="keywordflow">return</span> getSlotFromModuleConnectionIndex(_connectionVmodule.at(module));
<a name="l00349"></a>00349     }
<a name="l00350"></a>00350 
<a name="l00351"></a>00351 
<a name="l00352"></a>00352 
<a name="l00364"></a><a class="code" href="group__CellIDgroup.html#gace615dddab9b971bf6282baec49ad074">00364</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__CellIDgroup.html#gace615dddab9b971bf6282baec49ad074" title="front end number from (Mokka) CellID">getFeFromCellID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> cellID)<span class="keyword"> const </span>{
<a name="l00365"></a>00365       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#ae612d629678ea13991d810f3a72b4c96" title="front end number from module number">getFe</a>(<a class="code" href="group__CellIDgroup.html#gaab2e4194c12c80616e8fe0e535c37443" title="module number from (Mokka) CellID">getModuleFromCellID</a>(cellID));
<a name="l00366"></a>00366     }
<a name="l00378"></a><a class="code" href="group__ModuleIDgroup.html#gadb98537bc50ae77aa98eed36a2dfe501">00378</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__ModuleIDgroup.html#gadb98537bc50ae77aa98eed36a2dfe501" title="front end number from Module cell ID">getFeFromModuleID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> moduleID)<span class="keyword"> const </span>{
<a name="l00379"></a>00379       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#ae612d629678ea13991d810f3a72b4c96" title="front end number from module number">getFe</a>(<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;<a class="code" href="group__ModuleIDgroup.html#gad97cd13371906663d664f2e8251992b5" title="get module (number) from this (module) channel ID">getModuleFromModuleID</a>(moduleID));
<a name="l00380"></a>00380     }
<a name="l00390"></a><a class="code" href="classCALICE_1_1AhcMapper.html#ae612d629678ea13991d810f3a72b4c96">00390</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#ae612d629678ea13991d810f3a72b4c96" title="front end number from module number">getFe</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module)<span class="keyword"> const </span>{
<a name="l00391"></a>00391       <span class="keywordflow">if</span> ( ! valid(module,_moduleAvailable) ) <span class="keywordflow">throw</span> <a class="code" href="classCALICE_1_1BadDataException.html" title="exception to be thrown when data leads to a conflict">BadDataException</a>(<span class="stringliteral">&quot;invalid module&quot;</span>);
<a name="l00392"></a>00392       <span class="keywordflow">return</span> getFeFromModuleConnectionIndex(_connectionVmodule.at(module));
<a name="l00393"></a>00393     }
<a name="l00394"></a>00394 
<a name="l00395"></a>00395 
<a name="l00407"></a><a class="code" href="group__ModuleIDgroup.html#ga781640ca25ae9164566be050d7b32938">00407</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__ModuleIDgroup.html#ga781640ca25ae9164566be050d7b32938" title="I of (Mokka) cellID.">getIFromModuleID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> moduleID)<span class="keyword"> const </span>{
<a name="l00408"></a>00408       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#ac64aa07b08160c003c6f02c4fa76746a" title="I of (Mokka) cellID.">getI</a>(<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;<a class="code" href="group__ModuleIDgroup.html#gad97cd13371906663d664f2e8251992b5" title="get module (number) from this (module) channel ID">getModuleFromModuleID</a>(moduleID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getChipFromModuleID(moduleID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getChannelFromModuleID(moduleID));
<a name="l00409"></a>00409     }
<a name="l00421"></a><a class="code" href="group__DAQgroup.html#gaf6567eaf2887f9ef4d1e6a12b40b71fb">00421</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__DAQgroup.html#gaf6567eaf2887f9ef4d1e6a12b40b71fb" title="I of (Mokka) cellID.">getIFromDAQID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> DAQchannel)<span class="keyword"> const </span>{
<a name="l00422"></a>00422       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#ac64aa07b08160c003c6f02c4fa76746a" title="I of (Mokka) cellID.">getI</a>(<a class="code" href="group__DAQgroup.html#gafe0b15ff8622a671237999286b92c7dc" title="module number from DAQ channel ID">getModuleFromDAQID</a>(DAQchannel),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getChipFromDAQID(DAQchannel),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getChannelFromDAQID(DAQchannel));
<a name="l00423"></a>00423     }
<a name="l00435"></a><a class="code" href="classCALICE_1_1AhcMapper.html#ac64aa07b08160c003c6f02c4fa76746a">00435</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#ac64aa07b08160c003c6f02c4fa76746a" title="I of (Mokka) cellID.">getI</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> chip, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> chan)<span class="keyword"> const </span>{
<a name="l00436"></a>00436 
<a name="l00437"></a>00437       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> moduleTypeIndex = getModuleTypeIndex(module);
<a name="l00438"></a>00438       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = getIndexChan(chip,chan);
<a name="l00439"></a>00439 
<a name="l00440"></a>00440       <span class="keywordflow">if</span> ( ! valid(index,_chipChanAvailable.at(moduleTypeIndex)) ) <span class="keywordflow">throw</span> <a class="code" href="classCALICE_1_1BadDataException.html" title="exception to be thrown when data leads to a conflict">BadDataException</a>(<span class="stringliteral">&quot;invalid chip, channel&quot;</span>);
<a name="l00441"></a>00441 
<a name="l00442"></a>00442       <span class="keywordflow">return</span> getIFromIJIndex( _ijVchan.at(moduleTypeIndex).at(index) );
<a name="l00443"></a>00443     }
<a name="l00444"></a>00444 
<a name="l00456"></a><a class="code" href="group__ModuleIDgroup.html#ga9b48968defb7c0c32d9169db9db7bd34">00456</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__ModuleIDgroup.html#ga9b48968defb7c0c32d9169db9db7bd34" title="J of (Mokka) cellID.">getJFromModuleID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> moduleID)<span class="keyword"> const </span>{
<a name="l00457"></a>00457       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#ab02fce56e98d645a365eb23ba30afd4a" title="J of (Mokka) cellID.">getJ</a>(<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;<a class="code" href="group__ModuleIDgroup.html#gad97cd13371906663d664f2e8251992b5" title="get module (number) from this (module) channel ID">getModuleFromModuleID</a>(moduleID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getChipFromModuleID(moduleID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getChannelFromModuleID(moduleID));
<a name="l00458"></a>00458     }
<a name="l00470"></a><a class="code" href="group__DAQgroup.html#gaa7ce70dc7852b7141c01fbeb5db57c07">00470</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__DAQgroup.html#gaa7ce70dc7852b7141c01fbeb5db57c07" title="J of (Mokka) cellID.">getJFromDAQID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> DAQchannel)<span class="keyword"> const </span>{
<a name="l00471"></a>00471       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#ab02fce56e98d645a365eb23ba30afd4a" title="J of (Mokka) cellID.">getJ</a>(<a class="code" href="group__DAQgroup.html#gafe0b15ff8622a671237999286b92c7dc" title="module number from DAQ channel ID">getModuleFromDAQID</a>(DAQchannel),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getChipFromDAQID(DAQchannel),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getChannelFromDAQID(DAQchannel));
<a name="l00472"></a>00472     }
<a name="l00484"></a><a class="code" href="classCALICE_1_1AhcMapper.html#ab02fce56e98d645a365eb23ba30afd4a">00484</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#ab02fce56e98d645a365eb23ba30afd4a" title="J of (Mokka) cellID.">getJ</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> chip, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> chan)<span class="keyword"> const </span>{
<a name="l00485"></a>00485 
<a name="l00486"></a>00486       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> moduleTypeIndex = getModuleTypeIndex(module);
<a name="l00487"></a>00487       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = getIndexChan(chip,chan);
<a name="l00488"></a>00488 
<a name="l00489"></a>00489       <span class="keywordflow">if</span> ( ! valid(index,_chipChanAvailable.at(moduleTypeIndex)) ) <span class="keywordflow">throw</span> <a class="code" href="classCALICE_1_1BadDataException.html" title="exception to be thrown when data leads to a conflict">BadDataException</a>(<span class="stringliteral">&quot;invalid chip, channel&quot;</span>);
<a name="l00490"></a>00490 
<a name="l00491"></a>00491       <span class="keywordflow">return</span> getJFromIJIndex( _ijVchan.at(moduleTypeIndex).at(index) );
<a name="l00492"></a>00492     }
<a name="l00493"></a>00493 
<a name="l00505"></a><a class="code" href="group__ModuleIDgroup.html#ga6f0cb475efe64ea376facd84ca3ad9ab">00505</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__ModuleIDgroup.html#ga6f0cb475efe64ea376facd84ca3ad9ab" title="K of (Mokka) cellID.">getKFromModuleID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> moduleID)<span class="keyword"> const </span>{
<a name="l00506"></a>00506       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a086377eb0064aab3337e8f12fcf40fc3" title="K of (Mokka) cellID.">getK</a>(<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;<a class="code" href="group__ModuleIDgroup.html#gad97cd13371906663d664f2e8251992b5" title="get module (number) from this (module) channel ID">getModuleFromModuleID</a>(moduleID));
<a name="l00507"></a>00507     }
<a name="l00519"></a><a class="code" href="group__DAQgroup.html#gaf91e48220e82bf1d71f3c1dac8e22111">00519</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__DAQgroup.html#gaf91e48220e82bf1d71f3c1dac8e22111" title="K of (Mokka) cellID.">getKFromDAQID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> DAQchannel)<span class="keyword"> const </span>{
<a name="l00520"></a>00520       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a086377eb0064aab3337e8f12fcf40fc3" title="K of (Mokka) cellID.">getK</a>(<a class="code" href="group__DAQgroup.html#gafe0b15ff8622a671237999286b92c7dc" title="module number from DAQ channel ID">getModuleFromDAQID</a>(DAQchannel));
<a name="l00521"></a>00521     }
<a name="l00531"></a><a class="code" href="classCALICE_1_1AhcMapper.html#a086377eb0064aab3337e8f12fcf40fc3">00531</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a086377eb0064aab3337e8f12fcf40fc3" title="K of (Mokka) cellID.">getK</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module)<span class="keyword"> const </span>{
<a name="l00532"></a>00532       <span class="keywordflow">if</span> (! valid(module,_moduleAvailable) ) <span class="keywordflow">throw</span> <a class="code" href="classCALICE_1_1BadDataException.html" title="exception to be thrown when data leads to a conflict">BadDataException</a>(<span class="stringliteral">&quot;invalid module&quot;</span>);
<a name="l00533"></a>00533       <span class="keywordflow">return</span> _kVmodule.at(module);
<a name="l00534"></a>00534     }
<a name="l00535"></a>00535 
<a name="l00536"></a>00536 
<a name="l00537"></a>00537 
<a name="l00549"></a><a class="code" href="group__CellIDgroup.html#gaed58b5c4c61fb5796961d96ad8b66fd8">00549</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__CellIDgroup.html#gaed58b5c4c61fb5796961d96ad8b66fd8" title="get cell size in I direction of (Mokka) CellID coordinate">getISizeFromCellID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> cellID)<span class="keyword"> const </span>{
<a name="l00550"></a>00550       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#ad8568ed214d5cfc81b89b0718eeb07dc" title="get cell size in I direction of (Mokka) CellID coordinate">getISizeFromIJK</a>(<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getIFromCellID(cellID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getJFromCellID(cellID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getKFromCellID(cellID));
<a name="l00551"></a>00551     }
<a name="l00563"></a><a class="code" href="group__ModuleIDgroup.html#ga54dc25d87624c58add130f9de24a4eb8">00563</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__ModuleIDgroup.html#ga54dc25d87624c58add130f9de24a4eb8" title="get cell size in I direction of (Mokka) CellID coordinate">getISizeFromModuleID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> moduleID)<span class="keyword"> const </span>{
<a name="l00564"></a>00564       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#aca7b7a137d5df143f6ceac76b5b16989" title="get cell size in I direction of (Mokka) CellID coordinate">getISize</a>(<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;<a class="code" href="group__ModuleIDgroup.html#gad97cd13371906663d664f2e8251992b5" title="get module (number) from this (module) channel ID">getModuleFromModuleID</a>(moduleID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getChipFromModuleID(moduleID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getChannelFromModuleID(moduleID));
<a name="l00565"></a>00565     }
<a name="l00577"></a><a class="code" href="group__DAQgroup.html#ga9ad7b1101e956ae5110a6f2646addcfe">00577</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__DAQgroup.html#ga9ad7b1101e956ae5110a6f2646addcfe" title="get cell size in I direction of (Mokka) CellID coordinate">getISizeFromDAQID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> DAQchannel)<span class="keyword"> const </span>{
<a name="l00578"></a>00578       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#aca7b7a137d5df143f6ceac76b5b16989" title="get cell size in I direction of (Mokka) CellID coordinate">getISize</a>(<a class="code" href="group__DAQgroup.html#gafe0b15ff8622a671237999286b92c7dc" title="module number from DAQ channel ID">getModuleFromDAQID</a>(DAQchannel),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getChipFromDAQID(DAQchannel),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getChannelFromDAQID(DAQchannel));
<a name="l00579"></a>00579     }
<a name="l00591"></a><a class="code" href="classCALICE_1_1AhcMapper.html#ad8568ed214d5cfc81b89b0718eeb07dc">00591</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#ad8568ed214d5cfc81b89b0718eeb07dc" title="get cell size in I direction of (Mokka) CellID coordinate">getISizeFromIJK</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k)<span class="keyword"> const </span>{
<a name="l00592"></a>00592       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#aca7b7a137d5df143f6ceac76b5b16989" title="get cell size in I direction of (Mokka) CellID coordinate">getISize</a>(<a class="code" href="classCALICE_1_1AhcMapper.html#aab2c351390279b6ddb691922c1697b94" title="module number from triple crate, slot, fe">getModule</a>(k),<a class="code" href="classCALICE_1_1AhcMapper.html#a4ff7ad6e9ea5756c7599b204b6c17c76" title="chip number from triple I, J, K">getChip</a>(i,j,k),<a class="code" href="classCALICE_1_1AhcMapper.html#adbb5dfc3ce2df861b5ef96f6910bc287" title="chip number from triple I, J, K">getChan</a>(i,j,k));
<a name="l00593"></a>00593     }
<a name="l00605"></a><a class="code" href="classCALICE_1_1AhcMapper.html#aca7b7a137d5df143f6ceac76b5b16989">00605</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#aca7b7a137d5df143f6ceac76b5b16989" title="get cell size in I direction of (Mokka) CellID coordinate">getISize</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> chip, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> chan)<span class="keyword"> const </span>{
<a name="l00606"></a>00606 
<a name="l00607"></a>00607       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> moduleTypeIndex = getModuleTypeIndex(module);
<a name="l00608"></a>00608       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = getIndexChan(chip,chan);
<a name="l00609"></a>00609 
<a name="l00610"></a>00610       <span class="keywordflow">if</span> ( ! valid(index,_chipChanAvailable.at(moduleTypeIndex)) ) <span class="keywordflow">throw</span> <a class="code" href="classCALICE_1_1BadDataException.html" title="exception to be thrown when data leads to a conflict">BadDataException</a>(<span class="stringliteral">&quot;invalid chip, channel&quot;</span>);
<a name="l00611"></a>00611 
<a name="l00612"></a>00612       <span class="keywordflow">return</span> _sizeIVchan.at(moduleTypeIndex).at(index);
<a name="l00613"></a>00613     }
<a name="l00614"></a>00614 
<a name="l00615"></a>00615 
<a name="l00627"></a><a class="code" href="group__CellIDgroup.html#ga6c4e233f3990b756788d4b366b80891d">00627</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__CellIDgroup.html#ga6c4e233f3990b756788d4b366b80891d" title="get cell size in J direction of (Mokka) CellID coordinate">getJSizeFromCellID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> cellID)<span class="keyword"> const </span>{
<a name="l00628"></a>00628       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a887299333957bbde8da9fed21d68c380" title="get cell size in J direction of (Mokka) CellID coordinate">getJSizeFromIJK</a>(<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getIFromCellID(cellID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getJFromCellID(cellID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getKFromCellID(cellID));
<a name="l00629"></a>00629     }
<a name="l00641"></a><a class="code" href="group__ModuleIDgroup.html#ga0cc832c2634bc87e3a2399439eec8a1a">00641</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__ModuleIDgroup.html#ga0cc832c2634bc87e3a2399439eec8a1a" title="get cell size in J direction of (Mokka) CellID coordinate">getJSizeFromModuleID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> moduleID)<span class="keyword"> const </span>{
<a name="l00642"></a>00642       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a9d0ec772a24eb62b4538afbdec89a285" title="get cell size in J direction of (Mokka) CellID coordinate">getJSize</a>(<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;<a class="code" href="group__ModuleIDgroup.html#gad97cd13371906663d664f2e8251992b5" title="get module (number) from this (module) channel ID">getModuleFromModuleID</a>(moduleID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getChipFromModuleID(moduleID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getChannelFromModuleID(moduleID));
<a name="l00643"></a>00643     }
<a name="l00655"></a><a class="code" href="group__DAQgroup.html#gaf41ef2f4b72038f18378413b5b76c6cd">00655</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__DAQgroup.html#gaf41ef2f4b72038f18378413b5b76c6cd" title="get cell size in J direction of (Mokka) CellID coordinate">getJSizeFromDAQID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> DAQchannel)<span class="keyword"> const </span>{
<a name="l00656"></a>00656       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a9d0ec772a24eb62b4538afbdec89a285" title="get cell size in J direction of (Mokka) CellID coordinate">getJSize</a>(<a class="code" href="group__DAQgroup.html#gafe0b15ff8622a671237999286b92c7dc" title="module number from DAQ channel ID">getModuleFromDAQID</a>(DAQchannel),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getChipFromDAQID(DAQchannel),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getChannelFromDAQID(DAQchannel));
<a name="l00657"></a>00657     }
<a name="l00669"></a><a class="code" href="classCALICE_1_1AhcMapper.html#a887299333957bbde8da9fed21d68c380">00669</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a887299333957bbde8da9fed21d68c380" title="get cell size in J direction of (Mokka) CellID coordinate">getJSizeFromIJK</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k)<span class="keyword"> const </span>{
<a name="l00670"></a>00670       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a9d0ec772a24eb62b4538afbdec89a285" title="get cell size in J direction of (Mokka) CellID coordinate">getJSize</a>(<a class="code" href="classCALICE_1_1AhcMapper.html#aab2c351390279b6ddb691922c1697b94" title="module number from triple crate, slot, fe">getModule</a>(k),<a class="code" href="classCALICE_1_1AhcMapper.html#a4ff7ad6e9ea5756c7599b204b6c17c76" title="chip number from triple I, J, K">getChip</a>(i,j,k),<a class="code" href="classCALICE_1_1AhcMapper.html#adbb5dfc3ce2df861b5ef96f6910bc287" title="chip number from triple I, J, K">getChan</a>(i,j,k));
<a name="l00671"></a>00671     }
<a name="l00683"></a><a class="code" href="classCALICE_1_1AhcMapper.html#a9d0ec772a24eb62b4538afbdec89a285">00683</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a9d0ec772a24eb62b4538afbdec89a285" title="get cell size in J direction of (Mokka) CellID coordinate">getJSize</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> chip, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> chan)<span class="keyword"> const </span>{
<a name="l00684"></a>00684 
<a name="l00685"></a>00685       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> moduleTypeIndex = getModuleTypeIndex(module);
<a name="l00686"></a>00686       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = getIndexChan(chip,chan);
<a name="l00687"></a>00687 
<a name="l00688"></a>00688       <span class="keywordflow">if</span> ( ! valid(index,_chipChanAvailable.at(moduleTypeIndex)) ) <span class="keywordflow">throw</span> <a class="code" href="classCALICE_1_1BadDataException.html" title="exception to be thrown when data leads to a conflict">BadDataException</a>(<span class="stringliteral">&quot;invalid chip, channel&quot;</span>);
<a name="l00689"></a>00689 
<a name="l00690"></a>00690       <span class="keywordflow">return</span> _sizeJVchan.at(moduleTypeIndex).at(index);
<a name="l00691"></a>00691     }
<a name="l00692"></a>00692 
<a name="l00693"></a>00693 
<a name="l00694"></a>00694 
<a name="l00695"></a>00695 
<a name="l00709"></a><a class="code" href="group__VirtualCellID.html#ga388434a5bf067dd89017e28ba9ce2715">00709</a>     <span class="keywordtype">int</span> <a class="code" href="group__VirtualCellID.html#ga388434a5bf067dd89017e28ba9ce2715" title="return identifying index of cell">getTrueCellID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> virtualCellIndex)<span class="keyword"> const </span>{
<a name="l00710"></a>00710       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;<a class="code" href="group__CellIDgroup.html#ga98194da015b87fdf07f0a62da5b8c9e5" title="get CellID from triple I,J,K">getCellID</a>(<a class="code" href="group__VirtualCellID.html#ga776b8e4e75a5a69034951e4c2a670366" title="return I of identifying index of cell">getTrueIFromCellID</a>(virtualCellIndex), <a class="code" href="group__VirtualCellID.html#ga5372257a6161967edcc5bb9a62cb27db" title="return J of identifying index of cell">getTrueJFromCellID</a>(virtualCellIndex), <a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getKFromCellID(virtualCellIndex));
<a name="l00711"></a>00711     }
<a name="l00712"></a>00712 
<a name="l00728"></a><a class="code" href="group__VirtualCellID.html#gafedf30227385a89485dc65dba35f070d">00728</a>     <span class="keywordtype">int</span> <a class="code" href="group__VirtualCellID.html#gafedf30227385a89485dc65dba35f070d" title="return identifying index of cell">getTrueCellID</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k)<span class="keyword"> const </span>{
<a name="l00729"></a>00729       <span class="keywordflow">return</span> <a class="code" href="group__VirtualCellID.html#ga388434a5bf067dd89017e28ba9ce2715" title="return identifying index of cell">getTrueCellID</a>(<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getCellID(i,j,k));
<a name="l00730"></a>00730     }
<a name="l00731"></a>00731 
<a name="l00747"></a><a class="code" href="group__VirtualCellID.html#ga776b8e4e75a5a69034951e4c2a670366">00747</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__VirtualCellID.html#ga776b8e4e75a5a69034951e4c2a670366" title="return I of identifying index of cell">getTrueIFromCellID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> virtualCellID)<span class="keyword"> const </span>{
<a name="l00748"></a>00748       <span class="keywordflow">return</span> <a class="code" href="group__VirtualCellID.html#ga38a9244588f0c4467e69f6a43102dcf4" title="return I of identifying index of cell">getTrueIFromIJK</a>(<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getIFromCellID(virtualCellID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getJFromCellID(virtualCellID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getKFromCellID(virtualCellID));
<a name="l00749"></a>00749     }
<a name="l00767"></a><a class="code" href="group__VirtualCellID.html#ga38a9244588f0c4467e69f6a43102dcf4">00767</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__VirtualCellID.html#ga38a9244588f0c4467e69f6a43102dcf4" title="return I of identifying index of cell">getTrueIFromIJK</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k)<span class="keyword"> const </span>{
<a name="l00768"></a>00768       <span class="keywordflow">return</span> <a class="code" href="group__VirtualCellID.html#ga779e7ca4c5d5d39f7ab4f9135edb591e" title="return I of identifying index of cell">getTrueI</a>(<a class="code" href="classCALICE_1_1AhcMapper.html#aab2c351390279b6ddb691922c1697b94" title="module number from triple crate, slot, fe">getModule</a>(k),i,j);
<a name="l00769"></a>00769     }
<a name="l00787"></a><a class="code" href="group__VirtualCellID.html#ga779e7ca4c5d5d39f7ab4f9135edb591e">00787</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__VirtualCellID.html#ga779e7ca4c5d5d39f7ab4f9135edb591e" title="return I of identifying index of cell">getTrueI</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j)<span class="keyword"> const </span>{
<a name="l00788"></a>00788 
<a name="l00789"></a>00789       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> moduleTypeIndex = getModuleTypeIndex(module);
<a name="l00790"></a>00790       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = getIndexIJ(i,j);
<a name="l00791"></a>00791 
<a name="l00792"></a>00792       <span class="keywordflow">if</span> ( ! ( valid(index,_ijSecondaryAvailable.at(moduleTypeIndex)) || valid(index,_ijAvailable.at(moduleTypeIndex))) ) <span class="keywordflow">throw</span> <a class="code" href="classCALICE_1_1BadDataException.html" title="exception to be thrown when data leads to a conflict">BadDataException</a>(<span class="stringliteral">&quot;invalid i,j&quot;</span>);
<a name="l00793"></a>00793 
<a name="l00794"></a>00794       <span class="keywordflow">return</span> getIFromIJIndex( _ijVchan.at(moduleTypeIndex).at( _chanVij.at(moduleTypeIndex).at(index) ) );
<a name="l00795"></a>00795     }
<a name="l00796"></a>00796 
<a name="l00812"></a><a class="code" href="group__VirtualCellID.html#ga5372257a6161967edcc5bb9a62cb27db">00812</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__VirtualCellID.html#ga5372257a6161967edcc5bb9a62cb27db" title="return J of identifying index of cell">getTrueJFromCellID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> virtualCellID)<span class="keyword"> const </span>{
<a name="l00813"></a>00813       <span class="keywordflow">return</span> <a class="code" href="group__VirtualCellID.html#ga37958a52241eefd4a3cdf310fdc6c5c7" title="return J of identifying index of cell">getTrueJFromIJK</a>(<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getIFromCellID(virtualCellID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getJFromCellID(virtualCellID),<a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;getKFromCellID(virtualCellID));
<a name="l00814"></a>00814     }
<a name="l00832"></a><a class="code" href="group__VirtualCellID.html#ga37958a52241eefd4a3cdf310fdc6c5c7">00832</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__VirtualCellID.html#ga37958a52241eefd4a3cdf310fdc6c5c7" title="return J of identifying index of cell">getTrueJFromIJK</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k)<span class="keyword"> const </span>{
<a name="l00833"></a>00833       <span class="keywordflow">return</span> <a class="code" href="group__VirtualCellID.html#ga8ba9057ca7541fc72ddd2994873842e5" title="return J of identifying index of cell">getTrueJ</a>(<a class="code" href="classCALICE_1_1AhcMapper.html#aab2c351390279b6ddb691922c1697b94" title="module number from triple crate, slot, fe">getModule</a>(k),i,j);
<a name="l00834"></a>00834     }
<a name="l00852"></a><a class="code" href="group__VirtualCellID.html#ga8ba9057ca7541fc72ddd2994873842e5">00852</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__VirtualCellID.html#ga8ba9057ca7541fc72ddd2994873842e5" title="return J of identifying index of cell">getTrueJ</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j)<span class="keyword"> const </span>{
<a name="l00853"></a>00853 
<a name="l00854"></a>00854       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> moduleTypeIndex = getModuleTypeIndex(module);
<a name="l00855"></a>00855       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = getIndexIJ(i,j);
<a name="l00856"></a>00856 
<a name="l00857"></a>00857       <span class="keywordflow">if</span> ( ! ( valid(index,_ijSecondaryAvailable.at(moduleTypeIndex)) || valid(index,_ijAvailable.at(moduleTypeIndex))) ) <span class="keywordflow">throw</span> <a class="code" href="classCALICE_1_1BadDataException.html" title="exception to be thrown when data leads to a conflict">BadDataException</a>(<span class="stringliteral">&quot;invalid i,j&quot;</span>);
<a name="l00858"></a>00858 
<a name="l00859"></a>00859       <span class="keywordflow">return</span> getJFromIJIndex( _ijVchan.at(moduleTypeIndex).at( _chanVij.at(moduleTypeIndex).at(index) ) );
<a name="l00860"></a>00860     }
<a name="l00861"></a>00861 
<a name="l00869"></a><a class="code" href="group__Range.html#ga110b896619d43ab0e496dc0943c121d1">00869</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__Range.html#ga110b896619d43ab0e496dc0943c121d1" title="return maximum module number">getMaxModule</a>()<span class="keyword"> const </span>{
<a name="l00870"></a>00870       <span class="keywordflow">return</span> _nMod;
<a name="l00871"></a>00871     }
<a name="l00872"></a>00872 
<a name="l00880"></a><a class="code" href="group__Range.html#ga9cf146635945e09489d263d5ffd5ab0b">00880</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__Range.html#ga9cf146635945e09489d263d5ffd5ab0b" title="return maximum chip number">getMaxChip</a>()<span class="keyword"> const </span>{
<a name="l00881"></a>00881       <span class="keywordflow">return</span> _nChip;
<a name="l00882"></a>00882     }
<a name="l00883"></a>00883 
<a name="l00891"></a><a class="code" href="group__Range.html#gaf8ac2bae917fc0756a3518345655fbd4">00891</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__Range.html#gaf8ac2bae917fc0756a3518345655fbd4" title="return maximum channel number">getMaxChannel</a>()<span class="keyword"> const </span>{
<a name="l00892"></a>00892       <span class="keywordflow">return</span> _nChan;
<a name="l00893"></a>00893     }
<a name="l00894"></a>00894 
<a name="l00902"></a><a class="code" href="group__Range.html#ga6f9ad0857c90f1e5577f8813a4f22bf6">00902</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__Range.html#ga6f9ad0857c90f1e5577f8813a4f22bf6" title="return maximum I index">getMaxI</a>()<span class="keyword"> const </span>{
<a name="l00903"></a>00903       <span class="keywordflow">return</span> _nI;
<a name="l00904"></a>00904     }
<a name="l00912"></a><a class="code" href="group__Range.html#ga7ffa5fe20d72567f99f92bba2d7b342d">00912</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__Range.html#ga7ffa5fe20d72567f99f92bba2d7b342d" title="return maximum J index">getMaxJ</a>()<span class="keyword"> const </span>{
<a name="l00913"></a>00913       <span class="keywordflow">return</span> _nJ;
<a name="l00914"></a>00914     }
<a name="l00922"></a><a class="code" href="group__Range.html#gadef3add357475764252e7a0dbe238be2">00922</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__Range.html#gadef3add357475764252e7a0dbe238be2" title="return maximum K index">getMaxK</a>()<span class="keyword"> const </span>{
<a name="l00923"></a>00923       <span class="keywordflow">return</span> _nK;
<a name="l00924"></a>00924     }
<a name="l00925"></a>00925 
<a name="l00937"></a><a class="code" href="classCALICE_1_1AhcMapper.html#ae4ab5d3a50a6105fb3fadb021790e46a">00937</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1AhcMapper.html#ae4ab5d3a50a6105fb3fadb021790e46a" title="fills all necessary mapping information">fill</a>(<span class="keyword">const</span> lcio::LCCollection* moduleDescriptionCol, <span class="keyword">const</span> lcio::LCCollection* moduleConnectionCol) {
<a name="l00938"></a>00938       <a class="code" href="classCALICE_1_1AhcMapper.html#a82a573535ff437f989ecc52d2e8a7f8e" title="sets the module layout information in the class, module connection information will...">fillModuleDescription</a>(moduleDescriptionCol);
<a name="l00939"></a>00939       <a class="code" href="classCALICE_1_1AhcMapper.html#ac73575dd541b8d4a392dfd6c60aa0da7" title="sets the mapping information in the class, call after fillModuleDescription">fillModuleConnection</a>(moduleConnectionCol);
<a name="l00940"></a>00940     }
<a name="l00941"></a>00941 
<a name="l00949"></a><a class="code" href="classCALICE_1_1AhcMapper.html#a33e187b8e578c2dc6062e63fdae16e28">00949</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a33e187b8e578c2dc6062e63fdae16e28" title="updates the mapping information in the class (possible after first fill only)">updateConnections</a>(<span class="keyword">const</span> lcio::LCCollection* moduleConnectionCol) {
<a name="l00950"></a>00950       <a class="code" href="classCALICE_1_1AhcMapper.html#ac73575dd541b8d4a392dfd6c60aa0da7" title="sets the mapping information in the class, call after fillModuleDescription">fillModuleConnection</a>(moduleConnectionCol);
<a name="l00951"></a>00951     }
<a name="l00952"></a>00952 
<a name="l00960"></a>00960     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1AhcMapper.html#acb6947df0b876fd32cb206e576260fb9" title="print current data contents">print</a>(std::ostream &amp;ostream) <span class="keyword">const</span>;
<a name="l00961"></a>00961 
<a name="l00969"></a>00969     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1AhcMapper.html#aebe2a8845c6b24584f111009ef7f89c4" title="print summary of current data contents">printStats</a>(std::ostream &amp;ostream) <span class="keyword">const</span>;
<a name="l00970"></a>00970 
<a name="l00971"></a>00971 
<a name="l00972"></a>00972   <span class="keyword">protected</span>:
<a name="l00973"></a>00973 
<a name="l00974"></a>00974 
<a name="l00975"></a><a class="code" href="classCALICE_1_1AhcMapper.html#a1e4072147112a446171c2892ebe8e3e2">00975</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a1e4072147112a446171c2892ebe8e3e2" title="get a compact index for storing data in vectors">getIndexByCellID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> cellID)<span class="keyword"> const </span>{
<a name="l00976"></a>00976       <a class="code" href="classCALICE_1_1DecoderSet.html" title="class containing decoders for the three CALICE coordinate systems">DecoderSet</a> *decoder = <a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>();
<a name="l00977"></a>00977       <span class="comment">// check if k exists</span>
<a name="l00978"></a>00978       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = decoder-&gt;<a class="code" href="group__CellIDgroup.html#ga082e821a56c0490acc9d44a58cf285af" title="get K from (Mokka) CellID The right encoding string has to be set before.">getKFromCellID</a>(cellID);
<a name="l00979"></a>00979       <span class="keywordflow">if</span> ( ! valid(k,_kAvailable) ) <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a9b0644605c525dd581d8d8098764120e" title="get the maximum value of the compact index for storing data in vectors">getMaxIndex</a>()+1;
<a name="l00980"></a>00980 
<a name="l00981"></a>00981       <span class="comment">/* check if channel (i/j) lays inside this module</span>
<a name="l00982"></a>00982 <span class="comment">       * NOTE: to speed up, we assume at this place, that everything was filled right</span>
<a name="l00983"></a>00983 <span class="comment">       *       we assume that when K is available, also a module</span>
<a name="l00984"></a>00984 <span class="comment">       *       with a valid type belongs to this K</span>
<a name="l00985"></a>00985 <span class="comment">       */</span>
<a name="l00986"></a>00986       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ijIndex = getIndexIJ(decoder-&gt;<a class="code" href="group__CellIDgroup.html#ga3fdbb446bca5f7ba2636396e96c1ac9c" title="get I from (Mokka) CellID The right encoding string has to be set before.">getIFromCellID</a>(cellID), decoder-&gt;<a class="code" href="group__CellIDgroup.html#ga6325aee66a827df07d103b78a399ff5f" title="get J from (Mokka) CellID The right encoding string has to be set before.">getJFromCellID</a>(cellID));
<a name="l00987"></a>00987       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module = _moduleVk[k];
<a name="l00988"></a>00988       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> moduleType = _typeVmodule[module];
<a name="l00989"></a>00989       <span class="keywordflow">if</span> ( ! valid( ijIndex, _ijAvailable[moduleType]) ) <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a9b0644605c525dd581d8d8098764120e" title="get the maximum value of the compact index for storing data in vectors">getMaxIndex</a>()+1;
<a name="l00990"></a>00990 
<a name="l00991"></a>00991       <span class="comment">// everything seems to be alright; let&apos;s return the compact index</span>
<a name="l00992"></a>00992       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> chanIndex = _chanVij[moduleType][ijIndex];
<a name="l00993"></a>00993       <span class="keywordflow">return</span> getCompactIndex(module,getChipFromChanIndex(chanIndex),getChanFromChanIndex(chanIndex));
<a name="l00994"></a>00994 
<a name="l00995"></a>00995       <span class="comment">//     return getCompactIndex(getModuleFromCellID(cellID),_chanVij.at(getModuleTypeIndex(getModuleFromCellID(cellID))).at(getIndexIJ(getDecoder()-&gt;getIFromCellID(cellID),getDecoder()-&gt;getJFromCellID(cellID))));</span>
<a name="l00996"></a>00996     }
<a name="l00997"></a>00997 
<a name="l00998"></a><a class="code" href="classCALICE_1_1AhcMapper.html#a54a30bb2306d44a9ab0240593c7425a8">00998</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a54a30bb2306d44a9ab0240593c7425a8" title="get a compact index for storing data in vectors">getIndexByDAQID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> ID)<span class="keyword"> const </span>{
<a name="l00999"></a>00999       <a class="code" href="classCALICE_1_1DecoderSet.html" title="class containing decoders for the three CALICE coordinate systems">DecoderSet</a> *decoder = <a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>();
<a name="l01000"></a>01000 
<a name="l01001"></a>01001       <span class="comment">// check if crate exists</span>
<a name="l01002"></a>01002       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crate = decoder-&gt;<a class="code" href="group__DAQgroup.html#ga25aea4dafa082da6847d988952710259" title="get crate from DAQ channel ID The right encoding string has to be set before.">getCrateFromDAQID</a>(ID);
<a name="l01003"></a>01003       <span class="keywordflow">if</span> ( ! valid(crate,_crateIndex) ) <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a9b0644605c525dd581d8d8098764120e" title="get the maximum value of the compact index for storing data in vectors">getMaxIndex</a>()+1;
<a name="l01004"></a>01004 
<a name="l01005"></a>01005       <span class="comment">// check if slot exists</span>
<a name="l01006"></a>01006       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> slot = decoder-&gt;<a class="code" href="group__DAQgroup.html#gae695d7a267bbde471feeac8b1899b873" title="get slot from DAQ channel ID The right encoding string has to be set before.">getSlotFromDAQID</a>(ID);
<a name="l01007"></a>01007       <span class="keywordflow">if</span> ( ! valid(slot,_slotAvailable) ) <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a9b0644605c525dd581d8d8098764120e" title="get the maximum value of the compact index for storing data in vectors">getMaxIndex</a>()+1;
<a name="l01008"></a>01008 
<a name="l01009"></a>01009       <span class="comment">// check if there is a module for this crate/slot/fe</span>
<a name="l01010"></a>01010       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> connectionIndex = getIndexModuleConnection(crate,slot,decoder-&gt;<a class="code" href="group__DAQgroup.html#ga175464940f15c89b46495bff3c4537fa" title="get fe from DAQ channel ID The right encoding string has to be set before.">getFeFromDAQID</a>(ID));
<a name="l01011"></a>01011       <span class="keywordflow">if</span> ( ! valid(connectionIndex,_connectionAvailable) ) <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a9b0644605c525dd581d8d8098764120e" title="get the maximum value of the compact index for storing data in vectors">getMaxIndex</a>()+1;
<a name="l01012"></a>01012 
<a name="l01013"></a>01013       <span class="comment">/*</span>
<a name="l01014"></a>01014 <span class="comment">       * NOTE: To speed up, we assume at this place, that everything was filled right.</span>
<a name="l01015"></a>01015 <span class="comment">       *       We assume, that when the connection is available, also a module</span>
<a name="l01016"></a>01016 <span class="comment">       *       with a valid type belongs to this connection.</span>
<a name="l01017"></a>01017 <span class="comment">       */</span>
<a name="l01018"></a>01018       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module  = _moduleVconnection[connectionIndex];
<a name="l01019"></a>01019       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> chip    = decoder-&gt;<a class="code" href="group__DAQgroup.html#ga64c278c9712e9417cddbf50f549e3ee4" title="get chip from DAQ channel ID The right encoding string has to be set before.">getChipFromDAQID</a>(ID);
<a name="l01020"></a>01020       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> channel = decoder-&gt;<a class="code" href="group__DAQgroup.html#ga2d7b8b445a2dcfe82b091a5dc9ceaa33" title="get channel from DAQ channel ID The right encoding string has to be set before.">getChannelFromDAQID</a>(ID);
<a name="l01021"></a>01021 
<a name="l01022"></a>01022       <span class="comment">// check if channel (chip/channel) lays inside this module</span>
<a name="l01023"></a>01023       <span class="keywordflow">if</span> ( ! valid( getIndexChan(chip,channel),
<a name="l01024"></a>01024                     _chipChanAvailable[_typeVmodule[module]])
<a name="l01025"></a>01025            ) <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a9b0644605c525dd581d8d8098764120e" title="get the maximum value of the compact index for storing data in vectors">getMaxIndex</a>()+1;
<a name="l01026"></a>01026 
<a name="l01027"></a>01027       <span class="comment">// everything seems to be alright; let&apos;s return the compact index</span>
<a name="l01028"></a>01028       <span class="keywordflow">return</span> getCompactIndex(module,chip,channel);
<a name="l01029"></a>01029 
<a name="l01030"></a>01030       <span class="comment">//      return getCompactIndex(getModule(getDecoder()-&gt;getCrateFromDAQID(ID),getDecoder()-&gt;getSlotFromDAQID(ID),getDecoder()-&gt;getFeFromDAQID(ID)),getDecoder()-&gt;getChipFromDAQID(ID),getDecoder()-&gt;getChannelFromDAQID(ID));</span>
<a name="l01031"></a>01031     }
<a name="l01032"></a>01032 
<a name="l01033"></a><a class="code" href="classCALICE_1_1AhcMapper.html#aaa1748613f85f7573be51b7344c69a4e">01033</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#aaa1748613f85f7573be51b7344c69a4e" title="get a compact index for storing data in vectors">getIndexByModuleID</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> ID)<span class="keyword"> const </span>{
<a name="l01034"></a>01034       <a class="code" href="classCALICE_1_1DecoderSet.html" title="class containing decoders for the three CALICE coordinate systems">DecoderSet</a> *decoder = <a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>();
<a name="l01035"></a>01035 
<a name="l01036"></a>01036       <span class="comment">// check if module is valid</span>
<a name="l01037"></a>01037       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module = decoder-&gt;<a class="code" href="group__ModuleIDgroup.html#ga8b95a2f04736868caf10e482eb948a37" title="get module from (Module) channel ID The right encoding string has to be set before...">getModuleFromModuleID</a>(ID);
<a name="l01038"></a>01038       <span class="keywordflow">if</span> ( ! valid(module,_moduleAvailable) ) <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a9b0644605c525dd581d8d8098764120e" title="get the maximum value of the compact index for storing data in vectors">getMaxIndex</a>()+1 ;
<a name="l01039"></a>01039 
<a name="l01040"></a>01040       <span class="comment">/* check if channel (chip/channel) lays inside this module</span>
<a name="l01041"></a>01041 <span class="comment">       * NOTE: To speed up, we assume at this place, that everything was filled right.</span>
<a name="l01042"></a>01042 <span class="comment">       *       We assume that an available module implies that it has a valid type.</span>
<a name="l01043"></a>01043 <span class="comment">       */</span>
<a name="l01044"></a>01044       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> chip = decoder-&gt;<a class="code" href="group__ModuleIDgroup.html#ga52836a07aa64bb2bae6daa35117cb74e" title="get chip from (Module) channel ID The right encoding string has to be set before...">getChipFromModuleID</a>(ID);
<a name="l01045"></a>01045       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> channel = decoder-&gt;<a class="code" href="group__ModuleIDgroup.html#ga78a17650cf220798f77b57244b65b94e" title="get channel from (Module) channel ID The right encoding string has to be set before...">getChannelFromModuleID</a>(ID);
<a name="l01046"></a>01046       <span class="keywordflow">if</span> ( ! valid( getIndexChan(chip, channel),
<a name="l01047"></a>01047                     _chipChanAvailable[_typeVmodule[module]])
<a name="l01048"></a>01048            ) <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a9b0644605c525dd581d8d8098764120e" title="get the maximum value of the compact index for storing data in vectors">getMaxIndex</a>()+1;
<a name="l01049"></a>01049 
<a name="l01050"></a>01050 
<a name="l01051"></a>01051       <span class="comment">// everything seems to be alright; let&apos;s return the compact index</span>
<a name="l01052"></a>01052       <span class="keywordflow">return</span> getCompactIndex(module,chip,channel);
<a name="l01053"></a>01053 
<a name="l01054"></a>01054       <span class="comment">//      return getCompactIndex(getDecoder()-&gt;getModuleFromModuleID(ID),getDecoder()-&gt;getChipFromModuleID(ID),getDecoder()-&gt;getChannelFromModuleID(ID));</span>
<a name="l01055"></a>01055     }
<a name="l01056"></a>01056 
<a name="l01057"></a><a class="code" href="classCALICE_1_1AhcMapper.html#a9b0644605c525dd581d8d8098764120e">01057</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a9b0644605c525dd581d8d8098764120e" title="get the maximum value of the compact index for storing data in vectors">getMaxIndex</a>()<span class="keyword"> const </span>{
<a name="l01058"></a>01058       <span class="keywordflow">return</span> _nMod * _nChip * _nChan;
<a name="l01059"></a>01059     }
<a name="l01060"></a>01060 
<a name="l01061"></a><a class="code" href="classCALICE_1_1AhcMapper.html#af53a274b50f0f75e632454a4072113eb">01061</a>     <span class="keywordtype">int</span> <a class="code" href="classCALICE_1_1AhcMapper.html#af53a274b50f0f75e632454a4072113eb" title="get the cell ID of a certain compact index">getCellIDOfIndex</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)<span class="keyword"> const </span>{
<a name="l01062"></a>01062       <span class="keywordflow">return</span> <a class="code" href="classCALICE_1_1Mapper.html#ac5989c1b376d938897806ee197f68375" title="get class which handles the bit en/decoding of the different IDs">getDecoder</a>()-&gt;<a class="code" href="group__CellIDgroup.html#ga98194da015b87fdf07f0a62da5b8c9e5" title="get CellID from triple I,J,K">getCellID</a>( <a class="code" href="classCALICE_1_1AhcMapper.html#ac64aa07b08160c003c6f02c4fa76746a" title="I of (Mokka) cellID.">getI</a>(getModuleFromCompactIndex(index),getChipFromCompactIndex(index),getChanFromCompactIndex(index)),
<a name="l01063"></a>01063                                       <a class="code" href="classCALICE_1_1AhcMapper.html#ab02fce56e98d645a365eb23ba30afd4a" title="J of (Mokka) cellID.">getJ</a>(getModuleFromCompactIndex(index),getChipFromCompactIndex(index),getChanFromCompactIndex(index)),
<a name="l01064"></a>01064                                       <a class="code" href="classCALICE_1_1AhcMapper.html#a086377eb0064aab3337e8f12fcf40fc3" title="K of (Mokka) cellID.">getK</a>(getModuleFromCompactIndex(index)) );
<a name="l01065"></a>01065     }
<a name="l01066"></a>01066 
<a name="l01067"></a>01067   <span class="keyword">private</span>:
<a name="l01068"></a>01068 
<a name="l01069"></a>01069     <span class="keyword">typedef</span> std::map&lt;unsigned int,unsigned int&gt; indexMap_t ;
<a name="l01070"></a>01070 
<a name="l01071"></a>01071     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _nChan;
<a name="l01072"></a>01072     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _nChip;
<a name="l01073"></a>01073     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _nFe;
<a name="l01074"></a>01074     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _nSlot;
<a name="l01075"></a>01075     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _maxSlot;
<a name="l01076"></a>01076     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _nCrate;
<a name="l01077"></a>01077 
<a name="l01078"></a>01078     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _nMod;
<a name="l01079"></a>01079     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _nModType;
<a name="l01080"></a>01080 
<a name="l01081"></a>01081     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _nI;
<a name="l01082"></a>01082     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _nJ;
<a name="l01083"></a>01083     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _nK;
<a name="l01084"></a>01084 
<a name="l01085"></a>01085     <span class="keywordtype">bool</span> valid(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index, <span class="keyword">const</span> std::vector&lt;bool&gt; &amp;availableVec)<span class="keyword"> const </span>{
<a name="l01086"></a>01086       <span class="keywordflow">if</span> ( ! (index &lt; availableVec.size()) || ! availableVec[index] ) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01087"></a>01087       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01088"></a>01088     }
<a name="l01089"></a>01089 
<a name="l01090"></a>01090     <span class="keywordtype">bool</span> valid(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index, <span class="keyword">const</span> indexMap_t &amp;indexMap)<span class="keyword"> const </span>{
<a name="l01091"></a>01091       indexMap_t::const_iterator indexIter = indexMap.find(index);
<a name="l01092"></a>01092       <span class="keywordflow">if</span> (indexIter == indexMap.end()) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01093"></a>01093       <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01094"></a>01094     }
<a name="l01095"></a>01095 
<a name="l01096"></a>01096     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getModuleTypeIndex(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module)<span class="keyword"> const </span>{
<a name="l01097"></a>01097 
<a name="l01098"></a>01098       <span class="keywordflow">if</span> ( ! valid(module,_moduleAvailable) ) <span class="keywordflow">throw</span> BadDataException(<span class="stringliteral">&quot;module number does not exist&quot;</span>);
<a name="l01099"></a>01099 
<a name="l01100"></a>01100       <span class="keywordflow">return</span> _typeVmodule.at(module);
<a name="l01101"></a>01101     }
<a name="l01102"></a>01102 
<a name="l01103"></a>01103     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getIndexModuleConnection(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crate, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> slot, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> fe)<span class="keyword"> const </span>{
<a name="l01104"></a>01104       indexMap_t::const_iterator crateIndexIter = _crateIndex.find(crate);
<a name="l01105"></a>01105       <span class="keywordflow">if</span> (crateIndexIter == _crateIndex.end()) <span class="keywordflow">throw</span> BadDataException(<span class="stringliteral">&quot;crate does not exist&quot;</span>);
<a name="l01106"></a>01106       <span class="keywordflow">return</span>
<a name="l01107"></a>01107         crateIndexIter-&gt;second*_nSlot*_nFe +
<a name="l01108"></a>01108         _slotIndex[slot]*_nFe +
<a name="l01109"></a>01109         fe;
<a name="l01110"></a>01110     }
<a name="l01111"></a>01111     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getCrateFromModuleConnectionIndex(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)<span class="keyword"> const </span>{
<a name="l01112"></a>01112       <span class="keywordflow">return</span> _crateNumber[index/(_nSlot*_nFe)];
<a name="l01113"></a>01113     }
<a name="l01114"></a>01114     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getSlotFromModuleConnectionIndex(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)<span class="keyword"> const </span>{
<a name="l01115"></a>01115       <span class="keywordflow">return</span> _slotNumber[(index%(_nSlot*_nFe))/_nFe];
<a name="l01116"></a>01116     }
<a name="l01117"></a>01117     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getFeFromModuleConnectionIndex(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)<span class="keyword"> const </span>{
<a name="l01118"></a>01118       <span class="keywordflow">return</span> index%_nFe;
<a name="l01119"></a>01119     }
<a name="l01120"></a>01120 
<a name="l01121"></a>01121     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getCompactIndex(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> chip, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> chan)<span class="keyword"> const </span>{
<a name="l01122"></a>01122       <span class="keywordflow">return</span> module*_nChip*_nChan + getIndexChan(chip,chan);
<a name="l01123"></a>01123     }
<a name="l01124"></a>01124     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getCompactIndex(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> chanIndex)<span class="keyword"> const </span>{
<a name="l01125"></a>01125       <span class="keywordflow">return</span> module*_nChip*_nChan + chanIndex;
<a name="l01126"></a>01126     }
<a name="l01127"></a>01127     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getModuleFromCompactIndex(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)<span class="keyword"> const </span>{
<a name="l01128"></a>01128       <span class="keywordflow">return</span> index/(_nChip*_nChan);
<a name="l01129"></a>01129     }
<a name="l01130"></a>01130     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getChipFromCompactIndex(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)<span class="keyword"> const </span>{
<a name="l01131"></a>01131       <span class="keywordflow">return</span> getChipFromChanIndex( index%(_nChip*_nChan) );
<a name="l01132"></a>01132     }
<a name="l01133"></a>01133     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getChanFromCompactIndex(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)<span class="keyword"> const </span>{
<a name="l01134"></a>01134       <span class="keywordflow">return</span> getChanFromChanIndex( index%(_nChip*_nChan) );
<a name="l01135"></a>01135     }
<a name="l01136"></a>01136     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getModuleFromIndex(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index, <span class="keywordtype">bool</span> &amp;valid)<span class="keyword"> const </span>{
<a name="l01137"></a>01137       <span class="keywordflow">if</span> ( index &gt; <a class="code" href="classCALICE_1_1AhcMapper.html#a9b0644605c525dd581d8d8098764120e" title="get the maximum value of the compact index for storing data in vectors">getMaxIndex</a>() ) {
<a name="l01138"></a>01138         valid = <span class="keyword">false</span>;
<a name="l01139"></a>01139         <span class="keywordflow">return</span> std::numeric_limits&lt;unsigned int&gt;::max();
<a name="l01140"></a>01140       }
<a name="l01141"></a>01141       <span class="keywordflow">else</span> {
<a name="l01142"></a>01142         valid = <span class="keyword">true</span>;
<a name="l01143"></a>01143         <span class="keywordflow">return</span> getModuleFromCompactIndex(index);
<a name="l01144"></a>01144       }
<a name="l01145"></a>01145     }
<a name="l01146"></a>01146 
<a name="l01147"></a>01147 
<a name="l01148"></a>01148     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getIndexChan(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> chip, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> chan)<span class="keyword"> const </span>{<span class="keywordflow">return</span> chip*_nChan+chan;}
<a name="l01149"></a>01149     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getChipFromChanIndex(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)<span class="keyword"> const </span>{<span class="keywordflow">return</span> index/_nChan;}
<a name="l01150"></a>01150     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getChanFromChanIndex(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)<span class="keyword"> const </span>{<span class="keywordflow">return</span> index%_nChan;}
<a name="l01151"></a>01151 
<a name="l01152"></a>01152     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getIndexIJ(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j)<span class="keyword"> const </span>{<span class="keywordflow">return</span> j*_nI+i;}
<a name="l01153"></a>01153     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getIFromIJIndex(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)<span class="keyword"> const </span>{<span class="keywordflow">return</span> index%_nI;}
<a name="l01154"></a>01154     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getJFromIJIndex(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)<span class="keyword"> const </span>{<span class="keywordflow">return</span> index/_nI;}
<a name="l01155"></a>01155 
<a name="l01156"></a>01156     <span class="comment">//memory managment functions</span>
<a name="l01157"></a>01157 
<a name="l01158"></a>01158     <span class="keywordtype">void</span> clearCrate() {
<a name="l01159"></a>01159 
<a name="l01160"></a>01160       _crateIndex.clear();
<a name="l01161"></a>01161       _crateNumber.clear();
<a name="l01162"></a>01162 
<a name="l01163"></a>01163       _nCrate = 0;
<a name="l01164"></a>01164     }
<a name="l01165"></a>01165 
<a name="l01166"></a>01166 
<a name="l01167"></a>01167     <span class="keywordtype">void</span> clearSlot() {
<a name="l01168"></a>01168       _slotAvailable.clear();
<a name="l01169"></a>01169       _slotIndex.clear();
<a name="l01170"></a>01170       _slotNumber.clear();
<a name="l01171"></a>01171       _nSlot = 0;
<a name="l01172"></a>01172       _maxSlot = 0;
<a name="l01173"></a>01173     }
<a name="l01174"></a>01174 
<a name="l01175"></a>01175     <span class="keywordtype">void</span> clearModuleType() {
<a name="l01176"></a>01176       _moduleTypeName.clear();
<a name="l01177"></a>01177       _moduleTypeIndex.clear();
<a name="l01178"></a>01178       _moduleTypeAvailable.clear();
<a name="l01179"></a>01179       _chipChanAvailable.clear();
<a name="l01180"></a>01180       _ijAvailable.clear();
<a name="l01181"></a>01181       _nModType = 0;
<a name="l01182"></a>01182     }
<a name="l01183"></a>01183 
<a name="l01184"></a>01184     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01185"></a>01185     <span class="keywordtype">void</span> initToSize( std::vector&lt;T&gt; &amp;vec, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size, <span class="keyword">const</span> T initValue) {
<a name="l01186"></a>01186       vec.clear();
<a name="l01187"></a>01187       vec.resize(size,initValue);
<a name="l01188"></a>01188     }
<a name="l01189"></a>01189 
<a name="l01190"></a>01190     <span class="keywordtype">void</span> initToSize( std::vector&lt;bool&gt; &amp;vec, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size ) {
<a name="l01191"></a>01191       initToSize(vec,size,<span class="keyword">false</span>);
<a name="l01192"></a>01192     }
<a name="l01193"></a>01193 
<a name="l01194"></a>01194     <span class="keywordtype">void</span> initToSize( std::vector&lt;unsigned int&gt; &amp;dataVec, std::vector&lt;bool&gt; &amp;availableVec, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size) {
<a name="l01195"></a>01195       initToSize(dataVec,size,0u);
<a name="l01196"></a>01196       initToSize(availableVec,size);
<a name="l01197"></a>01197     }
<a name="l01198"></a>01198 
<a name="l01199"></a>01199     <span class="keywordtype">void</span> initFe(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxFe = 0) {
<a name="l01200"></a>01200       _nFe = maxFe+1;
<a name="l01201"></a>01201 
<a name="l01202"></a>01202       initToSize(_moduleVconnection,_connectionAvailable,_nCrate*_nSlot*_nFe);
<a name="l01203"></a>01203     }
<a name="l01204"></a>01204 
<a name="l01205"></a>01205     <span class="keywordtype">void</span> initModule(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxMod = 0) {
<a name="l01206"></a>01206       _nMod = maxMod+1;
<a name="l01207"></a>01207 
<a name="l01208"></a>01208       initToSize(_typeVmodule,_moduleAvailable,_nMod);
<a name="l01209"></a>01209 
<a name="l01210"></a>01210       initToSize(_connectionVmodule,_connectionVmoduleAvailable,_nMod);
<a name="l01211"></a>01211 
<a name="l01212"></a>01212       initToSize(_kVmodule,_kVmoduleAvailable,_nMod);
<a name="l01213"></a>01213     }
<a name="l01214"></a>01214 
<a name="l01215"></a>01215     <span class="keywordtype">void</span> initK(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxK = 0) {
<a name="l01216"></a>01216       _nK = maxK+1;
<a name="l01217"></a>01217 
<a name="l01218"></a>01218       initToSize(_moduleVk,_kAvailable,_nK);
<a name="l01219"></a>01219     }
<a name="l01220"></a>01220 
<a name="l01221"></a>01221     <span class="keywordtype">void</span> initIJChipChannel( <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxI =0, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxJ=0, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxChip =0, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxChan =0  ) {
<a name="l01222"></a>01222 
<a name="l01223"></a>01223       _nI = maxI+1;
<a name="l01224"></a>01224       _nJ = maxJ+1;
<a name="l01225"></a>01225       _nChip = maxChip+1;
<a name="l01226"></a>01226       _nChan = maxChan+1;
<a name="l01227"></a>01227 
<a name="l01228"></a>01228 
<a name="l01229"></a>01229       _ijVchan.clear();
<a name="l01230"></a>01230       _ijVchan.resize(_nModType);
<a name="l01231"></a>01231 
<a name="l01232"></a>01232       _chanVij.clear();
<a name="l01233"></a>01233       _chanVij.resize(_nModType);
<a name="l01234"></a>01234 
<a name="l01235"></a>01235       _sizeIVchan.clear();
<a name="l01236"></a>01236       _sizeIVchan.resize(_nModType);
<a name="l01237"></a>01237 
<a name="l01238"></a>01238       _sizeJVchan.clear();
<a name="l01239"></a>01239       _sizeJVchan.resize(_nModType);
<a name="l01240"></a>01240 
<a name="l01241"></a>01241       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> modType=0;modType&lt;_nModType;++modType) {
<a name="l01242"></a>01242 
<a name="l01243"></a>01243         initToSize( _chanVij.at(modType), _ijAvailable.at(modType), _nI*_nJ);
<a name="l01244"></a>01244         initToSize( _ijSecondaryAvailable.at(modType), _nI*_nJ);
<a name="l01245"></a>01245 
<a name="l01246"></a>01246         initToSize( _ijVchan.at(modType), _chipChanAvailable.at(modType), _nChip*_nChan);
<a name="l01247"></a>01247 
<a name="l01248"></a>01248         initToSize( _sizeIVchan.at(modType),_nChip*_nChan,(<span class="keywordtype">unsigned</span> int)0);
<a name="l01249"></a>01249         initToSize( _sizeJVchan.at(modType),_nChip*_nChan,(<span class="keywordtype">unsigned</span> int)0);
<a name="l01250"></a>01250 
<a name="l01251"></a>01251       }
<a name="l01252"></a>01252     }
<a name="l01253"></a>01253 
<a name="l01254"></a>01254 
<a name="l01255"></a>01255     <span class="keywordtype">void</span> clear() {
<a name="l01256"></a>01256 
<a name="l01257"></a>01257       clearCrate();
<a name="l01258"></a>01258 
<a name="l01259"></a>01259       clearSlot();
<a name="l01260"></a>01260 
<a name="l01261"></a>01261       clearModuleType();
<a name="l01262"></a>01262 
<a name="l01263"></a>01263       initModule();
<a name="l01264"></a>01264 
<a name="l01265"></a>01265       initFe();
<a name="l01266"></a>01266 
<a name="l01267"></a>01267       initK();
<a name="l01268"></a>01268 
<a name="l01269"></a>01269       initIJChipChannel();
<a name="l01270"></a>01270 
<a name="l01271"></a>01271     }
<a name="l01272"></a>01272 
<a name="l01273"></a>01273     <span class="keywordtype">void</span> registerCrate(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crate) {
<a name="l01274"></a>01274       <span class="keywordflow">if</span> (! crateAvailable(crate) ) {
<a name="l01275"></a>01275         _crateIndex[crate] = _crateNumber.size();
<a name="l01276"></a>01276         _crateNumber.push_back(crate);
<a name="l01277"></a>01277         _nCrate++;
<a name="l01278"></a>01278       }
<a name="l01279"></a>01279     }
<a name="l01280"></a>01280 
<a name="l01281"></a>01281     <span class="keywordtype">bool</span> crateAvailable(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crate)<span class="keyword"> const </span>{
<a name="l01282"></a>01282       indexMap_t::const_iterator element = _crateIndex.find(crate);
<a name="l01283"></a>01283       <span class="keywordflow">if</span> (element == _crateIndex.end()) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01284"></a>01284       <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01285"></a>01285     }
<a name="l01286"></a>01286 
<a name="l01287"></a>01287     <span class="keywordtype">void</span> registerSlot(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> slot) {
<a name="l01288"></a>01288       <span class="keywordflow">if</span> (! slotAvailable(slot) ) {
<a name="l01289"></a>01289         <span class="keywordflow">if</span> ( slot &gt;= _slotAvailable.size() ) {
<a name="l01290"></a>01290           _maxSlot = slot;
<a name="l01291"></a>01291           _slotAvailable.resize(_maxSlot+1,<span class="keyword">false</span>);
<a name="l01292"></a>01292           _slotIndex.resize(_maxSlot+1,0);
<a name="l01293"></a>01293         }
<a name="l01294"></a>01294         _slotIndex[slot] = _slotNumber.size();
<a name="l01295"></a>01295         _slotNumber.push_back(slot);
<a name="l01296"></a>01296         _slotAvailable[slot] = <span class="keyword">true</span>;
<a name="l01297"></a>01297         _nSlot = _slotNumber.size();
<a name="l01298"></a>01298       }
<a name="l01299"></a>01299     }
<a name="l01300"></a>01300 
<a name="l01301"></a>01301     <span class="keywordtype">bool</span> slotAvailable(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> slot)<span class="keyword"> const </span>{
<a name="l01302"></a>01302       <span class="keywordflow">if</span> ( slot &gt;= _slotAvailable.size() ) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01303"></a>01303       <span class="keywordflow">else</span> <span class="keywordflow">return</span> _slotAvailable[slot];
<a name="l01304"></a>01304     }
<a name="l01305"></a>01305 
<a name="l01306"></a>01306     <span class="keywordtype">void</span> registerModuleType(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> moduleTypeName) {
<a name="l01307"></a>01307 
<a name="l01308"></a>01308       <span class="comment">//      std::cout &lt;&lt; &quot;registering module type name: &quot; &lt;&lt; moduleTypeName &lt;&lt; std::endl;</span>
<a name="l01309"></a>01309 
<a name="l01310"></a>01310       <span class="keywordflow">if</span> (! moduleTypeAvailable(moduleTypeName) ) {
<a name="l01311"></a>01311         <span class="keywordflow">if</span> (moduleTypeName &gt;= _moduleTypeAvailable.size() ) {
<a name="l01312"></a>01312           _moduleTypeAvailable.resize(moduleTypeName+1,<span class="keyword">false</span>);
<a name="l01313"></a>01313           _moduleTypeIndex.resize(moduleTypeName+1,0);
<a name="l01314"></a>01314         }
<a name="l01315"></a>01315         _moduleTypeIndex[moduleTypeName] = _moduleTypeName.size();
<a name="l01316"></a>01316         _moduleTypeName.push_back(moduleTypeName);
<a name="l01317"></a>01317         _moduleTypeAvailable[moduleTypeName] = <span class="keyword">true</span>;
<a name="l01318"></a>01318 
<a name="l01319"></a>01319         std::vector&lt;bool&gt; ijVec;
<a name="l01320"></a>01320         std::vector&lt;bool&gt; ijVecSec;
<a name="l01321"></a>01321         std::vector&lt;bool&gt; chipChanVec;
<a name="l01322"></a>01322 
<a name="l01323"></a>01323         _ijAvailable.push_back(ijVec);
<a name="l01324"></a>01324         _ijSecondaryAvailable.push_back(ijVecSec);
<a name="l01325"></a>01325         _chipChanAvailable.push_back(chipChanVec);
<a name="l01326"></a>01326 
<a name="l01327"></a>01327         _nModType=_moduleTypeName.size();
<a name="l01328"></a>01328 
<a name="l01329"></a>01329       }
<a name="l01330"></a>01330     }
<a name="l01331"></a>01331 
<a name="l01332"></a>01332     <span class="keywordtype">bool</span> moduleTypeAvailable(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> moduleTypeName)<span class="keyword"> const </span>{
<a name="l01333"></a>01333       <span class="keywordflow">if</span> (moduleTypeName &gt;= _moduleTypeAvailable.size()) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01334"></a>01334       <span class="keywordflow">else</span> <span class="keywordflow">return</span> _moduleTypeAvailable[moduleTypeName];
<a name="l01335"></a>01335     }
<a name="l01336"></a>01336 
<a name="l01337"></a>01337     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> countAvailable(<span class="keyword">const</span> std::vector&lt;bool&gt; &amp;vec) <span class="keyword">const</span> ;
<a name="l01338"></a>01338 
<a name="l01339"></a>01339 
<a name="l01340"></a>01340     <span class="comment">// set functions</span>
<a name="l01341"></a>01341     <span class="keywordtype">void</span> setModuleCrateSlotFe(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crate, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> slot, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> fe) {
<a name="l01342"></a>01342 
<a name="l01343"></a>01343       <span class="keywordflow">if</span> ( ! _connectionVmoduleAvailable.at(module)  &amp;&amp; ! _connectionAvailable.at(getIndexModuleConnection(crate, slot, fe)) ) {
<a name="l01344"></a>01344         _moduleVconnection.at(getIndexModuleConnection(crate, slot, fe)) = module;
<a name="l01345"></a>01345         _connectionVmodule.at(module) = getIndexModuleConnection(crate, slot, fe);
<a name="l01346"></a>01346         _connectionVmoduleAvailable.at(module) = <span class="keyword">true</span>;
<a name="l01347"></a>01347         _connectionAvailable.at(getIndexModuleConnection(crate, slot, fe)) = <span class="keyword">true</span>;
<a name="l01348"></a>01348       }
<a name="l01349"></a>01349       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (    _connectionVmoduleAvailable.at(module) &amp;&amp; _connectionAvailable.at(getIndexModuleConnection(crate, slot, fe))
<a name="l01350"></a>01350                    &amp;&amp; ( _moduleVconnection.at(getIndexModuleConnection(crate, slot, fe)) == module )
<a name="l01351"></a>01351                    &amp;&amp; ( _connectionVmodule.at(module) == getIndexModuleConnection(crate, slot, fe) ) ) {
<a name="l01352"></a>01352         std::cout  &lt;&lt; <span class="stringliteral">&quot;WARNING: double setting of module &quot;</span> &lt;&lt; module &lt;&lt; <span class="stringliteral">&quot; connected to crate &quot;</span> &lt;&lt; crate &lt;&lt; <span class="stringliteral">&quot; slot &quot;</span> &lt;&lt; slot &lt;&lt; <span class="stringliteral">&quot; FE &quot;</span> &lt;&lt; fe &lt;&lt; std::endl;
<a name="l01353"></a>01353       }
<a name="l01354"></a>01354       <span class="keywordflow">else</span> {
<a name="l01355"></a>01355         std::cout &lt;&lt; <span class="stringliteral">&quot;ERROR: setting of module &quot;</span> &lt;&lt; module &lt;&lt; <span class="stringliteral">&quot; connected to crate &quot;</span> &lt;&lt; crate &lt;&lt; <span class="stringliteral">&quot; slot &quot;</span> &lt;&lt; slot &lt;&lt; <span class="stringliteral">&quot; FE &quot;</span> &lt;&lt; fe &lt;&lt; std::endl;
<a name="l01356"></a>01356         std::cout &lt;&lt; <span class="stringliteral">&quot;       is in conflict with: &quot;</span> &lt;&lt; std::endl;
<a name="l01357"></a>01357         <span class="keywordflow">if</span> ( _connectionVmoduleAvailable.at(module) ) {
<a name="l01358"></a>01358           <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> connectionIndex = _connectionVmodule.at(module);
<a name="l01359"></a>01359           std::cout  &lt;&lt; <span class="stringliteral">&quot;setting of module &quot;</span> &lt;&lt; module &lt;&lt; <span class="stringliteral">&quot; connected to crate &quot;</span> &lt;&lt; getCrateFromModuleConnectionIndex(connectionIndex) &lt;&lt; <span class="stringliteral">&quot; slot &quot;</span> &lt;&lt; getSlotFromModuleConnectionIndex(connectionIndex) &lt;&lt; <span class="stringliteral">&quot; FE &quot;</span> &lt;&lt; getFeFromModuleConnectionIndex(connectionIndex) &lt;&lt; std::endl;
<a name="l01360"></a>01360         }
<a name="l01361"></a>01361         <span class="keywordflow">if</span> ( _connectionAvailable.at(getIndexModuleConnection(crate,slot, fe)) ) {
<a name="l01362"></a>01362           <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> existingModule = _moduleVconnection.at(getIndexModuleConnection(crate,slot, fe));
<a name="l01363"></a>01363           std::cout  &lt;&lt; <span class="stringliteral">&quot;setting of module &quot;</span> &lt;&lt; existingModule &lt;&lt; <span class="stringliteral">&quot; connected to crate &quot;</span> &lt;&lt; crate &lt;&lt; <span class="stringliteral">&quot; slot &quot;</span> &lt;&lt; slot &lt;&lt; <span class="stringliteral">&quot; FE &quot;</span> &lt;&lt; fe &lt;&lt; std::endl;
<a name="l01364"></a>01364         }
<a name="l01365"></a>01365       }
<a name="l01366"></a>01366     }
<a name="l01367"></a>01367 
<a name="l01368"></a>01368     <span class="keywordtype">void</span> setModuleType(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> typeName) {
<a name="l01369"></a>01369       <span class="keywordflow">if</span> ( ! _moduleAvailable.at(module) ) {
<a name="l01370"></a>01370         _typeVmodule.at(module) = _moduleTypeIndex.at(typeName);
<a name="l01371"></a>01371         _moduleAvailable.at(module) = <span class="keyword">true</span>;
<a name="l01372"></a>01372       }
<a name="l01373"></a>01373       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( _moduleAvailable.at(module) &amp;&amp; ( _typeVmodule.at(module) == _moduleTypeIndex.at(typeName) ) ) {
<a name="l01374"></a>01374         std::cout  &lt;&lt; <span class="stringliteral">&quot;WARNING: double setting of module type name &quot;</span> &lt;&lt; typeName &lt;&lt; <span class="stringliteral">&quot; for &quot;</span> &lt;&lt; module &lt;&lt; std::endl;
<a name="l01375"></a>01375       }
<a name="l01376"></a>01376       <span class="keywordflow">else</span> {
<a name="l01377"></a>01377         std::cout  &lt;&lt; <span class="stringliteral">&quot;ERROR: setting of module type name &quot;</span> &lt;&lt; typeName &lt;&lt; <span class="stringliteral">&quot; for &quot;</span> &lt;&lt; module &lt;&lt; std::endl
<a name="l01378"></a>01378                    &lt;&lt; <span class="stringliteral">&quot;       conflicts with previous setting of type name&quot;</span> &lt;&lt; _moduleTypeName.at(_typeVmodule.at(module)) &lt;&lt; std::endl;
<a name="l01379"></a>01379       }
<a name="l01380"></a>01380 
<a name="l01381"></a>01381     }
<a name="l01382"></a>01382 
<a name="l01383"></a>01383 
<a name="l01384"></a>01384     <span class="keywordtype">void</span> setModuleK(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> module, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> K) {
<a name="l01385"></a>01385       <span class="keywordflow">if</span> ( ! _kVmoduleAvailable.at(module) &amp;&amp; ! _kAvailable.at(K) ) {
<a name="l01386"></a>01386 
<a name="l01387"></a>01387         _kVmodule.at(module) = K;
<a name="l01388"></a>01388         _kVmoduleAvailable.at(module) = <span class="keyword">true</span>;
<a name="l01389"></a>01389 
<a name="l01390"></a>01390         _moduleVk.at(K) = module;
<a name="l01391"></a>01391         _kAvailable.at(K) = <span class="keyword">true</span>;
<a name="l01392"></a>01392 
<a name="l01393"></a>01393       }
<a name="l01394"></a>01394       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (    _kVmoduleAvailable.at(module) &amp;&amp; _kAvailable.at(K)
<a name="l01395"></a>01395                    &amp;&amp; _kVmodule.at(module) == K     &amp;&amp; _moduleVk.at(K) == module ) {
<a name="l01396"></a>01396         std::cout  &lt;&lt; <span class="stringliteral">&quot;WARNING: double setting of module &quot;</span> &lt;&lt; module &lt;&lt; <span class="stringliteral">&quot; and K &quot;</span> &lt;&lt; K &lt;&lt; std::endl;
<a name="l01397"></a>01397       }
<a name="l01398"></a>01398       <span class="keywordflow">else</span> {
<a name="l01399"></a>01399         std::cout  &lt;&lt; <span class="stringliteral">&quot;ERROR: setting of module &quot;</span> &lt;&lt; module &lt;&lt; <span class="stringliteral">&quot; and K &quot;</span> &lt;&lt; K &lt;&lt; std::endl
<a name="l01400"></a>01400                    &lt;&lt; <span class="stringliteral">&quot;       conflicts with: &quot;</span> &lt;&lt; std::endl;
<a name="l01401"></a>01401         <span class="keywordflow">if</span> ( _kAvailable.at(K) ) std::cout &lt;&lt; <span class="stringliteral">&quot;           module &quot;</span> &lt;&lt; _moduleVk.at(K) &lt;&lt; <span class="stringliteral">&quot; K &quot;</span> &lt;&lt; K &lt;&lt;  std::endl;
<a name="l01402"></a>01402         <span class="keywordflow">if</span> ( _kVmoduleAvailable.at(module) ) std::cout &lt;&lt; <span class="stringliteral">&quot;           module &quot;</span> &lt;&lt; module &lt;&lt; <span class="stringliteral">&quot; K &quot;</span> &lt;&lt; _kVmodule.at(module) &lt;&lt; std::endl;
<a name="l01403"></a>01403 
<a name="l01404"></a>01404       }
<a name="l01405"></a>01405     }
<a name="l01406"></a>01406 
<a name="l01407"></a>01407     <span class="keywordtype">void</span> setModuleTypeIJChipChannel(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> moduleTypeName, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> I, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> J, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sizeI, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sizeJ, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> chip, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> channel) {
<a name="l01408"></a>01408       <span class="comment">//      std::cout &lt;&lt; &quot;setting moduleTyp &quot; &lt;&lt; moduleType &lt;&lt; &quot; I &quot; &lt;&lt; I &lt;&lt; &quot; J &quot; &lt;&lt; J &lt;&lt; &quot; sizeI &quot; &lt;&lt; sizeI &lt;&lt; &quot; sizeJ &quot; &lt;&lt; sizeJ &lt;&lt; &quot; chip &quot; &lt;&lt; chip &lt;&lt; &quot; chan &quot; &lt;&lt; channel &lt;&lt; std::endl;</span>
<a name="l01409"></a>01409 
<a name="l01410"></a>01410       <span class="keywordflow">if</span> (! moduleTypeAvailable(moduleTypeName))
<a name="l01411"></a>01411         <span class="keywordflow">throw</span> BadDataException(<span class="stringliteral">&quot;setModuleTypeIJChipChannel: moduleTypeName is unknown&quot;</span>);
<a name="l01412"></a>01412 
<a name="l01413"></a>01413       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> moduleType = _moduleTypeIndex.at(moduleTypeName);
<a name="l01414"></a>01414 
<a name="l01415"></a>01415       <span class="keywordflow">if</span> (    ! _chipChanAvailable.at(moduleType).at(getIndexChan(chip,channel))
<a name="l01416"></a>01416               &amp;&amp; ! _ijAvailable.at(moduleType).at(getIndexIJ(I,J)) ) {
<a name="l01417"></a>01417 
<a name="l01418"></a>01418         _ijVchan.at(moduleType).at(getIndexChan(chip,channel)) = getIndexIJ(I,J);
<a name="l01419"></a>01419         _chipChanAvailable.at(moduleType).at(getIndexChan(chip,channel)) = <span class="keyword">true</span>;
<a name="l01420"></a>01420 
<a name="l01421"></a>01421         _chanVij.at(moduleType).at(getIndexIJ(I,J)) = getIndexChan(chip,channel);
<a name="l01422"></a>01422         _ijAvailable.at(moduleType).at(getIndexIJ(I,J)) = <span class="keyword">true</span>;
<a name="l01423"></a>01423 
<a name="l01424"></a>01424         _sizeIVchan.at(moduleType).at(getIndexChan(chip,channel)) = sizeI;
<a name="l01425"></a>01425         _sizeJVchan.at(moduleType).at(getIndexChan(chip,channel)) = sizeJ;
<a name="l01426"></a>01426 
<a name="l01427"></a>01427         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=I;i&lt;I+sizeI;++i)
<a name="l01428"></a>01428           <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j=J;j&lt;J+sizeJ;++j)
<a name="l01429"></a>01429             <span class="keywordflow">if</span> (!(i==I &amp;&amp; j==J) ) {
<a name="l01430"></a>01430               <span class="keywordflow">if</span> (_ijAvailable.at(moduleType).at(getIndexIJ(i,j)) || _ijSecondaryAvailable.at(moduleType).at(getIndexIJ(i,j))) {
<a name="l01431"></a>01431                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> chanindex = _chanVij.at(moduleType).at(getIndexIJ(i,j));
<a name="l01432"></a>01432 
<a name="l01433"></a>01433                 std::cout  &lt;&lt; <span class="stringliteral">&quot;ERROR: setting of moduleTyp &quot;</span> &lt;&lt; moduleTypeName &lt;&lt; <span class="stringliteral">&quot; I &quot;</span> &lt;&lt; I &lt;&lt; <span class="stringliteral">&quot; J &quot;</span> &lt;&lt; J &lt;&lt; <span class="stringliteral">&quot; sizeI &quot;</span> &lt;&lt; sizeI &lt;&lt; <span class="stringliteral">&quot; sizeJ &quot;</span> &lt;&lt; sizeJ &lt;&lt; <span class="stringliteral">&quot; chip &quot;</span> &lt;&lt; chip &lt;&lt; <span class="stringliteral">&quot; chan &quot;</span> &lt;&lt; channel &lt;&lt; std::endl
<a name="l01434"></a>01434                            &lt;&lt; <span class="stringliteral">&quot;       overlaps with:&quot;</span>
<a name="l01435"></a>01435                            &lt;&lt; <span class="stringliteral">&quot; I &quot;</span> &lt;&lt; getIFromIJIndex(_ijVchan.at(moduleType).at(chanindex))
<a name="l01436"></a>01436                            &lt;&lt; <span class="stringliteral">&quot; J &quot;</span> &lt;&lt; getJFromIJIndex(_ijVchan.at(moduleType).at(chanindex))
<a name="l01437"></a>01437                            &lt;&lt; <span class="stringliteral">&quot; sizeI &quot;</span> &lt;&lt; _sizeIVchan.at(moduleType).at(chanindex)
<a name="l01438"></a>01438                            &lt;&lt; <span class="stringliteral">&quot; sizeJ &quot;</span> &lt;&lt; _sizeIVchan.at(moduleType).at(chanindex)
<a name="l01439"></a>01439                            &lt;&lt; <span class="stringliteral">&quot; chip &quot;</span> &lt;&lt; getChipFromChanIndex(chanindex) &lt;&lt; <span class="stringliteral">&quot; chan &quot;</span> &lt;&lt; getChanFromChanIndex(chanindex) &lt;&lt; std::endl
<a name="l01440"></a>01440                            &lt;&lt; <span class="stringliteral">&quot; at I &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; J &quot;</span> &lt;&lt; j &lt;&lt; std::endl;
<a name="l01441"></a>01441 
<a name="l01442"></a>01442               }
<a name="l01443"></a>01443 
<a name="l01444"></a>01444               _chanVij.at(moduleType).at(getIndexIJ(i,j)) = getIndexChan(chip,channel);
<a name="l01445"></a>01445               _ijSecondaryAvailable.at(moduleType).at(getIndexIJ(i,j)) = <span class="keyword">true</span>;
<a name="l01446"></a>01446             }
<a name="l01447"></a>01447 
<a name="l01448"></a>01448       }
<a name="l01449"></a>01449       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (    _chipChanAvailable.at(moduleType).at(getIndexChan(chip,channel))
<a name="l01450"></a>01450                    &amp;&amp; _ijAvailable.at(moduleType).at(getIndexIJ(I,J))
<a name="l01451"></a>01451                    &amp;&amp; ( _ijVchan.at(moduleType).at(getIndexChan(chip,channel)) == getIndexIJ(I,J) )
<a name="l01452"></a>01452                    &amp;&amp; ( _chanVij.at(moduleType).at(getIndexIJ(I,J)) == getIndexChan(chip,channel) )
<a name="l01453"></a>01453                    &amp;&amp; ( _sizeIVchan.at(moduleType).at(getIndexChan(chip,channel)) == sizeI )
<a name="l01454"></a>01454                    &amp;&amp; ( _sizeJVchan.at(moduleType).at(getIndexChan(chip,channel)) == sizeJ ) ) {
<a name="l01455"></a>01455 
<a name="l01456"></a>01456         std::cout  &lt;&lt; <span class="stringliteral">&quot;WARNING: double setting of moduleTyp &quot;</span> &lt;&lt; moduleTypeName &lt;&lt; <span class="stringliteral">&quot; I &quot;</span> &lt;&lt; I &lt;&lt; <span class="stringliteral">&quot; J &quot;</span> &lt;&lt; J &lt;&lt; <span class="stringliteral">&quot; sizeI &quot;</span> &lt;&lt; sizeI &lt;&lt; <span class="stringliteral">&quot; sizeJ &quot;</span> &lt;&lt; sizeJ &lt;&lt; <span class="stringliteral">&quot; chip &quot;</span> &lt;&lt; chip &lt;&lt; <span class="stringliteral">&quot; chan &quot;</span> &lt;&lt; channel &lt;&lt; std::endl;
<a name="l01457"></a>01457       }
<a name="l01458"></a>01458       <span class="keywordflow">else</span> {
<a name="l01459"></a>01459         std::cout  &lt;&lt; <span class="stringliteral">&quot;ERROR: setting of moduleTyp &quot;</span> &lt;&lt; moduleTypeName &lt;&lt; <span class="stringliteral">&quot; I &quot;</span> &lt;&lt; I &lt;&lt; <span class="stringliteral">&quot; J &quot;</span> &lt;&lt; J &lt;&lt; <span class="stringliteral">&quot; sizeI &quot;</span> &lt;&lt; sizeI &lt;&lt; <span class="stringliteral">&quot; sizeJ &quot;</span> &lt;&lt; sizeJ &lt;&lt; <span class="stringliteral">&quot; chip &quot;</span> &lt;&lt; chip &lt;&lt; <span class="stringliteral">&quot; chan &quot;</span> &lt;&lt; channel &lt;&lt; std::endl
<a name="l01460"></a>01460                    &lt;&lt; <span class="stringliteral">&quot;       is in conflict with &quot;</span> &lt;&lt; std::endl;
<a name="l01461"></a>01461         <span class="keywordflow">if</span> (_chipChanAvailable.at(moduleType).at(getIndexChan(chip,channel))) {
<a name="l01462"></a>01462           <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ijindex = _ijVchan.at(moduleType).at(getIndexChan(chip,channel));
<a name="l01463"></a>01463           std::cout &lt;&lt; <span class="stringliteral">&quot;moduleType &quot;</span> &lt;&lt; moduleTypeName &lt;&lt; <span class="stringliteral">&quot; I &quot;</span> &lt;&lt; getIFromIJIndex(ijindex) &lt;&lt; <span class="stringliteral">&quot; J &quot;</span> &lt;&lt; getJFromIJIndex(ijindex) &lt;&lt; <span class="stringliteral">&quot; sizeI &quot;</span> &lt;&lt; _sizeIVchan.at(moduleType).at(getIndexChan(chip,channel)) &lt;&lt; <span class="stringliteral">&quot; sizeJ &quot;</span> &lt;&lt; _sizeJVchan.at(moduleType).at(getIndexChan(chip,channel)) &lt;&lt; <span class="stringliteral">&quot; chip &quot;</span> &lt;&lt; chip &lt;&lt; <span class="stringliteral">&quot; chan &quot;</span> &lt;&lt; channel &lt;&lt; std::endl;
<a name="l01464"></a>01464         }
<a name="l01465"></a>01465         <span class="keywordflow">if</span> (_ijAvailable.at(moduleType).at(getIndexIJ(I,J))) {
<a name="l01466"></a>01466           <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> chanindex = _chanVij.at(moduleType).at(getIndexIJ(I,J));
<a name="l01467"></a>01467           std::cout &lt;&lt; <span class="stringliteral">&quot;moduleType &quot;</span> &lt;&lt; moduleTypeName &lt;&lt; <span class="stringliteral">&quot; I &quot;</span> &lt;&lt; I &lt;&lt; <span class="stringliteral">&quot; J &quot;</span> &lt;&lt; J  &lt;&lt; <span class="stringliteral">&quot; sizeI &quot;</span> &lt;&lt; _sizeIVchan.at(moduleType).at(chanindex) &lt;&lt; <span class="stringliteral">&quot; sizeJ &quot;</span> &lt;&lt; _sizeJVchan.at(moduleType).at(chanindex) &lt;&lt; <span class="stringliteral">&quot; chip &quot;</span> &lt;&lt; getChipFromChanIndex(chanindex) &lt;&lt; <span class="stringliteral">&quot; chip &quot;</span> &lt;&lt; getChanFromChanIndex(chanindex) &lt;&lt; std::endl;
<a name="l01468"></a>01468         }
<a name="l01469"></a>01469       }
<a name="l01470"></a>01470     }
<a name="l01471"></a>01471 
<a name="l01472"></a>01472     <span class="comment">//fill functions</span>
<a name="l01473"></a>01473 
<a name="l01481"></a>01481     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1AhcMapper.html#ac73575dd541b8d4a392dfd6c60aa0da7" title="sets the mapping information in the class, call after fillModuleDescription">fillModuleConnection</a>(<span class="keyword">const</span> lcio::LCCollection* col);
<a name="l01491"></a>01491     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1AhcMapper.html#a82a573535ff437f989ecc52d2e8a7f8e" title="sets the module layout information in the class, module connection information will...">fillModuleDescription</a>(<span class="keyword">const</span> lcio::LCCollection* col);
<a name="l01492"></a>01492 
<a name="l01493"></a>01493 
<a name="l01494"></a>01494     <span class="comment">// helper functions</span>
<a name="l01495"></a>01495     <span class="keywordtype">void</span> getChipChannelForModuleDescriptionID(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> moduleType, <span class="keywordtype">int</span> &amp;chip, <span class="keywordtype">int</span> &amp;channel) <span class="keyword">const</span> ;
<a name="l01496"></a>01496     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getCombinedModuleType(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> moduleType) <span class="keyword">const</span> ;
<a name="l01497"></a>01497     <span class="keywordtype">int</span> correctCellIndex(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> moduleType, <span class="keyword">const</span> <span class="keywordtype">int</span> cellIndex) <span class="keyword">const</span>;
<a name="l01498"></a>01498     <span class="keyword">const</span> std::string printIfAvailable(<span class="keywordtype">bool</span> available, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> value) <span class="keyword">const</span>;
<a name="l01499"></a>01499 
<a name="l01500"></a>01500     <span class="comment">//private variables</span>
<a name="l01501"></a>01501 
<a name="l01502"></a>01502 
<a name="l01503"></a>01503     indexMap_t                _crateIndex;
<a name="l01504"></a>01504     std::vector&lt;unsigned int&gt; _crateNumber;
<a name="l01505"></a>01505 
<a name="l01506"></a>01506     std::vector&lt;unsigned int&gt; _slotIndex;
<a name="l01507"></a>01507     std::vector&lt;unsigned int&gt; _slotNumber;
<a name="l01508"></a>01508     std::vector&lt;bool&gt;         _slotAvailable;
<a name="l01509"></a>01509 
<a name="l01510"></a>01510     std::vector&lt;bool&gt;         _connectionAvailable;
<a name="l01511"></a>01511 
<a name="l01512"></a>01512     std::vector&lt;bool&gt;         _moduleAvailable;
<a name="l01513"></a>01513 
<a name="l01514"></a>01514     std::vector&lt;unsigned int&gt; _typeVmodule;
<a name="l01515"></a>01515 
<a name="l01516"></a>01516     std::vector&lt;unsigned int&gt; _connectionVmodule;
<a name="l01517"></a>01517     std::vector&lt;bool&gt;         _connectionVmoduleAvailable;
<a name="l01518"></a>01518     std::vector&lt;unsigned int&gt; _moduleVconnection;
<a name="l01519"></a>01519 
<a name="l01520"></a>01520     std::vector&lt;unsigned int&gt; _kVmodule;
<a name="l01521"></a>01521     std::vector&lt;bool&gt;         _kVmoduleAvailable;
<a name="l01522"></a>01522 
<a name="l01523"></a>01523     std::vector&lt;unsigned int&gt; _moduleVk;
<a name="l01524"></a>01524     std::vector&lt;bool&gt;         _kAvailable;
<a name="l01525"></a>01525 
<a name="l01526"></a>01526 
<a name="l01527"></a>01527 
<a name="l01528"></a>01528 
<a name="l01529"></a>01529 
<a name="l01530"></a>01530     std::vector&lt;unsigned int&gt;               _moduleTypeName;
<a name="l01531"></a>01531     std::vector&lt;unsigned int&gt;               _moduleTypeIndex;
<a name="l01532"></a>01532     std::vector&lt;bool        &gt;               _moduleTypeAvailable;
<a name="l01533"></a>01533 
<a name="l01534"></a>01534     std::vector&lt;std::vector&lt;unsigned int&gt; &gt; _ijVchan;
<a name="l01535"></a>01535     std::vector&lt;std::vector&lt;bool&gt; &gt;         _chipChanAvailable;
<a name="l01536"></a>01536 
<a name="l01537"></a>01537     std::vector&lt;std::vector&lt;unsigned int&gt; &gt; _chanVij;
<a name="l01538"></a>01538     std::vector&lt;std::vector&lt;bool&gt; &gt;         _ijAvailable;
<a name="l01539"></a>01539     std::vector&lt;std::vector&lt;bool&gt; &gt;         _ijSecondaryAvailable;
<a name="l01540"></a>01540 
<a name="l01541"></a>01541     std::vector&lt;std::vector&lt;unsigned int&gt; &gt; _sizeIVchan;
<a name="l01542"></a>01542     std::vector&lt;std::vector&lt;unsigned int&gt; &gt; _sizeJVchan;
<a name="l01543"></a>01543 
<a name="l01544"></a>01544 
<a name="l01545"></a>01545 
<a name="l01546"></a>01546   };
<a name="l01547"></a>01547 }
<a name="l01548"></a>01548 
<a name="l01549"></a>01549 
<a name="l01550"></a>01550 
<a name="l01551"></a>01551 
<a name="l01552"></a>01552 
<a name="l01553"></a>01553 <span class="preprocessor">#endif //AhcMapper_hh</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 1 Dec 2017 for CALICE_USERLIB by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
