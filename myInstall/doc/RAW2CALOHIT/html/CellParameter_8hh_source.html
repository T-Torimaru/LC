<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>RAW2CALOHIT: CellParameter.hh Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_f98b43a53f5533225f05987ae358305b.html">calice_reco</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_8656c002b32f5afd83fbcb1fc9f618b8.html">raw2calohit</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_00bb554db34f7d161363d731ebcfc1c3.html">include</a>
  </div>
</div>
<div class="contents">
<h1>CellParameter.hh</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef CellParameter_hh</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define CellParameter_hh</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &quot;lcio.h&quot;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &quot;UTIL/LCFixedObject.h&quot;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;sstream&gt;</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="preprocessor">#ifdef BOUNDARY_CHECK</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span><span class="preprocessor">#  include &lt;stdexcept&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#endif</span>
<a name="l00011"></a>00011 <span class="preprocessor"></span>
<a name="l00012"></a>00012 <span class="keyword">namespace </span>CALICE {
<a name="l00013"></a>00013 
<a name="l00014"></a>00014   <span class="comment">// Float_t, UInt_t, Bool_t</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;RtypesSubSet.h&gt;</span>
<a name="l00016"></a>00016   <span class="comment">// sqrt</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00018"></a>00018   <span class="comment">// FLT_MAX</span>
<a name="l00019"></a>00019 <span class="preprocessor">#ifndef __APPLE__ </span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#include &lt;values.h&gt;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#else</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">#include &lt;limits.h&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;float.h&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#endif</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span>
<a name="l00026"></a>00026 
<a name="l00027"></a>00027   <span class="keyword">enum</span> ECellParameterFloatType {
<a name="l00028"></a>00028     kCellParameterFloatPedestal,
<a name="l00029"></a>00029     kCellParameterFloatNoise,
<a name="l00030"></a>00030     kCellParameterFloatOldPedestal,
<a name="l00031"></a>00031     kCellParameterFloatOldNoise,
<a name="l00032"></a>00032     kCellParameterFloatADCMemoryFirst,
<a name="l00033"></a>00033     kCellParameterFloatADCMemory2,
<a name="l00034"></a>00034     kCellParameterFloatADCMemory3,
<a name="l00035"></a>00035     kCellParameterFloatADCMemory4,
<a name="l00036"></a>00036     kCellParameterFloatADCMemoryLast,
<a name="l00037"></a>00037     kNCellParameterFloats
<a name="l00038"></a>00038   };
<a name="l00039"></a>00039   <span class="keyword">enum</span> ECellParameterIntType {
<a name="l00040"></a>00040     kCellParameterIntNValues,
<a name="l00041"></a>00041     kCellParameterIntSaturationCounter,
<a name="l00042"></a>00042     kCellParameterIntHitCounter,
<a name="l00043"></a>00043     kCellParameterIntNPedestalChanges,
<a name="l00044"></a>00044     kCellParameterIntADCMemoryWritePos,
<a name="l00045"></a>00045 <span class="preprocessor">#ifdef WITH_CELL_PAR_INDEX</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>    kCellParameterIntModuleIndex,
<a name="l00047"></a>00047     kCellParameterIntCellIndex,
<a name="l00048"></a>00048 <span class="preprocessor">#endif</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span>    kNCellParameterInts
<a name="l00050"></a>00050   };
<a name="l00051"></a>00051 
<a name="l00052"></a>00052   <span class="comment">// ATTENTION: some storage cells are multipurpose storage cells</span>
<a name="l00053"></a>00053   <span class="comment">// You cannot</span>
<a name="l00054"></a>00054   <span class="comment">//  const unsigned short kCellParameterFloatSum=kCellParameterFloatOldPedestal;  /**&lt; use the same storage cell for the sums as used to store the old pedestals</span>
<a name="l00055"></a>00055   <span class="comment">//                                                                              (cannot be used after the pedestals are adjusted for the first time).*/</span>
<a name="l00056"></a>00056   <span class="comment">//  const unsigned short kCellParameterFloatSum2=kCellParameterFloatOldNoise;    /**&lt; use the same storage cell for the sums as used to store the old noise</span>
<a name="l00057"></a>00057   <span class="comment">//                                                                              (cannot be used after the pedestals are adjusted for the first time).*/</span>
<a name="l00058"></a>00058   <span class="comment">//  const unsigned short kCellParameterFloatMaxValue=kCellParameterFloatPedestal;/**&lt; use the same storage cell for the maximum values as used to store the pedestal</span>
<a name="l00059"></a>00059   <span class="comment">//                                                                              (cannot be used after the pedestals have been calculated for the first time).*/</span>
<a name="l00060"></a>00060 <span class="preprocessor">#define kCellParameterFloatMaxValue kCellParameterFloatPedestal</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span><span class="preprocessor">#define kCellParameterFloatSum      kCellParameterFloatOldPedestal</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span><span class="preprocessor">#define kCellParameterFloatSum2     kCellParameterFloatOldNoise</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span>
<a name="l00064"></a>00064   <span class="keyword">inline</span> Double_t sqr(Double_t a) {<span class="keywordflow">return</span> a*a;}
<a name="l00065"></a>00065 
<a name="l00070"></a><a class="code" href="classCALICE_1_1CellParameter.html">00070</a>   <span class="keyword">class </span><a class="code" href="classCALICE_1_1CellParameter.html" title="Information about a pad: Pedestal, noise, etc.">CellParameter</a> : <span class="keyword">public</span> LCFixedObject&lt;kNCellParameterInts,kNCellParameterFloats,0&gt;
<a name="l00071"></a>00071   {
<a name="l00072"></a>00072   <span class="keyword">public</span>:
<a name="l00073"></a>00073     <a class="code" href="classCALICE_1_1CellParameter.html" title="Information about a pad: Pedestal, noise, etc.">CellParameter</a>() : LCFixedObject&lt;kNCellParameterInts,kNCellParameterFloats,0&gt;() { resetAll();};
<a name="l00074"></a>00074 
<a name="l00077"></a><a class="code" href="classCALICE_1_1CellParameter.html#a3dbf58dc25acfd28b79bde1793d97cbe">00077</a>     <a class="code" href="classCALICE_1_1CellParameter.html#a3dbf58dc25acfd28b79bde1793d97cbe" title="&amp;#39;Copy constructor&amp;#39; needed to interpret LCCollection read from file/database...">CellParameter</a>(LCObject* obj) : LCFixedObject&lt;kNCellParameterInts,kNCellParameterFloats,0&gt;(obj) { }
<a name="l00078"></a>00078 
<a name="l00079"></a>00079     ~<a class="code" href="classCALICE_1_1CellParameter.html" title="Information about a pad: Pedestal, noise, etc.">CellParameter</a>() {
<a name="l00080"></a>00080     };
<a name="l00081"></a>00081 
<a name="l00086"></a><a class="code" href="classCALICE_1_1CellParameter.html#a6a81bd8e46ad7e4fb8df9847ca4397a5">00086</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#a6a81bd8e46ad7e4fb8df9847ca4397a5" title="Reset the sums which are used to calculate the pedestals and the noise.">resetSums</a>() {<a class="code" href="classCALICE_1_1CellParameter.html#acd7683bda27b9dc1a3b9bf9dd67fdc69" title="Set the number of values added to the sums.">setNValues</a>(0); <a class="code" href="classCALICE_1_1CellParameter.html#aed3095e5d463fbd47ad6175e130e25c0" title="Set the sum of the adc values (used to calculate the pedestal).">setSum</a>(0), <a class="code" href="classCALICE_1_1CellParameter.html#ae643aab6a440b41afc6d4190988112d0" title="Set the sum of the adc values squared (used to calculate the noise).">setSum2</a>(0);};
<a name="l00087"></a>00087     <span class="keywordtype">void</span> resetSaturationCounter() {<a class="code" href="classCALICE_1_1CellParameter.html#a0ca243bcfe86c85a767ac69082667a5f" title="Set the value of the saturation counter.">setSaturationCounter</a>(0);};
<a name="l00088"></a>00088     <span class="keywordtype">void</span> resetHitCounter() {<a class="code" href="classCALICE_1_1CellParameter.html#aefdf93e60fbead8bd62d09ef11f3d540" title="Set the value of the hit counter.">setNHits</a>(0);};
<a name="l00089"></a>00089     <span class="keywordtype">void</span> resetAll()
<a name="l00090"></a>00090     {<a class="code" href="classCALICE_1_1CellParameter.html#add7570a3502df326aa422603be276c8a" title="set the maximum value for a cell (shares storage with pedestal).">setMaxValue</a>( -1.* FLT_MAX);<a class="code" href="classCALICE_1_1CellParameter.html#a4ecc22743f2049d0558d6d625038907d" title="Set the noise.">setNoise</a>(FLT_MAX);resetHitCounter();resetSaturationCounter();<a class="code" href="classCALICE_1_1CellParameter.html#a6a81bd8e46ad7e4fb8df9847ca4397a5" title="Reset the sums which are used to calculate the pedestals and the noise.">resetSums</a>();<a class="code" href="classCALICE_1_1CellParameter.html#a1980533fe8a284bed40839d8a9fcf523" title="Set the value of the pedestal change counter.">setNPedestalChanges</a>(0);};
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 
<a name="l00096"></a><a class="code" href="classCALICE_1_1CellParameter.html#aed3095e5d463fbd47ad6175e130e25c0">00096</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#aed3095e5d463fbd47ad6175e130e25c0" title="Set the sum of the adc values (used to calculate the pedestal).">setSum</a>(Float_t a_sum) {obj()-&gt;setFloatVal( kCellParameterFloatSum,a_sum);};
<a name="l00097"></a>00097 
<a name="l00101"></a><a class="code" href="classCALICE_1_1CellParameter.html#afa7c61c8a0fd6f4b93d5113c2ee30285">00101</a>     Float_t <a class="code" href="classCALICE_1_1CellParameter.html#afa7c61c8a0fd6f4b93d5113c2ee30285" title="Get the sum of the adc values (used to calculate the pedestal).">getSum</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> getFloatVal( kCellParameterFloatSum);};
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 
<a name="l00107"></a><a class="code" href="classCALICE_1_1CellParameter.html#ae643aab6a440b41afc6d4190988112d0">00107</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#ae643aab6a440b41afc6d4190988112d0" title="Set the sum of the adc values squared (used to calculate the noise).">setSum2</a>(Float_t a_sum2) {obj()-&gt;setFloatVal( kCellParameterFloatSum2,a_sum2);};
<a name="l00108"></a>00108 
<a name="l00112"></a><a class="code" href="classCALICE_1_1CellParameter.html#ac509a47a088106a0fbd2fc2fc17dcca0">00112</a>     Float_t <a class="code" href="classCALICE_1_1CellParameter.html#ac509a47a088106a0fbd2fc2fc17dcca0" title="Get the sum of the adc values squared (used to calculate the noise).">getSum2</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> getFloatVal( kCellParameterFloatSum2);};
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 
<a name="l00117"></a><a class="code" href="classCALICE_1_1CellParameter.html#acd7683bda27b9dc1a3b9bf9dd67fdc69">00117</a>     <span class="keywordtype">void</span>  <a class="code" href="classCALICE_1_1CellParameter.html#acd7683bda27b9dc1a3b9bf9dd67fdc69" title="Set the number of values added to the sums.">setNValues</a>(UInt_t n_values) {obj()-&gt;setIntVal( kCellParameterIntNValues, static_cast&lt;Int_t&gt;(n_values));};
<a name="l00118"></a>00118 
<a name="l00121"></a><a class="code" href="classCALICE_1_1CellParameter.html#a9d83d4f709324d0bbdd464c54aa1a39c">00121</a>     UInt_t <a class="code" href="classCALICE_1_1CellParameter.html#a9d83d4f709324d0bbdd464c54aa1a39c" title="Get the number of values added to the sums.">getNValues</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>UInt_t<span class="keyword">&gt;</span>(getIntVal( kCellParameterIntNValues));};
<a name="l00122"></a>00122 
<a name="l00123"></a>00123 
<a name="l00126"></a><a class="code" href="classCALICE_1_1CellParameter.html#af3c9c24f740b0822c4b996a363507cf5">00126</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#af3c9c24f740b0822c4b996a363507cf5" title="Set the pedestal.">setPedestal</a>(Float_t a_pedestal) {obj()-&gt;setFloatVal( kCellParameterFloatPedestal,a_pedestal);};
<a name="l00127"></a>00127 
<a name="l00131"></a><a class="code" href="classCALICE_1_1CellParameter.html#a3223608e5f680b674e7181b5c4495935">00131</a>     Float_t <a class="code" href="classCALICE_1_1CellParameter.html#a3223608e5f680b674e7181b5c4495935" title="Get the pedestal.">getPedestal</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> getFloatVal( kCellParameterFloatPedestal);};
<a name="l00132"></a>00132 
<a name="l00133"></a>00133 
<a name="l00137"></a><a class="code" href="classCALICE_1_1CellParameter.html#a971b60a79e06210ddc52c25dbf765925">00137</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#a971b60a79e06210ddc52c25dbf765925" title="Set the old pedestal.">setOldPedestal</a>(Float_t an_old_pedestal) {obj()-&gt;setFloatVal( kCellParameterFloatOldPedestal,an_old_pedestal);};
<a name="l00138"></a>00138 
<a name="l00143"></a><a class="code" href="classCALICE_1_1CellParameter.html#ac159d4054fd122bfb2fb6c6730110126">00143</a>     Float_t <a class="code" href="classCALICE_1_1CellParameter.html#ac159d4054fd122bfb2fb6c6730110126" title="Get the old pedestal The result is undefined before the pedestals and the noise have...">getOldPedestal</a>()<span class="keyword"> const  </span>{<span class="keywordflow">return</span> getFloatVal( kCellParameterFloatOldPedestal);};
<a name="l00144"></a>00144 
<a name="l00145"></a>00145 
<a name="l00148"></a><a class="code" href="classCALICE_1_1CellParameter.html#a4ecc22743f2049d0558d6d625038907d">00148</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#a4ecc22743f2049d0558d6d625038907d" title="Set the noise.">setNoise</a>(Float_t a_noise) {obj()-&gt;setFloatVal( kCellParameterFloatNoise,a_noise);};
<a name="l00149"></a>00149 
<a name="l00153"></a><a class="code" href="classCALICE_1_1CellParameter.html#a58d1f99e4ef0452b94fef27d5de1cc1e">00153</a>     Float_t <a class="code" href="classCALICE_1_1CellParameter.html#a58d1f99e4ef0452b94fef27d5de1cc1e" title="Get the noise.">getNoise</a>()<span class="keyword"> const  </span>{<span class="keywordflow">return</span> getFloatVal( kCellParameterFloatNoise);};
<a name="l00154"></a>00154 
<a name="l00158"></a><a class="code" href="classCALICE_1_1CellParameter.html#a2b4a500e8cd39fda7dc51ec89d2b0b81">00158</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#a2b4a500e8cd39fda7dc51ec89d2b0b81" title="Set the old noise.">setOldNoise</a>(Float_t an_old_noise) {obj()-&gt;setFloatVal( kCellParameterFloatOldNoise,an_old_noise);};
<a name="l00159"></a>00159 
<a name="l00164"></a><a class="code" href="classCALICE_1_1CellParameter.html#a3bfb3c568c64aee79f779c649b941dc7">00164</a>     Float_t <a class="code" href="classCALICE_1_1CellParameter.html#a3bfb3c568c64aee79f779c649b941dc7" title="Get the old noise.">getOldNoise</a>()<span class="keyword"> const  </span>{<span class="keywordflow">return</span> getFloatVal( kCellParameterFloatOldNoise);};
<a name="l00165"></a>00165 
<a name="l00166"></a>00166 
<a name="l00174"></a><a class="code" href="classCALICE_1_1CellParameter.html#add7570a3502df326aa422603be276c8a">00174</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#add7570a3502df326aa422603be276c8a" title="set the maximum value for a cell (shares storage with pedestal).">setMaxValue</a>(Float_t a_max_value) {
<a name="l00175"></a>00175       obj()-&gt;setFloatVal( kCellParameterFloatMaxValue, a_max_value);
<a name="l00176"></a>00176     };
<a name="l00177"></a>00177 
<a name="l00182"></a><a class="code" href="classCALICE_1_1CellParameter.html#af1a12f740874cc83f5e35ba5d8d0eefd">00182</a>     Float_t <a class="code" href="classCALICE_1_1CellParameter.html#af1a12f740874cc83f5e35ba5d8d0eefd" title="get the maximum value of a cell (shares storage with pedestal) This function only...">getMaxValue</a>()<span class="keyword"> const </span>{
<a name="l00183"></a>00183       <span class="keywordflow">return</span> getFloatVal( kCellParameterFloatMaxValue);
<a name="l00184"></a>00184     };
<a name="l00185"></a>00185 
<a name="l00190"></a><a class="code" href="classCALICE_1_1CellParameter.html#a199f221d2988995dedbb75b9be43e9ab">00190</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#a199f221d2988995dedbb75b9be43e9ab" title="Build sums used to calculate pedestals and noise.">add</a>(Float_t adc) {
<a name="l00191"></a>00191       obj()-&gt;setFloatVal( kCellParameterFloatSum,   getFloatVal( kCellParameterFloatSum)  + adc      );
<a name="l00192"></a>00192       obj()-&gt;setFloatVal( kCellParameterFloatSum2,  getFloatVal( kCellParameterFloatSum2) + adc *adc );
<a name="l00193"></a>00193       obj()-&gt;setIntVal(   kCellParameterIntNValues, getIntVal(   kCellParameterIntNValues)+ 1        );
<a name="l00194"></a>00194     };
<a name="l00195"></a>00195 
<a name="l00199"></a><a class="code" href="classCALICE_1_1CellParameter.html#a09cb9e322c9b22d1591244eaa1ded505">00199</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#a09cb9e322c9b22d1591244eaa1ded505" title="Subtract a previously added adc value from the sums to return to the prior condition...">sub</a>(Float_t adc) {
<a name="l00200"></a>00200       obj()-&gt;setFloatVal( kCellParameterFloatSum,   getFloatVal( kCellParameterFloatSum)  - adc      );
<a name="l00201"></a>00201       obj()-&gt;setFloatVal( kCellParameterFloatSum2,  getFloatVal( kCellParameterFloatSum2) - adc *adc );
<a name="l00202"></a>00202       obj()-&gt;setIntVal(   kCellParameterIntNValues, getIntVal(   kCellParameterIntNValues)- 1        );
<a name="l00203"></a>00203     }
<a name="l00204"></a>00204 
<a name="l00207"></a><a class="code" href="classCALICE_1_1CellParameter.html#a0548e12eab1fdba4da79dee09bc18aee">00207</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#a0548e12eab1fdba4da79dee09bc18aee" title="Caluclate the pedestal and the noise from the sums.">calculate</a>() {
<a name="l00208"></a>00208       <span class="keyword">const</span> UInt_t n_values=<a class="code" href="classCALICE_1_1CellParameter.html#a9d83d4f709324d0bbdd464c54aa1a39c" title="Get the number of values added to the sums.">getNValues</a>();
<a name="l00209"></a>00209       <span class="keywordflow">if</span> (n_values&gt;1) {
<a name="l00210"></a>00210         <span class="keyword">const</span> Float_t new_pedestal=<a class="code" href="classCALICE_1_1CellParameter.html#afa7c61c8a0fd6f4b93d5113c2ee30285" title="Get the sum of the adc values (used to calculate the pedestal).">getSum</a>()/n_values;
<a name="l00211"></a>00211         <span class="keyword">const</span> Float_t new_noise=sqrt((<a class="code" href="classCALICE_1_1CellParameter.html#ac509a47a088106a0fbd2fc2fc17dcca0" title="Get the sum of the adc values squared (used to calculate the noise).">getSum2</a>()-new_pedestal*<a class="code" href="classCALICE_1_1CellParameter.html#afa7c61c8a0fd6f4b93d5113c2ee30285" title="Get the sum of the adc values (used to calculate the pedestal).">getSum</a>())/(n_values-1));
<a name="l00212"></a>00212 
<a name="l00213"></a>00213         <a class="code" href="classCALICE_1_1CellParameter.html#af3c9c24f740b0822c4b996a363507cf5" title="Set the pedestal.">setPedestal</a>(new_pedestal);
<a name="l00214"></a>00214         <a class="code" href="classCALICE_1_1CellParameter.html#a4ecc22743f2049d0558d6d625038907d" title="Set the noise.">setNoise</a>(new_noise);
<a name="l00215"></a>00215 
<a name="l00216"></a>00216         <a class="code" href="classCALICE_1_1CellParameter.html#a971b60a79e06210ddc52c25dbf765925" title="Set the old pedestal.">setOldPedestal</a>(new_pedestal);
<a name="l00217"></a>00217         <a class="code" href="classCALICE_1_1CellParameter.html#a2b4a500e8cd39fda7dc51ec89d2b0b81" title="Set the old noise.">setOldNoise</a>(new_noise);
<a name="l00218"></a>00218 
<a name="l00219"></a>00219       }
<a name="l00220"></a>00220     };
<a name="l00221"></a>00221 
<a name="l00230"></a><a class="code" href="classCALICE_1_1CellParameter.html#a15bfbaa4918ac7d9aaf841c0483a8a19">00230</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#a15bfbaa4918ac7d9aaf841c0483a8a19" title="Adjust the pedestal and the noise using the new ADC value.">adjustPedestalNoise</a>(Float_t adc, UInt_t keep_n_minus_one) {
<a name="l00231"></a>00231       Float_t old_pedestal=<a class="code" href="classCALICE_1_1CellParameter.html#a3223608e5f680b674e7181b5c4495935" title="Get the pedestal.">getPedestal</a>();
<a name="l00232"></a>00232       Float_t old_noise=<a class="code" href="classCALICE_1_1CellParameter.html#a58d1f99e4ef0452b94fef27d5de1cc1e" title="Get the noise.">getNoise</a>();
<a name="l00233"></a>00233       <a class="code" href="classCALICE_1_1CellParameter.html#a971b60a79e06210ddc52c25dbf765925" title="Set the old pedestal.">setOldPedestal</a>(old_pedestal);
<a name="l00234"></a>00234       <a class="code" href="classCALICE_1_1CellParameter.html#a2b4a500e8cd39fda7dc51ec89d2b0b81" title="Set the old noise.">setOldNoise</a>(old_noise);
<a name="l00235"></a>00235 
<a name="l00236"></a>00236       <span class="comment">// 1) first calculate sum of squares and sum from noise and pedestal</span>
<a name="l00237"></a>00237       <span class="comment">// 2) multiply sum of squares, and sum by (n-1)/n</span>
<a name="l00238"></a>00238       <span class="comment">// 3) add the new value and the new value squared</span>
<a name="l00239"></a>00239       <span class="comment">// 4) calculate new pedestal and new noise</span>
<a name="l00240"></a>00240       Float_t inv_n=1./(keep_n_minus_one+1);
<a name="l00241"></a>00241       Float_t pedestal_sum=old_pedestal*keep_n_minus_one;
<a name="l00242"></a>00242       Float_t new_sum2=sqr(old_noise*(keep_n_minus_one))*inv_n + old_pedestal*pedestal_sum + adc*adc;
<a name="l00243"></a>00243       pedestal_sum+=adc;
<a name="l00244"></a>00244       Float_t new_pedestal = pedestal_sum * inv_n;
<a name="l00245"></a>00245       Float_t new_noise=sqrt((new_sum2-new_pedestal*pedestal_sum)/(keep_n_minus_one));
<a name="l00246"></a>00246 
<a name="l00247"></a>00247       <a class="code" href="classCALICE_1_1CellParameter.html#af3c9c24f740b0822c4b996a363507cf5" title="Set the pedestal.">setPedestal</a>(new_pedestal);
<a name="l00248"></a>00248       <a class="code" href="classCALICE_1_1CellParameter.html#a4ecc22743f2049d0558d6d625038907d" title="Set the noise.">setNoise</a>(new_noise);
<a name="l00249"></a>00249     };
<a name="l00250"></a>00250 
<a name="l00251"></a>00251 
<a name="l00254"></a><a class="code" href="classCALICE_1_1CellParameter.html#ab1ae07641b9b6d188cfc8aa7b6641e0a">00254</a>     Bool_t <a class="code" href="classCALICE_1_1CellParameter.html#ab1ae07641b9b6d188cfc8aa7b6641e0a" title="Return kTRUE if the pad is considered to be dead.">isDead</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> ((UInt_t) <a class="code" href="classCALICE_1_1CellParameter.html#ae4ef4a080c6400a667dd37dd7ce853fd" title="Get the value of the saturation counter.">getSaturationCounter</a>())==((UInt_t) -1);};
<a name="l00255"></a>00255 
<a name="l00260"></a><a class="code" href="classCALICE_1_1CellParameter.html#a0ad31de9b53fc6ebed4c7be6a53e7a57">00260</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#a0ad31de9b53fc6ebed4c7be6a53e7a57" title="Declare the pad to be dead (or revive pad (is_dead=kFALSE).">setDead</a>(Bool_t is_dead=<span class="keyword">true</span>) {<a class="code" href="classCALICE_1_1CellParameter.html#a0ca243bcfe86c85a767ac69082667a5f" title="Set the value of the saturation counter.">setSaturationCounter</a>((is_dead ? (UInt_t) -1 : 0));};
<a name="l00261"></a>00261 
<a name="l00262"></a>00262   <span class="keyword">protected</span>:
<a name="l00266"></a><a class="code" href="classCALICE_1_1CellParameter.html#a0ca243bcfe86c85a767ac69082667a5f">00266</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#a0ca243bcfe86c85a767ac69082667a5f" title="Set the value of the saturation counter.">setSaturationCounter</a>(UInt_t saturation) {obj()-&gt;setIntVal( kCellParameterIntSaturationCounter, static_cast&lt;Int_t&gt;(saturation));};
<a name="l00267"></a>00267 
<a name="l00268"></a>00268   <span class="keyword">public</span>:
<a name="l00274"></a><a class="code" href="classCALICE_1_1CellParameter.html#ae4ef4a080c6400a667dd37dd7ce853fd">00274</a>     UInt_t <a class="code" href="classCALICE_1_1CellParameter.html#ae4ef4a080c6400a667dd37dd7ce853fd" title="Get the value of the saturation counter.">getSaturationCounter</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>UInt_t<span class="keyword">&gt;</span>(getIntVal( kCellParameterIntSaturationCounter));};
<a name="l00275"></a>00275 
<a name="l00279"></a><a class="code" href="classCALICE_1_1CellParameter.html#a79423a46a99deb6623624f7974f414b1">00279</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#a79423a46a99deb6623624f7974f414b1" title="Increment the saturation counter.">incrementSaturationCounter</a>() {<a class="code" href="classCALICE_1_1CellParameter.html#a0ca243bcfe86c85a767ac69082667a5f" title="Set the value of the saturation counter.">setSaturationCounter</a>(<a class="code" href="classCALICE_1_1CellParameter.html#ae4ef4a080c6400a667dd37dd7ce853fd" title="Get the value of the saturation counter.">getSaturationCounter</a>()+1);};
<a name="l00280"></a>00280 
<a name="l00281"></a>00281   <span class="keyword">protected</span>:
<a name="l00285"></a><a class="code" href="classCALICE_1_1CellParameter.html#aefdf93e60fbead8bd62d09ef11f3d540">00285</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#aefdf93e60fbead8bd62d09ef11f3d540" title="Set the value of the hit counter.">setNHits</a>(UInt_t n_hits) {obj()-&gt;setIntVal( kCellParameterIntHitCounter, static_cast&lt;Int_t&gt;(n_hits));};
<a name="l00286"></a>00286   <span class="keyword">public</span>:
<a name="l00287"></a>00287 
<a name="l00291"></a><a class="code" href="classCALICE_1_1CellParameter.html#aaeb9e38b31539b337be9e7b0522005ef">00291</a>     UInt_t <a class="code" href="classCALICE_1_1CellParameter.html#aaeb9e38b31539b337be9e7b0522005ef" title="Get the number of hits.">getNHits</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>UInt_t<span class="keyword">&gt;</span>(getIntVal( kCellParameterIntHitCounter));};
<a name="l00292"></a>00292 
<a name="l00296"></a><a class="code" href="classCALICE_1_1CellParameter.html#ab44ebb0a1c9e33f0fd4dcf7796b6c3de">00296</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#ab44ebb0a1c9e33f0fd4dcf7796b6c3de" title="Increment the hit counter.">incrementNHits</a>() {<a class="code" href="classCALICE_1_1CellParameter.html#aefdf93e60fbead8bd62d09ef11f3d540" title="Set the value of the hit counter.">setNHits</a>(<a class="code" href="classCALICE_1_1CellParameter.html#aaeb9e38b31539b337be9e7b0522005ef" title="Get the number of hits.">getNHits</a>()+1);};
<a name="l00297"></a>00297 
<a name="l00302"></a><a class="code" href="classCALICE_1_1CellParameter.html#a32aaee7ca8e819dae916272e109171f5">00302</a>     Float_t <a class="code" href="classCALICE_1_1CellParameter.html#a32aaee7ca8e819dae916272e109171f5" title="Function which returns the number of hits converted into a float.">getNHitsFloat</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (Float_t) <a class="code" href="classCALICE_1_1CellParameter.html#aaeb9e38b31539b337be9e7b0522005ef" title="Get the number of hits.">getNHits</a>();};
<a name="l00303"></a>00303 
<a name="l00304"></a>00304 
<a name="l00308"></a><a class="code" href="classCALICE_1_1CellParameter.html#ad5b4b06d0eb86e98c21d9119fc3a8d30">00308</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#ad5b4b06d0eb86e98c21d9119fc3a8d30" title="Initialse the array which memorises the last pedestal subtracted values.">initADCMemory</a>() {
<a name="l00309"></a>00309       obj()-&gt;setIntVal( kCellParameterIntADCMemoryWritePos, kCellParameterFloatADCMemoryLast-kCellParameterFloatADCMemoryFirst);
<a name="l00310"></a>00310       Float_t init_value=<a class="code" href="classCALICE_1_1CellParameter.html#a3223608e5f680b674e7181b5c4495935" title="Get the pedestal.">getPedestal</a>();
<a name="l00311"></a>00311       <span class="keywordflow">for</span> (UInt_t memory_cell_i=0; memory_cell_i&lt;=kCellParameterFloatADCMemoryLast-kCellParameterFloatADCMemoryFirst; memory_cell_i++) {
<a name="l00312"></a>00312         <a class="code" href="classCALICE_1_1CellParameter.html#a2150862e4495b17184abcad51b85d67d" title="Memorise an ADC value in the given cell.">setADCMemoryValue</a>(memory_cell_i,init_value);
<a name="l00313"></a>00313       }
<a name="l00314"></a>00314     };
<a name="l00315"></a>00315 
<a name="l00318"></a><a class="code" href="classCALICE_1_1CellParameter.html#a2150862e4495b17184abcad51b85d67d">00318</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#a2150862e4495b17184abcad51b85d67d" title="Memorise an ADC value in the given cell.">setADCMemoryValue</a>(UInt_t memory_cell_i, Float_t an_adc_value)
<a name="l00319"></a>00319 <span class="preprocessor">#ifdef BOUNDARY_CHECK</span>
<a name="l00320"></a>00320 <span class="preprocessor"></span>      <span class="keywordflow">throw</span>(std::range_error)
<a name="l00321"></a>00321 <span class="preprocessor">#endif</span>
<a name="l00322"></a>00322 <span class="preprocessor"></span>    {
<a name="l00323"></a>00323 <span class="preprocessor">#ifdef BOUNDARY_CHECK</span>
<a name="l00324"></a>00324 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (kCellParameterFloatADCMemoryFirst+memory_cell_i&gt;kCellParameterFloatADCMemoryLast) {
<a name="l00325"></a>00325         <span class="keywordflow">throw</span> std::range_error(<span class="stringliteral">&quot;CellParameter::setGroupValue&gt; group index larger than numeber of cells.&quot;</span>);
<a name="l00326"></a>00326       }
<a name="l00327"></a>00327 <span class="preprocessor">#endif</span>
<a name="l00328"></a>00328 <span class="preprocessor"></span>      obj()-&gt;setFloatVal( kCellParameterFloatADCMemoryFirst+memory_cell_i,an_adc_value);
<a name="l00329"></a>00329     };
<a name="l00330"></a>00330 
<a name="l00333"></a><a class="code" href="classCALICE_1_1CellParameter.html#a64123c38f4b0fb4e0c519d2c144d89db">00333</a>     Float_t <a class="code" href="classCALICE_1_1CellParameter.html#a6d46c4d193e8d3bda70f0f6f8a350ef9" title="Get a memorised ADC value.">getADCMemoryValue</a>(UInt_t memory_cell_i) <span class="keyword">const</span>
<a name="l00334"></a>00334 <span class="preprocessor">#ifdef BOUNDARY_CHECK</span>
<a name="l00335"></a>00335 <span class="preprocessor"></span>      <span class="keywordflow">throw</span>(std::range_error)
<a name="l00336"></a>00336 <span class="preprocessor">#endif</span>
<a name="l00337"></a>00337 <span class="preprocessor"></span>    {
<a name="l00338"></a>00338 <span class="preprocessor">#ifdef BOUNDARY_CHECK</span>
<a name="l00339"></a>00339 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (kCellParameterFloatADCMemoryFirst+memory_cell_i&gt;kCellParameterFloatADCMemoryLast) {
<a name="l00340"></a>00340         <span class="keywordflow">throw</span> std::range_error(<span class="stringliteral">&quot;CellParameter::setGroupValue&gt; group index larger than numeber of cells.&quot;</span>);
<a name="l00341"></a>00341       }
<a name="l00342"></a>00342 <span class="preprocessor">#endif</span>
<a name="l00343"></a>00343 <span class="preprocessor"></span>      <span class="keywordflow">return</span> getFloatVal( kCellParameterFloatADCMemoryFirst+memory_cell_i);
<a name="l00344"></a>00344     };
<a name="l00345"></a>00345 
<a name="l00346"></a>00346 
<a name="l00349"></a><a class="code" href="classCALICE_1_1CellParameter.html#a6d667e7086d288b9797ea58407ab6eba">00349</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#a6d667e7086d288b9797ea58407ab6eba" title="Set the current ADC memory cell.">setADCMemoryWritePos</a>(UInt_t memory_cell_i)
<a name="l00350"></a>00350 <span class="preprocessor">#ifdef BOUNDARY_CHECK</span>
<a name="l00351"></a>00351 <span class="preprocessor"></span>      <span class="keywordflow">throw</span>(std::range_error)
<a name="l00352"></a>00352 <span class="preprocessor">#endif</span>
<a name="l00353"></a>00353 <span class="preprocessor"></span>    {
<a name="l00354"></a>00354 <span class="preprocessor">#ifdef BOUNDARY_CHECK</span>
<a name="l00355"></a>00355 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (kCellParameterFloatADCMemoryFirst+memory_cell_i&gt;kCellParameterFloatADCMemoryLast) {
<a name="l00356"></a>00356         <span class="keywordflow">throw</span> std::range_error(<span class="stringliteral">&quot;CellParameter::setGroupValue&gt; group index larger than numeber of cells.&quot;</span>);
<a name="l00357"></a>00357       }
<a name="l00358"></a>00358 <span class="preprocessor">#endif</span>
<a name="l00359"></a>00359 <span class="preprocessor"></span>      obj()-&gt;setIntVal( kCellParameterIntADCMemoryWritePos,memory_cell_i);
<a name="l00360"></a>00360     };
<a name="l00361"></a>00361 
<a name="l00362"></a>00362     <span class="keywordtype">void</span> setNextADCMemory() {
<a name="l00363"></a>00363       UInt_t index=getIntVal(kCellParameterIntADCMemoryWritePos);
<a name="l00364"></a>00364       index++;
<a name="l00365"></a>00365       <span class="keywordflow">if</span> (index&gt;kCellParameterFloatADCMemoryLast-kCellParameterFloatADCMemoryFirst) {
<a name="l00366"></a>00366         index=0;
<a name="l00367"></a>00367       }
<a name="l00368"></a>00368       obj()-&gt;setIntVal( kCellParameterIntADCMemoryWritePos, index);
<a name="l00369"></a>00369     };
<a name="l00370"></a>00370 
<a name="l00373"></a><a class="code" href="classCALICE_1_1CellParameter.html#a6d46c4d193e8d3bda70f0f6f8a350ef9">00373</a>     Float_t <a class="code" href="classCALICE_1_1CellParameter.html#a6d46c4d193e8d3bda70f0f6f8a350ef9" title="Get a memorised ADC value.">getADCMemoryValue</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> getFloatVal( kCellParameterFloatADCMemoryFirst+getIntVal(kCellParameterIntADCMemoryWritePos));};
<a name="l00374"></a>00374 
<a name="l00379"></a><a class="code" href="classCALICE_1_1CellParameter.html#aea4348d37ee17df1cec6c4a2e8c38217">00379</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#aea4348d37ee17df1cec6c4a2e8c38217" title="Memorise an ADC value.">setADCMemoryValue</a>(Float_t pedestal_subtracted_value) {
<a name="l00380"></a>00380       obj()-&gt;setFloatVal( kCellParameterFloatADCMemoryFirst+getIntVal(kCellParameterIntADCMemoryWritePos),pedestal_subtracted_value);
<a name="l00381"></a>00381     };
<a name="l00382"></a>00382 
<a name="l00387"></a><a class="code" href="classCALICE_1_1CellParameter.html#a70a20f2d63910738f6d725fd5db83d4f">00387</a>     Float_t <a class="code" href="classCALICE_1_1CellParameter.html#a70a20f2d63910738f6d725fd5db83d4f" title="Get the mean value of a group of pedestal subtracted ADC values (the maximum is removed)...">getMeanADCValue</a>(Float_t pedestal_subtracted_value) {
<a name="l00388"></a>00388       <span class="comment">// FIXME: why only write values which are different?</span>
<a name="l00389"></a>00389       <span class="comment">//    if (getADCMemoryValue()!=pedestal_subtracted_value) {</span>
<a name="l00390"></a>00390       setNextADCMemory();
<a name="l00391"></a>00391       <a class="code" href="classCALICE_1_1CellParameter.html#a2150862e4495b17184abcad51b85d67d" title="Memorise an ADC value in the given cell.">setADCMemoryValue</a>(pedestal_subtracted_value);
<a name="l00392"></a>00392 
<a name="l00393"></a>00393       UInt_t memory_cell_i=kCellParameterFloatADCMemoryFirst;
<a name="l00394"></a>00394       Float_t max_val=<a class="code" href="classCALICE_1_1CellParameter.html#a6d46c4d193e8d3bda70f0f6f8a350ef9" title="Get a memorised ADC value.">getADCMemoryValue</a>(memory_cell_i);
<a name="l00395"></a>00395       Float_t sum=max_val;
<a name="l00396"></a>00396       <span class="keywordflow">for</span> (; ++memory_cell_i &lt;= kCellParameterFloatADCMemoryLast; ) {
<a name="l00397"></a>00397         Float_t a_value=<a class="code" href="classCALICE_1_1CellParameter.html#a6d46c4d193e8d3bda70f0f6f8a350ef9" title="Get a memorised ADC value.">getADCMemoryValue</a>(memory_cell_i);
<a name="l00398"></a>00398         sum+=a_value;
<a name="l00399"></a>00399         <span class="keywordflow">if</span> (a_value&gt;max_val) max_val=a_value;
<a name="l00400"></a>00400       }
<a name="l00401"></a>00401       sum-=max_val;
<a name="l00402"></a>00402       sum/=--memory_cell_i;
<a name="l00403"></a>00403       <span class="keywordflow">return</span> sum;
<a name="l00404"></a>00404     };
<a name="l00405"></a>00405 
<a name="l00409"></a><a class="code" href="classCALICE_1_1CellParameter.html#ad52d1b70e2f0f27cf29020289da277e5">00409</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#ad52d1b70e2f0f27cf29020289da277e5" title="Shift the current and the old pedestal by this value.">shiftPedestal</a>(Float_t shift) {
<a name="l00410"></a>00410       <a class="code" href="classCALICE_1_1CellParameter.html#af3c9c24f740b0822c4b996a363507cf5" title="Set the pedestal.">setPedestal</a>(shift+<a class="code" href="classCALICE_1_1CellParameter.html#a3223608e5f680b674e7181b5c4495935" title="Get the pedestal.">getPedestal</a>());
<a name="l00411"></a>00411       <a class="code" href="classCALICE_1_1CellParameter.html#a971b60a79e06210ddc52c25dbf765925" title="Set the old pedestal.">setOldPedestal</a>(shift+<a class="code" href="classCALICE_1_1CellParameter.html#ac159d4054fd122bfb2fb6c6730110126" title="Get the old pedestal The result is undefined before the pedestals and the noise have...">getOldPedestal</a>());
<a name="l00412"></a>00412       <a class="code" href="classCALICE_1_1CellParameter.html#a6c7c08f561c2581f43be8003f2a0312b" title="Increment the pedestal change counter.">incrementNPedestalChanges</a>();
<a name="l00413"></a>00413     };
<a name="l00414"></a>00414 
<a name="l00415"></a>00415   <span class="keyword">protected</span>:
<a name="l00419"></a><a class="code" href="classCALICE_1_1CellParameter.html#a1980533fe8a284bed40839d8a9fcf523">00419</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#a1980533fe8a284bed40839d8a9fcf523" title="Set the value of the pedestal change counter.">setNPedestalChanges</a>(UInt_t n_pedestal_changes) {obj()-&gt;setIntVal( kCellParameterIntNPedestalChanges, static_cast&lt;Int_t&gt;(n_pedestal_changes));};
<a name="l00420"></a>00420 
<a name="l00421"></a>00421   <span class="keyword">public</span>:
<a name="l00425"></a><a class="code" href="classCALICE_1_1CellParameter.html#a8f6f313321e39c27dc7f09899aa6e948">00425</a>     UInt_t <a class="code" href="classCALICE_1_1CellParameter.html#a8f6f313321e39c27dc7f09899aa6e948" title="Get the value of the pedestal change counter.">getNPedestalChanges</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>UInt_t<span class="keyword">&gt;</span>(getIntVal( kCellParameterIntNPedestalChanges));};
<a name="l00426"></a>00426 
<a name="l00427"></a>00427   <span class="keyword">protected</span>:
<a name="l00431"></a><a class="code" href="classCALICE_1_1CellParameter.html#a6c7c08f561c2581f43be8003f2a0312b">00431</a>     <span class="keywordtype">void</span> <a class="code" href="classCALICE_1_1CellParameter.html#a6c7c08f561c2581f43be8003f2a0312b" title="Increment the pedestal change counter.">incrementNPedestalChanges</a>() {<a class="code" href="classCALICE_1_1CellParameter.html#a1980533fe8a284bed40839d8a9fcf523" title="Set the value of the pedestal change counter.">setNPedestalChanges</a>(<a class="code" href="classCALICE_1_1CellParameter.html#a8f6f313321e39c27dc7f09899aa6e948" title="Get the value of the pedestal change counter.">getNPedestalChanges</a>()+1);};
<a name="l00432"></a>00432 
<a name="l00433"></a>00433   <span class="keyword">public</span>:
<a name="l00434"></a>00434 
<a name="l00435"></a>00435 <span class="preprocessor">#ifdef WITH_CELL_PAR_INDEX</span>
<a name="l00436"></a>00436 <span class="preprocessor"></span>
<a name="l00438"></a>00438     <span class="keywordtype">void</span> setModuleIndex(UInt_t a_module_index) {obj()-&gt;setIntVal( kCellParameterIntModuleIndex,(Int_t) a_module_index);};
<a name="l00439"></a>00439 
<a name="l00443"></a>00443     UInt_t getModuleIndex()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (UInt_t) getIntVal( kCellParameterIntModuleIndex);};
<a name="l00444"></a>00444 
<a name="l00445"></a>00445 
<a name="l00448"></a>00448     <span class="keywordtype">void</span> setCellIndex(UInt_t a_module_index) {obj()-&gt;setIntVal( kCellParameterIntCellIndex,(Int_t) a_module_index);};
<a name="l00449"></a>00449 
<a name="l00453"></a>00453     UInt_t getCellIndex()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (UInt_t) getIntVal( kCellParameterIntCellIndex);};
<a name="l00454"></a>00454 <span class="preprocessor">#endif</span>
<a name="l00455"></a>00455 <span class="preprocessor"></span>
<a name="l00456"></a>00456     <span class="comment">// -------- need to implement abstract methods from LCGenericObject</span>
<a name="l00457"></a>00457 
<a name="l00460"></a><a class="code" href="classCALICE_1_1CellParameter.html#add6643930ab5dcb3ff15c8a0aeeb65a4">00460</a>     <span class="keyword">const</span> std::string <a class="code" href="classCALICE_1_1CellParameter.html#add6643930ab5dcb3ff15c8a0aeeb65a4" title="Return the type of the class.">getTypeName</a>()<span class="keyword"> const </span>{
<a name="l00461"></a>00461       <span class="keywordflow">return</span> std::string(<span class="stringliteral">&quot;CellParameter&quot;</span>);
<a name="l00462"></a>00462     };
<a name="l00463"></a>00463 
<a name="l00466"></a><a class="code" href="classCALICE_1_1CellParameter.html#a510675057c37ce93c7f992257c9cc8bb">00466</a>     <span class="keyword">const</span> std::string <a class="code" href="classCALICE_1_1CellParameter.html#a510675057c37ce93c7f992257c9cc8bb" title="Return a brief description of the data members.">getDataDescription</a>()<span class="keyword"> const </span>{
<a name="l00467"></a>00467       std::stringstream message;
<a name="l00468"></a>00468       message &lt;&lt; <span class="stringliteral">&quot;i[&quot;</span> &lt;&lt; kNCellParameterInts &lt;&lt; <span class="stringliteral">&quot;]: n,sat.,hits,ped. ch.,mem idx.; &quot;</span>
<a name="l00469"></a>00469               &lt;&lt; <span class="stringliteral">&quot;f[&quot;</span> &lt;&lt; kNCellParameterFloats &lt;&lt; <span class="stringliteral">&quot;]: pedestal,noise,old ped., old noise, mem[5]; &quot;</span>;
<a name="l00470"></a>00470       <span class="keywordflow">return</span> message.str();
<a name="l00471"></a>00471     };
<a name="l00472"></a>00472 
<a name="l00473"></a>00473   };
<a name="l00474"></a>00474 }
<a name="l00475"></a>00475 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 1 Dec 2017 for RAW2CALOHIT by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
